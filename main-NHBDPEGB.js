var qL=Object.create;var by=Object.defineProperty,WL=Object.defineProperties,GL=Object.getOwnPropertyDescriptor,KL=Object.getOwnPropertyDescriptors,ZL=Object.getOwnPropertyNames,ND=Object.getOwnPropertySymbols,OD=Object.getPrototypeOf,LD=Object.prototype.hasOwnProperty,QL=Object.prototype.propertyIsEnumerable,YL=Reflect.get;var kD=(n,e,t)=>e in n?by(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Q=(n,e)=>{for(var t in e||={})LD.call(e,t)&&kD(n,t,e[t]);if(ND)for(var t of ND(e))QL.call(e,t)&&kD(n,t,e[t]);return n},we=(n,e)=>WL(n,KL(e));var JL=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var XL=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ZL(e))!LD.call(n,i)&&i!==t&&by(n,i,{get:()=>e[i],enumerable:!(r=GL(e,i))||r.enumerable});return n};var FD=(n,e,t)=>(t=n!=null?qL(OD(n)):{},XL(e||!n||!n.__esModule?by(t,"default",{value:n,enumerable:!0}):t,n));var Yo=(n,e,t)=>YL(OD(n),t,e);var T=(n,e,t)=>new Promise((r,i)=>{var o=d=>{try{u(t.next(d))}catch(f){i(f)}},a=d=>{try{u(t.throw(d))}catch(f){i(f)}},u=d=>d.done?r(d.value):Promise.resolve(d.value).then(o,a);u((t=t.apply(n,e)).next())});var nD=JL((Gv,tL)=>{"use strict";(function(n,e){typeof Gv=="object"&&typeof tL<"u"?e(Gv):typeof define=="function"&&define.amd?define(["exports"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.leaflet={}))})(Gv,function(n){"use strict";var e="1.9.4";function t(s){var c,h,p,_;for(h=1,p=arguments.length;h<p;h++){_=arguments[h];for(c in _)s[c]=_[c]}return s}var r=Object.create||(function(){function s(){}return function(c){return s.prototype=c,new s}})();function i(s,c){var h=Array.prototype.slice;if(s.bind)return s.bind.apply(s,h.call(arguments,1));var p=h.call(arguments,2);return function(){return s.apply(c,p.length?p.concat(h.call(arguments)):arguments)}}var o=0;function a(s){return"_leaflet_id"in s||(s._leaflet_id=++o),s._leaflet_id}function u(s,c,h){var p,_,w,S;return S=function(){p=!1,_&&(w.apply(h,_),_=!1)},w=function(){p?_=arguments:(s.apply(h,arguments),setTimeout(S,c),p=!0)},w}function d(s,c,h){var p=c[1],_=c[0],w=p-_;return s===p&&h?s:((s-_)%w+w)%w+_}function f(){return!1}function g(s,c){if(c===!1)return s;var h=Math.pow(10,c===void 0?6:c);return Math.round(s*h)/h}function y(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function E(s){return y(s).split(/\s+/)}function b(s,c){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?r(s.options):{});for(var h in c)s.options[h]=c[h];return s.options}function N(s,c,h){var p=[];for(var _ in s)p.push(encodeURIComponent(h?_.toUpperCase():_)+"="+encodeURIComponent(s[_]));return(!c||c.indexOf("?")===-1?"?":"&")+p.join("&")}var $=/\{ *([\w_ -]+) *\}/g;function F(s,c){return s.replace($,function(h,p){var _=c[p];if(_===void 0)throw new Error("No value provided for variable "+h);return typeof _=="function"&&(_=_(c)),_})}var q=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function oe(s,c){for(var h=0;h<s.length;h++)if(s[h]===c)return h;return-1}var se="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ce(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var Ke=0;function Ee(s){var c=+new Date,h=Math.max(0,16-(c-Ke));return Ke=c+h,window.setTimeout(s,h)}var x=window.requestAnimationFrame||ce("RequestAnimationFrame")||Ee,C=window.cancelAnimationFrame||ce("CancelAnimationFrame")||ce("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function D(s,c,h){if(h&&x===Ee)s.call(c);else return x.call(window,i(s,c))}function R(s){s&&C.call(window,s)}var M={__proto__:null,extend:t,create:r,bind:i,get lastId(){return o},stamp:a,throttle:u,wrapNum:d,falseFn:f,formatNum:g,trim:y,splitWords:E,setOptions:b,getParamString:N,template:F,isArray:q,indexOf:oe,emptyImageUrl:se,requestFn:x,cancelFn:C,requestAnimFrame:D,cancelAnimFrame:R};function k(){}k.extend=function(s){var c=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=c.__super__=this.prototype,p=r(h);p.constructor=c,c.prototype=p;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(c[_]=this[_]);return s.statics&&t(c,s.statics),s.includes&&(A(s.includes),t.apply(null,[p].concat(s.includes))),t(p,s),delete p.statics,delete p.includes,p.options&&(p.options=h.options?r(h.options):{},t(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,S=p._initHooks.length;w<S;w++)p._initHooks[w].call(this)}},c},k.include=function(s){var c=this.prototype.options;return t(this.prototype,s),s.options&&(this.prototype.options=c,this.mergeOptions(s.options)),this},k.mergeOptions=function(s){return t(this.prototype.options,s),this},k.addInitHook=function(s){var c=Array.prototype.slice.call(arguments,1),h=typeof s=="function"?s:function(){this[s].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function A(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=q(s)?s:[s];for(var c=0;c<s.length;c++)s[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Et={on:function(s,c,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],c);else{s=E(s);for(var _=0,w=s.length;_<w;_++)this._on(s[_],c,h)}return this},off:function(s,c,h){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],c);else{s=E(s);for(var _=arguments.length===1,w=0,S=s.length;w<S;w++)_?this._off(s[w]):this._off(s[w],c,h)}return this},_on:function(s,c,h,p){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(s,c,h)===!1){h===this&&(h=void 0);var _={fn:c,ctx:h};p&&(_.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(_)}},_off:function(s,c,h){var p,_,w;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(_=0,w=p.length;_<w;_++)p[_].fn=f;delete this._events[s];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var S=this._listens(s,c,h);if(S!==!1){var O=p[S];this._firingCount&&(O.fn=f,this._events[s]=p=p.slice()),p.splice(S,1)}}},fire:function(s,c,h){if(!this.listens(s,h))return this;var p=t({},c,{type:s,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var _=this._events[s];if(_){this._firingCount=this._firingCount+1||1;for(var w=0,S=_.length;w<S;w++){var O=_[w],V=O.fn;O.once&&this.off(s,V,O.ctx),V.call(O.ctx||this,p)}this._firingCount--}}return h&&this._propagateEvent(p),this},listens:function(s,c,h,p){typeof s!="string"&&console.warn('"string" type argument expected');var _=c;typeof c!="function"&&(p=!!c,_=void 0,h=void 0);var w=this._events&&this._events[s];if(w&&w.length&&this._listens(s,_,h)!==!1)return!0;if(p){for(var S in this._eventParents)if(this._eventParents[S].listens(s,c,h,p))return!0}return!1},_listens:function(s,c,h){if(!this._events)return!1;var p=this._events[s]||[];if(!c)return!!p.length;h===this&&(h=void 0);for(var _=0,w=p.length;_<w;_++)if(p[_].fn===c&&p[_].ctx===h)return _;return!1},once:function(s,c,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],c,!0);else{s=E(s);for(var _=0,w=s.length;_<w;_++)this._on(s[_],c,h,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[a(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[a(s)],this},_propagateEvent:function(s){for(var c in this._eventParents)this._eventParents[c].fire(s.type,t({layer:s.target,propagatedFrom:s.target},s),!0)}};Et.addEventListener=Et.on,Et.removeEventListener=Et.clearAllEventListeners=Et.off,Et.addOneTimeEventListener=Et.once,Et.fireEvent=Et.fire,Et.hasEventListeners=Et.listens;var Or=k.extend(Et);function Ie(s,c,h){this.x=h?Math.round(s):s,this.y=h?Math.round(c):c}var Fo=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};Ie.prototype={clone:function(){return new Ie(this.x,this.y)},add:function(s){return this.clone()._add(fe(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(fe(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new Ie(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new Ie(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Fo(this.x),this.y=Fo(this.y),this},distanceTo:function(s){s=fe(s);var c=s.x-this.x,h=s.y-this.y;return Math.sqrt(c*c+h*h)},equals:function(s){return s=fe(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=fe(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}};function fe(s,c,h){return s instanceof Ie?s:q(s)?new Ie(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new Ie(s.x,s.y):new Ie(s,c,h)}function ot(s,c){if(s)for(var h=c?[s,c]:s,p=0,_=h.length;p<_;p++)this.extend(h[p])}ot.prototype={extend:function(s){var c,h;if(!s)return this;if(s instanceof Ie||typeof s[0]=="number"||"x"in s)c=h=fe(s);else if(s=ln(s),c=s.min,h=s.max,!c||!h)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=h.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(s){return fe((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return fe(this.min.x,this.max.y)},getTopRight:function(){return fe(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var c,h;return typeof s[0]=="number"||s instanceof Ie?s=fe(s):s=ln(s),s instanceof ot?(c=s.min,h=s.max):c=h=s,c.x>=this.min.x&&h.x<=this.max.x&&c.y>=this.min.y&&h.y<=this.max.y},intersects:function(s){s=ln(s);var c=this.min,h=this.max,p=s.min,_=s.max,w=_.x>=c.x&&p.x<=h.x,S=_.y>=c.y&&p.y<=h.y;return w&&S},overlaps:function(s){s=ln(s);var c=this.min,h=this.max,p=s.min,_=s.max,w=_.x>c.x&&p.x<h.x,S=_.y>c.y&&p.y<h.y;return w&&S},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var c=this.min,h=this.max,p=Math.abs(c.x-h.x)*s,_=Math.abs(c.y-h.y)*s;return ln(fe(c.x-p,c.y-_),fe(h.x+p,h.y+_))},equals:function(s){return s?(s=ln(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function ln(s,c){return!s||s instanceof ot?s:new ot(s,c)}function wn(s,c){if(s)for(var h=c?[s,c]:s,p=0,_=h.length;p<_;p++)this.extend(h[p])}wn.prototype={extend:function(s){var c=this._southWest,h=this._northEast,p,_;if(s instanceof ve)p=s,_=s;else if(s instanceof wn){if(p=s._southWest,_=s._northEast,!p||!_)return this}else return s?this.extend(Fe(s)||et(s)):this;return!c&&!h?(this._southWest=new ve(p.lat,p.lng),this._northEast=new ve(_.lat,_.lng)):(c.lat=Math.min(p.lat,c.lat),c.lng=Math.min(p.lng,c.lng),h.lat=Math.max(_.lat,h.lat),h.lng=Math.max(_.lng,h.lng)),this},pad:function(s){var c=this._southWest,h=this._northEast,p=Math.abs(c.lat-h.lat)*s,_=Math.abs(c.lng-h.lng)*s;return new wn(new ve(c.lat-p,c.lng-_),new ve(h.lat+p,h.lng+_))},getCenter:function(){return new ve((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ve(this.getNorth(),this.getWest())},getSouthEast:function(){return new ve(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof ve||"lat"in s?s=Fe(s):s=et(s);var c=this._southWest,h=this._northEast,p,_;return s instanceof wn?(p=s.getSouthWest(),_=s.getNorthEast()):p=_=s,p.lat>=c.lat&&_.lat<=h.lat&&p.lng>=c.lng&&_.lng<=h.lng},intersects:function(s){s=et(s);var c=this._southWest,h=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),w=_.lat>=c.lat&&p.lat<=h.lat,S=_.lng>=c.lng&&p.lng<=h.lng;return w&&S},overlaps:function(s){s=et(s);var c=this._southWest,h=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),w=_.lat>c.lat&&p.lat<h.lat,S=_.lng>c.lng&&p.lng<h.lng;return w&&S},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,c){return s?(s=et(s),this._southWest.equals(s.getSouthWest(),c)&&this._northEast.equals(s.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function et(s,c){return s instanceof wn?s:new wn(s,c)}function ve(s,c,h){if(isNaN(s)||isNaN(c))throw new Error("Invalid LatLng object: ("+s+", "+c+")");this.lat=+s,this.lng=+c,h!==void 0&&(this.alt=+h)}ve.prototype={equals:function(s,c){if(!s)return!1;s=Fe(s);var h=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return h<=(c===void 0?1e-9:c)},toString:function(s){return"LatLng("+g(this.lat,s)+", "+g(this.lng,s)+")"},distanceTo:function(s){return si.distance(this,Fe(s))},wrap:function(){return si.wrapLatLng(this)},toBounds:function(s){var c=180*s/40075017,h=c/Math.cos(Math.PI/180*this.lat);return et([this.lat-c,this.lng-h],[this.lat+c,this.lng+h])},clone:function(){return new ve(this.lat,this.lng,this.alt)}};function Fe(s,c,h){return s instanceof ve?s:q(s)&&typeof s[0]!="object"?s.length===3?new ve(s[0],s[1],s[2]):s.length===2?new ve(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new ve(s.lat,"lng"in s?s.lng:s.lon,s.alt):c===void 0?null:new ve(s,c,h)}var Rn={latLngToPoint:function(s,c){var h=this.projection.project(s),p=this.scale(c);return this.transformation._transform(h,p)},pointToLatLng:function(s,c){var h=this.scale(c),p=this.transformation.untransform(s,h);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var c=this.projection.bounds,h=this.scale(s),p=this.transformation.transform(c.min,h),_=this.transformation.transform(c.max,h);return new ot(p,_)},infinite:!1,wrapLatLng:function(s){var c=this.wrapLng?d(s.lng,this.wrapLng,!0):s.lng,h=this.wrapLat?d(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new ve(h,c,p)},wrapLatLngBounds:function(s){var c=s.getCenter(),h=this.wrapLatLng(c),p=c.lat-h.lat,_=c.lng-h.lng;if(p===0&&_===0)return s;var w=s.getSouthWest(),S=s.getNorthEast(),O=new ve(w.lat-p,w.lng-_),V=new ve(S.lat-p,S.lng-_);return new wn(O,V)}},si=t({},Rn,{wrapLng:[-180,180],R:6371e3,distance:function(s,c){var h=Math.PI/180,p=s.lat*h,_=c.lat*h,w=Math.sin((c.lat-s.lat)*h/2),S=Math.sin((c.lng-s.lng)*h/2),O=w*w+Math.cos(p)*Math.cos(_)*S*S,V=2*Math.atan2(Math.sqrt(O),Math.sqrt(1-O));return this.R*V}}),Vo=6378137,Ol={R:Vo,MAX_LATITUDE:85.0511287798,project:function(s){var c=Math.PI/180,h=this.MAX_LATITUDE,p=Math.max(Math.min(h,s.lat),-h),_=Math.sin(p*c);return new Ie(this.R*s.lng*c,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(s){var c=180/Math.PI;return new ve((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*c,s.x*c/this.R)},bounds:(function(){var s=Vo*Math.PI;return new ot([-s,-s],[s,s])})()};function Ll(s,c,h,p){if(q(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=c,this._c=h,this._d=p}Ll.prototype={transform:function(s,c){return this._transform(s.clone(),c)},_transform:function(s,c){return c=c||1,s.x=c*(this._a*s.x+this._b),s.y=c*(this._c*s.y+this._d),s},untransform:function(s,c){return c=c||1,new Ie((s.x/c-this._b)/this._a,(s.y/c-this._d)/this._c)}};function ai(s,c,h,p){return new Ll(s,c,h,p)}var Uo=t({},si,{code:"EPSG:3857",projection:Ol,transformation:(function(){var s=.5/(Math.PI*Ol.R);return ai(s,.5,-s,.5)})()}),Fl=t({},Uo,{code:"EPSG:900913"});function Tc(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Cc(s,c){var h="",p,_,w,S,O,V;for(p=0,w=s.length;p<w;p++){for(O=s[p],_=0,S=O.length;_<S;_++)V=O[_],h+=(_?"L":"M")+V.x+" "+V.y;h+=c?ae.svg?"z":"x":""}return h||"M0 0"}var Ys=document.documentElement.style,Js="ActiveXObject"in window,Pf=Js&&!document.addEventListener,Nf="msLaunchUri"in navigator&&!("documentMode"in document),Dc=tr("webkit"),Vl=tr("android"),Sc=tr("android 2")||tr("android 3"),kf=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),py=Vl&&tr("Google")&&kf<537&&!("AudioNode"in window),Xs=!!window.opera,Ac=!Nf&&tr("chrome"),Rc=tr("gecko")&&!Dc&&!Xs&&!Js,Jt=!Ac&&tr("safari"),Xt=tr("phantom"),ea="OTransition"in Ys,Of=navigator.platform.indexOf("Win")===0,Ul=Js&&"transition"in Ys,jl="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Sc,jo="MozPerspective"in Ys,Lf=!window.L_DISABLE_3D&&(Ul||jl||jo)&&!ea&&!Xt,Bo=typeof orientation<"u"||tr("mobile"),Bl=Bo&&Dc,my=Bo&&jl,Ff=!window.PointerEvent&&window.MSPointerEvent,xc=!!(window.PointerEvent||Ff),$l="ontouchstart"in window||!!window.TouchEvent,Vf=!window.L_NO_TOUCH&&($l||xc),ta=Bo&&Xs,Hl=Bo&&Rc,zl=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Zi=(function(){var s=!1;try{var c=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",f,c),window.removeEventListener("testPassiveEventSupport",f,c)}catch{}return s})(),Uf=(function(){return!!document.createElement("canvas").getContext})(),$o=!!(document.createElementNS&&Tc("svg").createSVGRect),jf=!!$o&&(function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),na=!$o&&(function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var c=s.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}})(),Bf=navigator.platform.indexOf("Mac")===0,dn=navigator.platform.indexOf("Linux")===0;function tr(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var ae={ie:Js,ielt9:Pf,edge:Nf,webkit:Dc,android:Vl,android23:Sc,androidStock:py,opera:Xs,chrome:Ac,gecko:Rc,safari:Jt,phantom:Xt,opera12:ea,win:Of,ie3d:Ul,webkit3d:jl,gecko3d:jo,any3d:Lf,mobile:Bo,mobileWebkit:Bl,mobileWebkit3d:my,msPointer:Ff,pointer:xc,touch:Vf,touchNative:$l,mobileOpera:ta,mobileGecko:Hl,retina:zl,passiveEvents:Zi,canvas:Uf,svg:$o,vml:na,inlineSvg:jf,mac:Bf,linux:dn},Ho=ae.msPointer?"MSPointerDown":"pointerdown",$f=ae.msPointer?"MSPointerMove":"pointermove",Hf=ae.msPointer?"MSPointerUp":"pointerup",Qi=ae.msPointer?"MSPointerCancel":"pointercancel",ql={touchstart:Ho,touchmove:$f,touchend:Hf,touchcancel:Qi},zf={touchstart:Wf,touchmove:zo,touchend:zo,touchcancel:zo},Lr={},Wl=!1;function Gl(s,c,h){return c==="touchstart"&&Zl(),zf[c]?(h=zf[c].bind(this,h),s.addEventListener(ql[c],h,!1),h):(console.warn("wrong event specified:",c),f)}function Mc(s,c,h){if(!ql[c]){console.warn("wrong event specified:",c);return}s.removeEventListener(ql[c],h,!1)}function ci(s){Lr[s.pointerId]=s}function qf(s){Lr[s.pointerId]&&(Lr[s.pointerId]=s)}function Kl(s){delete Lr[s.pointerId]}function Zl(){Wl||(document.addEventListener(Ho,ci,!0),document.addEventListener($f,qf,!0),document.addEventListener(Hf,Kl,!0),document.addEventListener(Qi,Kl,!0),Wl=!0)}function zo(s,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var h in Lr)c.touches.push(Lr[h]);c.changedTouches=[c],s(c)}}function Wf(s,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&bt(c),zo(s,c)}function Gf(s){var c={},h,p;for(p in s)h=s[p],c[p]=h&&h.bind?h.bind(s):h;return s=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var gy=200;function Pc(s,c){s.addEventListener("dblclick",c);var h=0,p;function _(w){if(w.detail!==1){p=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var S=id(w);if(!(S.some(function(V){return V instanceof HTMLLabelElement&&V.attributes.for})&&!S.some(function(V){return V instanceof HTMLInputElement||V instanceof HTMLSelectElement}))){var O=Date.now();O-h<=gy?(p++,p===2&&c(Gf(w))):p=1,h=O}}}return s.addEventListener("click",_),{dblclick:c,simDblclick:_}}function Kf(s,c){s.removeEventListener("dblclick",c.dblclick),s.removeEventListener("click",c.simDblclick)}var ra=wr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Fr=wr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ui=Fr==="webkitTransition"||Fr==="OTransition"?Fr+"End":"transitionend";function Nc(s){return typeof s=="string"?document.getElementById(s):s}function ia(s,c){var h=s.style[c]||s.currentStyle&&s.currentStyle[c];if((!h||h==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);h=p?p[c]:null}return h==="auto"?null:h}function He(s,c,h){var p=document.createElement(s);return p.className=c||"",h&&h.appendChild(p),p}function ut(s){var c=s.parentNode;c&&c.removeChild(s)}function oa(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function li(s){var c=s.parentNode;c&&c.lastChild!==s&&c.appendChild(s)}function di(s){var c=s.parentNode;c&&c.firstChild!==s&&c.insertBefore(s,c.firstChild)}function kc(s,c){if(s.classList!==void 0)return s.classList.contains(c);var h=sa(s);return h.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(h)}function Ae(s,c){if(s.classList!==void 0)for(var h=E(c),p=0,_=h.length;p<_;p++)s.classList.add(h[p]);else if(!kc(s,c)){var w=sa(s);Ql(s,(w?w+" ":"")+c)}}function It(s,c){s.classList!==void 0?s.classList.remove(c):Ql(s,y((" "+sa(s)+" ").replace(" "+c+" "," ")))}function Ql(s,c){s.className.baseVal===void 0?s.className=c:s.className.baseVal=c}function sa(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function xn(s,c){"opacity"in s.style?s.style.opacity=c:"filter"in s.style&&_y(s,c)}function _y(s,c){var h=!1,p="DXImageTransform.Microsoft.Alpha";try{h=s.filters.item(p)}catch{if(c===1)return}c=Math.round(c*100),h?(h.Enabled=c!==100,h.Opacity=c):s.style.filter+=" progid:"+p+"(opacity="+c+")"}function wr(s){for(var c=document.documentElement.style,h=0;h<s.length;h++)if(s[h]in c)return s[h];return!1}function hn(s,c,h){var p=c||new Ie(0,0);s.style[ra]=(ae.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(h?" scale("+h+")":"")}function ht(s,c){s._leaflet_pos=c,ae.any3d?hn(s,c):(s.style.left=c.x+"px",s.style.top=c.y+"px")}function Er(s){return s._leaflet_pos||new Ie(0,0)}var qo,Ze,Wo;if("onselectstart"in document)qo=function(){ye(window,"selectstart",bt)},Ze=function(){tt(window,"selectstart",bt)};else{var Vr=wr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);qo=function(){if(Vr){var s=document.documentElement.style;Wo=s[Vr],s[Vr]="none"}},Ze=function(){Vr&&(document.documentElement.style[Vr]=Wo,Wo=void 0)}}function Yi(){ye(window,"dragstart",bt)}function Yl(){tt(window,"dragstart",bt)}var aa,Jl;function Xl(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Oc(),aa=s,Jl=s.style.outlineStyle,s.style.outlineStyle="none",ye(window,"keydown",Oc))}function Oc(){aa&&(aa.style.outlineStyle=Jl,aa=void 0,Jl=void 0,tt(window,"keydown",Oc))}function Zf(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Ji(s){var c=s.getBoundingClientRect();return{x:c.width/s.offsetWidth||1,y:c.height/s.offsetHeight||1,boundingClientRect:c}}var hi={__proto__:null,TRANSFORM:ra,TRANSITION:Fr,TRANSITION_END:ui,get:Nc,getStyle:ia,create:He,remove:ut,empty:oa,toFront:li,toBack:di,hasClass:kc,addClass:Ae,removeClass:It,setClass:Ql,getClass:sa,setOpacity:xn,testProp:wr,setTransform:hn,setPosition:ht,getPosition:Er,get disableTextSelection(){return qo},get enableTextSelection(){return Ze},disableImageDrag:Yi,enableImageDrag:Yl,preventOutline:Xl,restoreOutline:Oc,getSizedParentNode:Zf,getScale:Ji};function ye(s,c,h,p){if(c&&typeof c=="object")for(var _ in c)td(s,_,c[_],h);else{c=E(c);for(var w=0,S=c.length;w<S;w++)td(s,c[w],h,p)}return this}var nr="_leaflet_events";function tt(s,c,h,p){if(arguments.length===1)Xi(s),delete s[nr];else if(c&&typeof c=="object")for(var _ in c)nd(s,_,c[_],h);else if(c=E(c),arguments.length===2)Xi(s,function(O){return oe(c,O)!==-1});else for(var w=0,S=c.length;w<S;w++)nd(s,c[w],h,p);return this}function Xi(s,c){for(var h in s[nr]){var p=h.split(/\d/)[0];(!c||c(p))&&nd(s,p,null,null,h)}}var ed={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function td(s,c,h,p){var _=c+a(h)+(p?"_"+a(p):"");if(s[nr]&&s[nr][_])return this;var w=function(O){return h.call(p||s,O||window.event)},S=w;!ae.touchNative&&ae.pointer&&c.indexOf("touch")===0?w=Gl(s,c,w):ae.touch&&c==="dblclick"?w=Pc(s,w):"addEventListener"in s?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?s.addEventListener(ed[c]||c,w,ae.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(w=function(O){O=O||window.event,la(s,O)&&S(O)},s.addEventListener(ed[c],w,!1)):s.addEventListener(c,S,!1):s.attachEvent("on"+c,w),s[nr]=s[nr]||{},s[nr][_]=w}function nd(s,c,h,p,_){_=_||c+a(h)+(p?"_"+a(p):"");var w=s[nr]&&s[nr][_];if(!w)return this;!ae.touchNative&&ae.pointer&&c.indexOf("touch")===0?Mc(s,c,w):ae.touch&&c==="dblclick"?Kf(s,w):"removeEventListener"in s?s.removeEventListener(ed[c]||c,w,!1):s.detachEvent("on"+c,w),s[nr][_]=null}function En(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function rd(s){return td(s,"wheel",En),this}function ca(s){return ye(s,"mousedown touchstart dblclick contextmenu",En),s._leaflet_disable_click=!0,this}function bt(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function Ir(s){return bt(s),En(s),this}function id(s){if(s.composedPath)return s.composedPath();for(var c=[],h=s.target;h;)c.push(h),h=h.parentNode;return c}function Go(s,c){if(!c)return new Ie(s.clientX,s.clientY);var h=Ji(c),p=h.boundingClientRect;return new Ie((s.clientX-p.left)/h.x-c.clientLeft,(s.clientY-p.top)/h.y-c.clientTop)}var ua=ae.linux&&ae.chrome?window.devicePixelRatio:ae.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function od(s){return ae.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/ua:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function la(s,c){var h=c.relatedTarget;if(!h)return!0;try{for(;h&&h!==s;)h=h.parentNode}catch{return!1}return h!==s}var mt={__proto__:null,on:ye,off:tt,stopPropagation:En,disableScrollPropagation:rd,disableClickPropagation:ca,preventDefault:bt,stop:Ir,getPropagationPath:id,getMousePosition:Go,getWheelDelta:od,isExternalTarget:la,addListener:ye,removeListener:tt},Qf=Or.extend({run:function(s,c,h,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Er(s),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(s){var c=+new Date-this._startTime,h=this._duration*1e3;c<h?this._runFrame(this._easeOut(c/h),s):(this._runFrame(1),this._complete())},_runFrame:function(s,c){var h=this._startPos.add(this._offset.multiplyBy(s));c&&h._round(),ht(this._el,h),this.fire("step")},_complete:function(){R(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Ve=Or.extend({options:{crs:Uo,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,c){c=b(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(Fe(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Fr&&ae.any3d&&!ae.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ye(this._proxy,ui,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,c,h){if(c=c===void 0?this._zoom:this._limitZoom(c),s=this._limitCenter(Fe(s),c,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=t({animate:h.animate},h.zoom),h.pan=t({animate:h.animate,duration:h.duration},h.pan));var p=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,c,h.zoom):this._tryAnimatedPan(s,h.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,c,h.pan&&h.pan.noMoveStart),this},setZoom:function(s,c){return this._loaded?this.setView(this.getCenter(),s,{zoom:c}):(this._zoom=s,this)},zoomIn:function(s,c){return s=s||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,c)},zoomOut:function(s,c){return s=s||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,c)},setZoomAround:function(s,c,h){var p=this.getZoomScale(c),_=this.getSize().divideBy(2),w=s instanceof Ie?s:this.latLngToContainerPoint(s),S=w.subtract(_).multiplyBy(1-1/p),O=this.containerPointToLatLng(_.add(S));return this.setView(O,c,{zoom:h})},_getBoundsCenterZoom:function(s,c){c=c||{},s=s.getBounds?s.getBounds():et(s);var h=fe(c.paddingTopLeft||c.padding||[0,0]),p=fe(c.paddingBottomRight||c.padding||[0,0]),_=this.getBoundsZoom(s,!1,h.add(p));if(_=typeof c.maxZoom=="number"?Math.min(c.maxZoom,_):_,_===1/0)return{center:s.getCenter(),zoom:_};var w=p.subtract(h).divideBy(2),S=this.project(s.getSouthWest(),_),O=this.project(s.getNorthEast(),_),V=this.unproject(S.add(O).divideBy(2).add(w),_);return{center:V,zoom:_}},fitBounds:function(s,c){if(s=et(s),!s.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(s,c);return this.setView(h.center,h.zoom,c)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,c){return this.setView(s,this._zoom,{pan:c})},panBy:function(s,c){if(s=fe(s).round(),c=c||{},!s.x&&!s.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Qf,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){Ae(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,h,c.duration||.25,c.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,c,h){if(h=h||{},h.animate===!1||!ae.any3d)return this.setView(s,c,h);this._stop();var p=this.project(this.getCenter()),_=this.project(s),w=this.getSize(),S=this._zoom;s=Fe(s),c=c===void 0?S:c;var O=Math.max(w.x,w.y),V=O*this.getZoomScale(S,c),G=_.distanceTo(p)||1,ne=1.42,me=ne*ne;function Oe(jt){var pp=jt?-1:1,BL=jt?V:O,$L=V*V-O*O+pp*me*me*G*G,HL=2*BL*me*G,Iy=$L/HL,PD=Math.sqrt(Iy*Iy+1)-Iy,zL=PD<1e-9?-18:Math.log(PD);return zL}function Pn(jt){return(Math.exp(jt)-Math.exp(-jt))/2}function tn(jt){return(Math.exp(jt)+Math.exp(-jt))/2}function br(jt){return Pn(jt)/tn(jt)}var Hn=Oe(0);function Gc(jt){return O*(tn(Hn)/tn(Hn+ne*jt))}function FL(jt){return O*(tn(Hn)*br(Hn+ne*jt)-Pn(Hn))/me}function VL(jt){return 1-Math.pow(1-jt,1.5)}var UL=Date.now(),xD=(Oe(1)-Hn)/ne,jL=h.duration?1e3*h.duration:1e3*xD*.8;function MD(){var jt=(Date.now()-UL)/jL,pp=VL(jt)*xD;jt<=1?(this._flyToFrame=D(MD,this),this._move(this.unproject(p.add(_.subtract(p).multiplyBy(FL(pp)/G)),S),this.getScaleZoom(O/Gc(pp),S),{flyTo:!0})):this._move(s,c)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),MD.call(this),this},flyToBounds:function(s,c){var h=this._getBoundsCenterZoom(s,c);return this.flyTo(h.center,h.zoom,c)},setMaxBounds:function(s){return s=et(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var c=this.options.minZoom;return this.options.minZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var c=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,c){this._enforcingBounds=!0;var h=this.getCenter(),p=this._limitCenter(h,this._zoom,et(s));return h.equals(p)||this.panTo(p,c),this._enforcingBounds=!1,this},panInside:function(s,c){c=c||{};var h=fe(c.paddingTopLeft||c.padding||[0,0]),p=fe(c.paddingBottomRight||c.padding||[0,0]),_=this.project(this.getCenter()),w=this.project(s),S=this.getPixelBounds(),O=ln([S.min.add(h),S.max.subtract(p)]),V=O.getSize();if(!O.contains(w)){this._enforcingBounds=!0;var G=w.subtract(O.getCenter()),ne=O.extend(w).getSize().subtract(V);_.x+=G.x<0?-ne.x:ne.x,_.y+=G.y<0?-ne.y:ne.y,this.panTo(this.unproject(_),c),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=t({animate:!1,pan:!0},s===!0?{animate:!0}:s);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),p=c.divideBy(2).round(),_=h.divideBy(2).round(),w=p.subtract(_);return!w.x&&!w.y?this:(s.animate&&s.pan?this.panBy(w):(s.pan&&this._rawPanBy(w),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=t({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=i(this._handleGeolocationResponse,this),h=i(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,h,s):navigator.geolocation.getCurrentPosition(c,h,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var c=s.code,h=s.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var c=s.coords.latitude,h=s.coords.longitude,p=new ve(c,h),_=p.toBounds(s.coords.accuracy*2),w=this._locateOptions;if(w.setView){var S=this.getBoundsZoom(_);this.setView(p,w.maxZoom?Math.min(S,w.maxZoom):S)}var O={latlng:p,bounds:_,timestamp:s.timestamp};for(var V in s.coords)typeof s.coords[V]=="number"&&(O[V]=s.coords[V]);this.fire("locationfound",O)}},addHandler:function(s,c){if(!c)return this;var h=this[s]=new c(this);return this._handlers.push(h),this.options[s]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ut(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(R(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)ut(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,c){var h="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=He("div",h,c||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),c=this.unproject(s.getBottomLeft()),h=this.unproject(s.getTopRight());return new wn(c,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,c,h){s=et(s),h=fe(h||[0,0]);var p=this.getZoom()||0,_=this.getMinZoom(),w=this.getMaxZoom(),S=s.getNorthWest(),O=s.getSouthEast(),V=this.getSize().subtract(h),G=ln(this.project(O,p),this.project(S,p)).getSize(),ne=ae.any3d?this.options.zoomSnap:1,me=V.x/G.x,Oe=V.y/G.y,Pn=c?Math.max(me,Oe):Math.min(me,Oe);return p=this.getScaleZoom(Pn,p),ne&&(p=Math.round(p/(ne/100))*(ne/100),p=c?Math.ceil(p/ne)*ne:Math.floor(p/ne)*ne),Math.max(_,Math.min(w,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Ie(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,c){var h=this._getTopLeftPoint(s,c);return new ot(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,c){var h=this.options.crs;return c=c===void 0?this._zoom:c,h.scale(s)/h.scale(c)},getScaleZoom:function(s,c){var h=this.options.crs;c=c===void 0?this._zoom:c;var p=h.zoom(s*h.scale(c));return isNaN(p)?1/0:p},project:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(Fe(s),c)},unproject:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(fe(s),c)},layerPointToLatLng:function(s){var c=fe(s).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(s){var c=this.project(Fe(s))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(Fe(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(et(s))},distance:function(s,c){return this.options.crs.distance(Fe(s),Fe(c))},containerPointToLayerPoint:function(s){return fe(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return fe(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var c=this.containerPointToLayerPoint(fe(s));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Fe(s)))},mouseEventToContainerPoint:function(s){return Go(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var c=this._container=Nc(s);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ye(c,"scroll",this._onScroll,this),this._containerId=a(c)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&ae.any3d,Ae(s,"leaflet-container"+(ae.touch?" leaflet-touch":"")+(ae.retina?" leaflet-retina":"")+(ae.ielt9?" leaflet-oldie":"")+(ae.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=ia(s,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ht(this._mapPane,new Ie(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ae(s.markerPane,"leaflet-zoom-hide"),Ae(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,c,h){ht(this._mapPane,new Ie(0,0));var p=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var _=this._zoom!==c;this._moveStart(_,h)._move(s,c)._moveEnd(_),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,c){return s&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(s,c,h,p){c===void 0&&(c=this._zoom);var _=this._zoom!==c;return this._zoom=c,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?h&&h.pinch&&this.fire("zoom",h):((_||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return R(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){ht(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[a(this._container)]=this;var c=s?tt:ye;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),ae.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){R(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,c){for(var h=[],p,_=c==="mouseout"||c==="mouseover",w=s.target||s.srcElement,S=!1;w;){if(p=this._targets[a(w)],p&&(c==="click"||c==="preclick")&&this._draggableMoved(p)){S=!0;break}if(p&&p.listens(c,!0)&&(_&&!la(w,s)||(h.push(p),_))||w===this._container)break;w=w.parentNode}return!h.length&&!S&&!_&&this.listens(c,!0)&&(h=[this]),h},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var c=s.target||s.srcElement;if(!(!this._loaded||c._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(c))){var h=s.type;h==="mousedown"&&Xl(c),this._fireDOMEvent(s,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,c,h){if(s.type==="click"){var p=t({},s);p.type="preclick",this._fireDOMEvent(p,p.type,h)}var _=this._findEventTargets(s,c);if(h){for(var w=[],S=0;S<h.length;S++)h[S].listens(c,!0)&&w.push(h[S]);_=w.concat(_)}if(_.length){c==="contextmenu"&&bt(s);var O=_[0],V={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var G=O.getLatLng&&(!O._radius||O._radius<=10);V.containerPoint=G?this.latLngToContainerPoint(O.getLatLng()):this.mouseEventToContainerPoint(s),V.layerPoint=this.containerPointToLayerPoint(V.containerPoint),V.latlng=G?O.getLatLng():this.layerPointToLatLng(V.layerPoint)}for(S=0;S<_.length;S++)if(_[S].fire(c,V,!0),V.originalEvent._stopped||_[S].options.bubblingMouseEvents===!1&&oe(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,c=this._handlers.length;s<c;s++)this._handlers[s].disable()},whenReady:function(s,c){return this._loaded?s.call(c||this,{target:this}):this.on("load",s,c),this},_getMapPanePos:function(){return Er(this._mapPane)||new Ie(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,c){var h=s&&c!==void 0?this._getNewPixelOrigin(s,c):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,c){var h=this.getSize()._divideBy(2);return this.project(s,c)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,c,h){var p=this._getNewPixelOrigin(h,c);return this.project(s,c)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,c,h){var p=this._getNewPixelOrigin(h,c);return ln([this.project(s.getSouthWest(),c)._subtract(p),this.project(s.getNorthWest(),c)._subtract(p),this.project(s.getSouthEast(),c)._subtract(p),this.project(s.getNorthEast(),c)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,c,h){if(!h)return s;var p=this.project(s,c),_=this.getSize().divideBy(2),w=new ot(p.subtract(_),p.add(_)),S=this._getBoundsOffset(w,h,c);return Math.abs(S.x)<=1&&Math.abs(S.y)<=1?s:this.unproject(p.add(S),c)},_limitOffset:function(s,c){if(!c)return s;var h=this.getPixelBounds(),p=new ot(h.min.add(s),h.max.add(s));return s.add(this._getBoundsOffset(p,c))},_getBoundsOffset:function(s,c,h){var p=ln(this.project(c.getNorthEast(),h),this.project(c.getSouthWest(),h)),_=p.min.subtract(s.min),w=p.max.subtract(s.max),S=this._rebound(_.x,-w.x),O=this._rebound(_.y,-w.y);return new Ie(S,O)},_rebound:function(s,c){return s+c>0?Math.round(s-c)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(c))},_limitZoom:function(s){var c=this.getMinZoom(),h=this.getMaxZoom(),p=ae.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(c,Math.min(h,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){It(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,c){var h=this._getCenterOffset(s)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,c),!0)},_createAnimProxy:function(){var s=this._proxy=He("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(c){var h=ra,p=this._proxy.style[h];hn(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),p===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ut(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),c=this.getZoom();hn(this._proxy,this.project(s,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,c,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(c),_=this._getCenterOffset(s)._divideBy(1-1/p);return h.animate!==!0&&!this.getSize().contains(_)?!1:(D(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(s,c,!0)},this),!0)},_animateZoom:function(s,c,h,p){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=c,Ae(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:c,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&It(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Yf(s,c){return new Ve(s,c)}var $n=k.extend({options:{position:"topright"},initialize:function(s){b(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var c=this._map;return c&&c.removeControl(this),this.options.position=s,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var c=this._container=this.onAdd(s),h=this.getPosition(),p=s._controlCorners[h];return Ae(c,"leaflet-control"),h.indexOf("bottom")!==-1?p.insertBefore(c,p.firstChild):p.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ut(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),Ko=function(s){return new $n(s)};Ve.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},c="leaflet-",h=this._controlContainer=He("div",c+"control-container",this._container);function p(_,w){var S=c+_+" "+c+w;s[_+w]=He("div",S,h)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)ut(this._controlCorners[s]);ut(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var da=$n.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,c,h,p){return h<p?-1:p<h?1:0}},initialize:function(s,c,h){b(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in c)this._addLayer(c[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return $n.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,c){return this._addLayer(s,c),this._map?this._update():this},addOverlay:function(s,c){return this._addLayer(s,c,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var c=this._getLayer(a(s));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){Ae(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(Ae(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):It(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return It(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",c=this._container=He("div",s),h=this.options.collapsed;c.setAttribute("aria-haspopup",!0),ca(c),rd(c);var p=this._section=He("section",s+"-list");h&&(this._map.on("click",this.collapse,this),ye(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _=this._layersLink=He("a",s+"-toggle",c);_.href="#",_.title="Layers",_.setAttribute("role","button"),ye(_,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){bt(w),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=He("div",s+"-base",p),this._separator=He("div",s+"-separator",p),this._overlaysList=He("div",s+"-overlays",p),c.appendChild(p)},_getLayer:function(s){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&a(this._layers[c].layer)===s)return this._layers[c]},_addLayer:function(s,c,h){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:c,overlay:h}),this.options.sortLayers&&this._layers.sort(i(function(p,_){return this.options.sortFunction(p.layer,_.layer,p.name,_.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;oa(this._baseLayersList),oa(this._overlaysList),this._layerControlInputs=[];var s,c,h,p,_=0;for(h=0;h<this._layers.length;h++)p=this._layers[h],this._addItem(p),c=c||p.overlay,s=s||!p.overlay,_+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&_>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=c&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var c=this._getLayer(a(s.target)),h=c.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;h&&this._map.fire(h,c)},_createRadioElement:function(s,c){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(c?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=h,p.firstChild},_addItem:function(s){var c=document.createElement("label"),h=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=h):p=this._createRadioElement("leaflet-base-layers_"+a(this),h),this._layerControlInputs.push(p),p.layerId=a(s.layer),ye(p,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+s.name;var w=document.createElement("span");c.appendChild(w),w.appendChild(p),w.appendChild(_);var S=s.overlay?this._overlaysList:this._baseLayersList;return S.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,c,h,p=[],_=[];this._handlingClick=!0;for(var w=s.length-1;w>=0;w--)c=s[w],h=this._getLayer(c.layerId).layer,c.checked?p.push(h):c.checked||_.push(h);for(w=0;w<_.length;w++)this._map.hasLayer(_[w])&&this._map.removeLayer(_[w]);for(w=0;w<p.length;w++)this._map.hasLayer(p[w])||this._map.addLayer(p[w]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,c,h,p=this._map.getZoom(),_=s.length-1;_>=0;_--)c=s[_],h=this._getLayer(c.layerId).layer,c.disabled=h.options.minZoom!==void 0&&p<h.options.minZoom||h.options.maxZoom!==void 0&&p>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,ye(s,"click",bt),this.expand();var c=this;setTimeout(function(){tt(s,"click",bt),c._preventClick=!1})}}),Jf=function(s,c,h){return new da(s,c,h)},rr=$n.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var c="leaflet-control-zoom",h=He("div",c+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,c+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,c+"-out",h,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,c,h,p,_){var w=He("a",h,p);return w.innerHTML=s,w.href="#",w.title=c,w.setAttribute("role","button"),w.setAttribute("aria-label",c),ca(w),ye(w,"click",Ir),ye(w,"click",_,this),ye(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var s=this._map,c="leaflet-disabled";It(this._zoomInButton,c),It(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(Ae(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(Ae(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ve.mergeOptions({zoomControl:!0}),Ve.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new rr,this.addControl(this.zoomControl))});var Xf=function(s){return new rr(s)},ep=$n.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var c="leaflet-control-scale",h=He("div",c),p=this.options;return this._addScales(p,c+"-line",h),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),h},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,c,h){s.metric&&(this._mScale=He("div",c,h)),s.imperial&&(this._iScale=He("div",c,h))},_update:function(){var s=this._map,c=s.getSize().y/2,h=s.distance(s.containerPointToLatLng([0,c]),s.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(h)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var c=this._getRoundNum(s),h=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,h,c/s)},_updateImperial:function(s){var c=s*3.2808399,h,p,_;c>5280?(h=c/5280,p=this._getRoundNum(h),this._updateScale(this._iScale,p+" mi",p/h)):(_=this._getRoundNum(c),this._updateScale(this._iScale,_+" ft",_/c))},_updateScale:function(s,c,h){s.style.width=Math.round(this.options.maxWidth*h)+"px",s.innerHTML=c},_getRoundNum:function(s){var c=Math.pow(10,(Math.floor(s)+"").length-1),h=s/c;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,c*h}}),ha=function(s){return new ep(s)},tp='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',fa=$n.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ae.inlineSvg?tp+" ":"")+"Leaflet</a>"},initialize:function(s){b(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=He("div","leaflet-control-attribution"),ca(this._container);for(var c in s._layers)s._layers[c].getAttribution&&this.addAttribution(s._layers[c].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var c in this._attributions)this._attributions[c]&&s.push(c);var h=[];this.options.prefix&&h.push(this.options.prefix),s.length&&h.push(s.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});Ve.mergeOptions({attributionControl:!0}),Ve.addInitHook(function(){this.options.attributionControl&&new fa().addTo(this)});var Lc=function(s){return new fa(s)};$n.Layers=da,$n.Zoom=rr,$n.Scale=ep,$n.Attribution=fa,Ko.layers=Jf,Ko.zoom=Xf,Ko.scale=ha,Ko.attribution=Lc;var ir=k.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ir.addTo=function(s,c){return s.addHandler(c,this),this};var Fc={Events:Et},np=ae.touch?"touchstart mousedown":"mousedown",Ur=Or.extend({options:{clickTolerance:3},initialize:function(s,c,h,p){b(this,p),this._element=s,this._dragStartTarget=c||s,this._preventOutline=h},enable:function(){this._enabled||(ye(this._dragStartTarget,np,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ur._dragging===this&&this.finishDrag(!0),tt(this._dragStartTarget,np,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!kc(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Ur._dragging===this&&this.finishDrag();return}if(!(Ur._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Ur._dragging=this,this._preventOutline&&Xl(this._element),Yi(),qo(),!this._moving)){this.fire("down");var c=s.touches?s.touches[0]:s,h=Zf(this._element);this._startPoint=new Ie(c.clientX,c.clientY),this._startPos=Er(this._element),this._parentScale=Ji(h);var p=s.type==="mousedown";ye(document,p?"mousemove":"touchmove",this._onMove,this),ye(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var c=s.touches&&s.touches.length===1?s.touches[0]:s,h=new Ie(c.clientX,c.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,bt(s),this._moved||(this.fire("dragstart"),this._moved=!0,Ae(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ae(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),ht(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){It(document.body,"leaflet-dragging"),this._lastTarget&&(It(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),tt(document,"mousemove touchmove",this._onMove,this),tt(document,"mouseup touchend touchcancel",this._onUp,this),Yl(),Ze();var c=this._moved&&this._moving;this._moving=!1,Ur._dragging=!1,c&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Zo(s,c,h){var p,_=[1,4,2,8],w,S,O,V,G,ne,me,Oe;for(w=0,ne=s.length;w<ne;w++)s[w]._code=fi(s[w],c);for(O=0;O<4;O++){for(me=_[O],p=[],w=0,ne=s.length,S=ne-1;w<ne;S=w++)V=s[w],G=s[S],V._code&me?G._code&me||(Oe=pa(G,V,me,c,h),Oe._code=fi(Oe,c),p.push(Oe)):(G._code&me&&(Oe=pa(G,V,me,c,h),Oe._code=fi(Oe,c),p.push(Oe)),p.push(V));s=p}return s}function sd(s,c){var h,p,_,w,S,O,V,G,ne;if(!s||s.length===0)throw new Error("latlngs not passed");Mn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var me=Fe([0,0]),Oe=et(s),Pn=Oe.getNorthWest().distanceTo(Oe.getSouthWest())*Oe.getNorthEast().distanceTo(Oe.getNorthWest());Pn<1700&&(me=Vc(s));var tn=s.length,br=[];for(h=0;h<tn;h++){var Hn=Fe(s[h]);br.push(c.project(Fe([Hn.lat-me.lat,Hn.lng-me.lng])))}for(O=V=G=0,h=0,p=tn-1;h<tn;p=h++)_=br[h],w=br[p],S=_.y*w.x-w.y*_.x,V+=(_.x+w.x)*S,G+=(_.y+w.y)*S,O+=S*3;O===0?ne=br[0]:ne=[V/O,G/O];var Gc=c.unproject(fe(ne));return Fe([Gc.lat+me.lat,Gc.lng+me.lng])}function Vc(s){for(var c=0,h=0,p=0,_=0;_<s.length;_++){var w=Fe(s[_]);c+=w.lat,h+=w.lng,p++}return Fe([c/p,h/p])}var ad={__proto__:null,clipPolygon:Zo,polygonCenter:sd,centroid:Vc};function Uc(s,c){if(!c||!s.length)return s.slice();var h=c*c;return s=eo(s,h),s=rp(s,h),s}function cd(s,c,h){return Math.sqrt(Zt(s,c,h,!0))}function jc(s,c,h){return Zt(s,c,h)}function rp(s,c){var h=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,_=new p(h);_[0]=_[h-1]=1,Bc(s,_,c,0,h-1);var w,S=[];for(w=0;w<h;w++)_[w]&&S.push(s[w]);return S}function Bc(s,c,h,p,_){var w=0,S,O,V;for(O=p+1;O<=_-1;O++)V=Zt(s[O],s[p],s[_],!0),V>w&&(S=O,w=V);w>h&&(c[S]=1,Bc(s,c,h,p,S),Bc(s,c,h,S,_))}function eo(s,c){for(var h=[s[0]],p=1,_=0,w=s.length;p<w;p++)$c(s[p],s[_])>c&&(h.push(s[p]),_=p);return _<w-1&&h.push(s[w-1]),h}var ud;function ld(s,c,h,p,_){var w=p?ud:fi(s,h),S=fi(c,h),O,V,G;for(ud=S;;){if(!(w|S))return[s,c];if(w&S)return!1;O=w||S,V=pa(s,c,O,h,_),G=fi(V,h),O===w?(s=V,w=G):(c=V,S=G)}}function pa(s,c,h,p,_){var w=c.x-s.x,S=c.y-s.y,O=p.min,V=p.max,G,ne;return h&8?(G=s.x+w*(V.y-s.y)/S,ne=V.y):h&4?(G=s.x+w*(O.y-s.y)/S,ne=O.y):h&2?(G=V.x,ne=s.y+S*(V.x-s.x)/w):h&1&&(G=O.x,ne=s.y+S*(O.x-s.x)/w),new Ie(G,ne,_)}function fi(s,c){var h=0;return s.x<c.min.x?h|=1:s.x>c.max.x&&(h|=2),s.y<c.min.y?h|=4:s.y>c.max.y&&(h|=8),h}function $c(s,c){var h=c.x-s.x,p=c.y-s.y;return h*h+p*p}function Zt(s,c,h,p){var _=c.x,w=c.y,S=h.x-_,O=h.y-w,V=S*S+O*O,G;return V>0&&(G=((s.x-_)*S+(s.y-w)*O)/V,G>1?(_=h.x,w=h.y):G>0&&(_+=S*G,w+=O*G)),S=s.x-_,O=s.y-w,p?S*S+O*O:new Ie(_,w)}function Mn(s){return!q(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function dd(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Mn(s)}function to(s,c){var h,p,_,w,S,O,V,G;if(!s||s.length===0)throw new Error("latlngs not passed");Mn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ne=Fe([0,0]),me=et(s),Oe=me.getNorthWest().distanceTo(me.getSouthWest())*me.getNorthEast().distanceTo(me.getNorthWest());Oe<1700&&(ne=Vc(s));var Pn=s.length,tn=[];for(h=0;h<Pn;h++){var br=Fe(s[h]);tn.push(c.project(Fe([br.lat-ne.lat,br.lng-ne.lng])))}for(h=0,p=0;h<Pn-1;h++)p+=tn[h].distanceTo(tn[h+1])/2;if(p===0)G=tn[0];else for(h=0,w=0;h<Pn-1;h++)if(S=tn[h],O=tn[h+1],_=S.distanceTo(O),w+=_,w>p){V=(w-p)/_,G=[O.x-V*(O.x-S.x),O.y-V*(O.y-S.y)];break}var Hn=c.unproject(fe(G));return Fe([Hn.lat+ne.lat,Hn.lng+ne.lng])}var l={__proto__:null,simplify:Uc,pointToSegmentDistance:cd,closestPointOnSegment:jc,clipSegment:ld,_getEdgeIntersection:pa,_getBitCode:fi,_sqClosestPointOnSegment:Zt,isFlat:Mn,_flat:dd,polylineCenter:to},m={project:function(s){return new Ie(s.lng,s.lat)},unproject:function(s){return new ve(s.y,s.x)},bounds:new ot([-180,-90],[180,90])},v={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ot([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var c=Math.PI/180,h=this.R,p=s.lat*c,_=this.R_MINOR/h,w=Math.sqrt(1-_*_),S=w*Math.sin(p),O=Math.tan(Math.PI/4-p/2)/Math.pow((1-S)/(1+S),w/2);return p=-h*Math.log(Math.max(O,1e-10)),new Ie(s.lng*c*h,p)},unproject:function(s){for(var c=180/Math.PI,h=this.R,p=this.R_MINOR/h,_=Math.sqrt(1-p*p),w=Math.exp(-s.y/h),S=Math.PI/2-2*Math.atan(w),O=0,V=.1,G;O<15&&Math.abs(V)>1e-7;O++)G=_*Math.sin(S),G=Math.pow((1-G)/(1+G),_/2),V=Math.PI/2-2*Math.atan(w*G)-S,S+=V;return new ve(S*c,s.x*c/h)}},I={__proto__:null,LonLat:m,Mercator:v,SphericalMercator:Ol},P=t({},si,{code:"EPSG:3395",projection:v,transformation:(function(){var s=.5/(Math.PI*v.R);return ai(s,.5,-s,.5)})()}),U=t({},si,{code:"EPSG:4326",projection:m,transformation:ai(1/180,1,-1/180,.5)}),Y=t({},Rn,{projection:m,transformation:ai(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,c){var h=c.lng-s.lng,p=c.lat-s.lat;return Math.sqrt(h*h+p*p)},infinite:!0});Rn.Earth=si,Rn.EPSG3395=P,Rn.EPSG3857=Uo,Rn.EPSG900913=Fl,Rn.EPSG4326=U,Rn.Simple=Y;var Ne=Or.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[a(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[a(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var c=s.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var h=this.getEvents();c.on(h,this),this.once("remove",function(){c.off(h,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});Ve.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var c=a(s);return this._layers[c]?this:(this._layers[c]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var c=a(s);return this._layers[c]?(this._loaded&&s.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return a(s)in this._layers},eachLayer:function(s,c){for(var h in this._layers)s.call(c,this._layers[h]);return this},_addLayers:function(s){s=s?q(s)?s:[s]:[];for(var c=0,h=s.length;c<h;c++)this.addLayer(s[c])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[a(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var c=a(s);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,c=-1/0,h=this._getZoomSpan();for(var p in this._zoomBoundLayers){var _=this._zoomBoundLayers[p].options;s=_.minZoom===void 0?s:Math.min(s,_.minZoom),c=_.maxZoom===void 0?c:Math.max(c,_.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=s===1/0?void 0:s,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var gt=Ne.extend({initialize:function(s,c){b(this,c),this._layers={};var h,p;if(s)for(h=0,p=s.length;h<p;h++)this.addLayer(s[h])},addLayer:function(s){var c=this.getLayerId(s);return this._layers[c]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var c=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(s){var c=typeof s=="number"?s:this.getLayerId(s);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var c=Array.prototype.slice.call(arguments,1),h,p;for(h in this._layers)p=this._layers[h],p[s]&&p[s].apply(p,c);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,c){for(var h in this._layers)s.call(c,this._layers[h]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return a(s)}}),ze=function(s,c){return new gt(s,c)},lt=gt.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),gt.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),gt.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new wn;for(var c in this._layers){var h=this._layers[c];s.extend(h.getBounds?h.getBounds():h.getLatLng())}return s}}),en=function(s,c){return new lt(s,c)},or=k.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){b(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,c){var h=this._getIconUrl(s);if(!h){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(h,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,c){var h=this.options,p=h[c+"Size"];typeof p=="number"&&(p=[p,p]);var _=fe(p),w=fe(c==="shadow"&&h.shadowAnchor||h.iconAnchor||_&&_.divideBy(2,!0));s.className="leaflet-marker-"+c+" "+(h.className||""),w&&(s.style.marginLeft=-w.x+"px",s.style.marginTop=-w.y+"px"),_&&(s.style.width=_.x+"px",s.style.height=_.y+"px")},_createImg:function(s,c){return c=c||document.createElement("img"),c.src=s,c},_getIconUrl:function(s){return ae.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function sr(s){return new or(s)}var pi=or.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof pi.imagePath!="string"&&(pi.imagePath=this._detectIconPath()),(this.options.imagePath||pi.imagePath)+or.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var c=function(h,p,_){var w=p.exec(h);return w&&w[_]};return s=c(s,/^url\((['"])?(.+)\1\)$/,2),s&&c(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=He("div","leaflet-default-icon-path",document.body),c=ia(s,"background-image")||ia(s,"backgroundImage");if(document.body.removeChild(s),c=this._stripUrl(c),c)return c;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),Hc=ir.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Ur(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ae(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&It(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var c=this._marker,h=c._map,p=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,w=Er(c._icon),S=h.getPixelBounds(),O=h.getPixelOrigin(),V=ln(S.min._subtract(O).add(_),S.max._subtract(O).subtract(_));if(!V.contains(w)){var G=fe((Math.max(V.max.x,w.x)-V.max.x)/(S.max.x-V.max.x)-(Math.min(V.min.x,w.x)-V.min.x)/(S.min.x-V.min.x),(Math.max(V.max.y,w.y)-V.max.y)/(S.max.y-V.max.y)-(Math.min(V.min.y,w.y)-V.min.y)/(S.min.y-V.min.y)).multiplyBy(p);h.panBy(G,{animate:!1}),this._draggable._newPos._add(G),this._draggable._startPos._add(G),ht(c._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=D(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(R(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,s)))},_onDrag:function(s){var c=this._marker,h=c._shadow,p=Er(c._icon),_=c._map.layerPointToLatLng(p);h&&ht(h,p),c._latlng=_,s.latlng=_,s.oldLatLng=this._oldLatLng,c.fire("move",s).fire("drag",s)},_onDragEnd:function(s){R(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),ip=Ne.extend({options:{icon:new pi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,c){b(this,c),this._latlng=Fe(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var c=this._latlng;return this._latlng=Fe(s),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=s.icon.createIcon(this._icon),p=!1;h!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(h.title=s.title),h.tagName==="IMG"&&(h.alt=s.alt||"")),Ae(h,c),s.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ye(h,"focus",this._panOnFocus,this);var _=s.icon.createShadow(this._shadow),w=!1;_!==this._shadow&&(this._removeShadow(),w=!0),_&&(Ae(_,c),_.alt=""),this._shadow=_,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&w&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&tt(this._icon,"focus",this._panOnFocus,this),ut(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ut(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&ht(this._icon,s),this._shadow&&ht(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(Ae(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Hc)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Hc(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&xn(this._icon,s),this._shadow&&xn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var c=this.options.icon.options,h=c.iconSize?fe(c.iconSize):fe(0,0),p=c.iconAnchor?fe(c.iconAnchor):fe(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:h.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function yL(s,c){return new ip(s,c)}var Qo=Ne.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return b(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),op=Qo.extend({options:{fill:!0,radius:10},initialize:function(s,c){b(this,c),this._latlng=Fe(s),this._radius=this.options.radius},setLatLng:function(s){var c=this._latlng;return this._latlng=Fe(s),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var c=s&&s.radius||this._radius;return Qo.prototype.setStyle.call(this,s),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,c=this._radiusY||s,h=this._clickTolerance(),p=[s+h,c+h];this._pxBounds=new ot(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function wL(s,c){return new op(s,c)}var vy=op.extend({initialize:function(s,c,h){if(typeof c=="number"&&(c=t({},h,{radius:c})),b(this,c),this._latlng=Fe(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new wn(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Qo.prototype.setStyle,_project:function(){var s=this._latlng.lng,c=this._latlng.lat,h=this._map,p=h.options.crs;if(p.distance===si.distance){var _=Math.PI/180,w=this._mRadius/si.R/_,S=h.project([c+w,s]),O=h.project([c-w,s]),V=S.add(O).divideBy(2),G=h.unproject(V).lat,ne=Math.acos((Math.cos(w*_)-Math.sin(c*_)*Math.sin(G*_))/(Math.cos(c*_)*Math.cos(G*_)))/_;(isNaN(ne)||ne===0)&&(ne=w/Math.cos(Math.PI/180*c)),this._point=V.subtract(h.getPixelOrigin()),this._radius=isNaN(ne)?0:V.x-h.project([G,s-ne]).x,this._radiusY=V.y-S.y}else{var me=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(me).x}this._updateBounds()}});function EL(s,c,h){return new vy(s,c,h)}var no=Qo.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,c){b(this,c),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var c=1/0,h=null,p=Zt,_,w,S=0,O=this._parts.length;S<O;S++)for(var V=this._parts[S],G=1,ne=V.length;G<ne;G++){_=V[G-1],w=V[G];var me=p(s,_,w,!0);me<c&&(c=me,h=p(s,_,w))}return h&&(h.distance=Math.sqrt(c)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return to(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,c){return c=c||this._defaultShape(),s=Fe(s),c.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new wn,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Mn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var c=[],h=Mn(s),p=0,_=s.length;p<_;p++)h?(c[p]=Fe(s[p]),this._bounds.extend(c[p])):c[p]=this._convertLatLngs(s[p]);return c},_project:function(){var s=new ot;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),c=new Ie(s,s);this._rawPxBounds&&(this._pxBounds=new ot([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(s,c,h){var p=s[0]instanceof ve,_=s.length,w,S;if(p){for(S=[],w=0;w<_;w++)S[w]=this._map.latLngToLayerPoint(s[w]),h.extend(S[w]);c.push(S)}else for(w=0;w<_;w++)this._projectLatlngs(s[w],c,h)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,h,p,_,w,S,O,V;for(h=0,_=0,w=this._rings.length;h<w;h++)for(V=this._rings[h],p=0,S=V.length;p<S-1;p++)O=ld(V[p],V[p+1],s,p,!0),O&&(c[_]=c[_]||[],c[_].push(O[0]),(O[1]!==V[p+1]||p===S-2)&&(c[_].push(O[1]),_++))}},_simplifyPoints:function(){for(var s=this._parts,c=this.options.smoothFactor,h=0,p=s.length;h<p;h++)s[h]=Uc(s[h],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,c){var h,p,_,w,S,O,V=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(h=0,w=this._parts.length;h<w;h++)for(O=this._parts[h],p=0,S=O.length,_=S-1;p<S;_=p++)if(!(!c&&p===0)&&cd(s,O[_],O[p])<=V)return!0;return!1}});function IL(s,c){return new no(s,c)}no._flat=dd;var zc=no.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return sd(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var c=no.prototype._convertLatLngs.call(this,s),h=c.length;return h>=2&&c[0]instanceof ve&&c[0].equals(c[h-1])&&c.pop(),c},_setLatLngs:function(s){no.prototype._setLatLngs.call(this,s),Mn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Mn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,c=this.options.weight,h=new Ie(c,c);if(s=new ot(s.min.subtract(h),s.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,_=this._rings.length,w;p<_;p++)w=Zo(this._rings[p],s,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var c=!1,h,p,_,w,S,O,V,G;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(w=0,V=this._parts.length;w<V;w++)for(h=this._parts[w],S=0,G=h.length,O=G-1;S<G;O=S++)p=h[S],_=h[O],p.y>s.y!=_.y>s.y&&s.x<(_.x-p.x)*(s.y-p.y)/(_.y-p.y)+p.x&&(c=!c);return c||no.prototype._containsPoint.call(this,s,!0)}});function bL(s,c){return new zc(s,c)}var ro=lt.extend({initialize:function(s,c){b(this,c),this._layers={},s&&this.addData(s)},addData:function(s){var c=q(s)?s:s.features,h,p,_;if(c){for(h=0,p=c.length;h<p;h++)_=c[h],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var w=this.options;if(w.filter&&!w.filter(s))return this;var S=sp(s,w);return S?(S.feature=up(s),S.defaultOptions=S.options,this.resetStyle(S),w.onEachFeature&&w.onEachFeature(s,S),this.addLayer(S)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=t({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(c){this._setLayerStyle(c,s)},this)},_setLayerStyle:function(s,c){s.setStyle&&(typeof c=="function"&&(c=c(s.feature)),s.setStyle(c))}});function sp(s,c){var h=s.type==="Feature"?s.geometry:s,p=h?h.coordinates:null,_=[],w=c&&c.pointToLayer,S=c&&c.coordsToLatLng||yy,O,V,G,ne;if(!p&&!h)return null;switch(h.type){case"Point":return O=S(p),hD(w,s,O,c);case"MultiPoint":for(G=0,ne=p.length;G<ne;G++)O=S(p[G]),_.push(hD(w,s,O,c));return new lt(_);case"LineString":case"MultiLineString":return V=ap(p,h.type==="LineString"?0:1,S),new no(V,c);case"Polygon":case"MultiPolygon":return V=ap(p,h.type==="Polygon"?1:2,S),new zc(V,c);case"GeometryCollection":for(G=0,ne=h.geometries.length;G<ne;G++){var me=sp({geometry:h.geometries[G],type:"Feature",properties:s.properties},c);me&&_.push(me)}return new lt(_);case"FeatureCollection":for(G=0,ne=h.features.length;G<ne;G++){var Oe=sp(h.features[G],c);Oe&&_.push(Oe)}return new lt(_);default:throw new Error("Invalid GeoJSON object.")}}function hD(s,c,h,p){return s?s(c,h):new ip(h,p&&p.markersInheritOptions&&p)}function yy(s){return new ve(s[1],s[0],s[2])}function ap(s,c,h){for(var p=[],_=0,w=s.length,S;_<w;_++)S=c?ap(s[_],c-1,h):(h||yy)(s[_]),p.push(S);return p}function wy(s,c){return s=Fe(s),s.alt!==void 0?[g(s.lng,c),g(s.lat,c),g(s.alt,c)]:[g(s.lng,c),g(s.lat,c)]}function cp(s,c,h,p){for(var _=[],w=0,S=s.length;w<S;w++)_.push(c?cp(s[w],Mn(s[w])?0:c-1,h,p):wy(s[w],p));return!c&&h&&_.length>0&&_.push(_[0].slice()),_}function qc(s,c){return s.feature?t({},s.feature,{geometry:c}):up(c)}function up(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Ey={toGeoJSON:function(s){return qc(this,{type:"Point",coordinates:wy(this.getLatLng(),s)})}};ip.include(Ey),vy.include(Ey),op.include(Ey),no.include({toGeoJSON:function(s){var c=!Mn(this._latlngs),h=cp(this._latlngs,c?1:0,!1,s);return qc(this,{type:(c?"Multi":"")+"LineString",coordinates:h})}}),zc.include({toGeoJSON:function(s){var c=!Mn(this._latlngs),h=c&&!Mn(this._latlngs[0]),p=cp(this._latlngs,h?2:c?1:0,!0,s);return c||(p=[p]),qc(this,{type:(h?"Multi":"")+"Polygon",coordinates:p})}}),gt.include({toMultiPoint:function(s){var c=[];return this.eachLayer(function(h){c.push(h.toGeoJSON(s).geometry.coordinates)}),qc(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(s){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(s);var h=c==="GeometryCollection",p=[];return this.eachLayer(function(_){if(_.toGeoJSON){var w=_.toGeoJSON(s);if(h)p.push(w.geometry);else{var S=up(w);S.type==="FeatureCollection"?p.push.apply(p,S.features):p.push(S)}}}),h?qc(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function fD(s,c){return new ro(s,c)}var TL=fD,lp=Ne.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,c,h){this._url=s,this._bounds=et(c),b(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ae(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ut(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&li(this._image),this},bringToBack:function(){return this._map&&di(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=et(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",c=this._image=s?this._url:He("img");if(Ae(c,"leaflet-image-layer"),this._zoomAnimated&&Ae(c,"leaflet-zoom-animated"),this.options.className&&Ae(c,this.options.className),c.onselectstart=f,c.onmousemove=f,c.onload=i(this.fire,this,"load"),c.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(s){var c=this._map.getZoomScale(s.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;hn(this._image,h,c)},_reset:function(){var s=this._image,c=new ot(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=c.getSize();ht(s,c.min),s.style.width=h.x+"px",s.style.height=h.y+"px"},_updateOpacity:function(){xn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),CL=function(s,c,h){return new lp(s,c,h)},pD=lp.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",c=this._image=s?this._url:He("video");if(Ae(c,"leaflet-image-layer"),this._zoomAnimated&&Ae(c,"leaflet-zoom-animated"),this.options.className&&Ae(c,this.options.className),c.onselectstart=f,c.onmousemove=f,c.onloadeddata=i(this.fire,this,"load"),s){for(var h=c.getElementsByTagName("source"),p=[],_=0;_<h.length;_++)p.push(h[_].src);this._url=h.length>0?p:[c.src];return}q(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var S=He("source");S.src=this._url[w],c.appendChild(S)}}});function DL(s,c,h){return new pD(s,c,h)}var mD=lp.extend({_initImage:function(){var s=this._image=this._url;Ae(s,"leaflet-image-layer"),this._zoomAnimated&&Ae(s,"leaflet-zoom-animated"),this.options.className&&Ae(s,this.options.className),s.onselectstart=f,s.onmousemove=f}});function SL(s,c,h){return new mD(s,c,h)}var mi=Ne.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,c){s&&(s instanceof ve||q(s))?(this._latlng=Fe(s),b(this,c)):(b(this,s),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&xn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&xn(this._container,1),this.bringToFront(),this.options.interactive&&(Ae(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(xn(this._container,0),this._removeTimeout=setTimeout(i(ut,void 0,this._container),200)):ut(this._container),this.options.interactive&&(It(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=Fe(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&li(this._container),this},bringToBack:function(){return this._map&&di(this._container),this},_prepareOpen:function(s){var c=this._source;if(!c._map)return!1;if(c instanceof lt){c=null;var h=this._source._layers;for(var p in h)if(h[p]._map){c=h[p];break}if(!c)return!1;this._source=c}if(!s)if(c.getCenter)s=c.getCenter();else if(c.getLatLng)s=c.getLatLng();else if(c.getBounds)s=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")s.innerHTML=c;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),c=fe(this.options.offset),h=this._getAnchor();this._zoomAnimated?ht(this._container,s.add(h)):c=c.add(s).add(h);var p=this._containerBottom=-c.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=p+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});Ve.include({_initOverlay:function(s,c,h,p){var _=c;return _ instanceof s||(_=new s(p).setContent(c)),h&&_.setLatLng(h),_}}),Ne.include({_initOverlay:function(s,c,h,p){var _=h;return _ instanceof s?(b(_,p),_._source=this):(_=c&&!p?c:new s(p,this),_.setContent(h)),_}});var dp=mi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,mi.prototype.openOn.call(this,s)},onAdd:function(s){mi.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Qo||this._source.on("preclick",En))},onRemove:function(s){mi.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Qo||this._source.off("preclick",En))},getEvents:function(){var s=mi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",c=this._container=He("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=He("div",s+"-content-wrapper",c);if(this._contentNode=He("div",s+"-content",h),ca(c),rd(this._contentNode),ye(c,"contextmenu",En),this._tipContainer=He("div",s+"-tip-container",c),this._tip=He("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=He("a",s+"-close-button",c);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',ye(p,"click",function(_){bt(_),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,c=s.style;c.width="",c.whiteSpace="nowrap";var h=s.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),c.width=h+1+"px",c.whiteSpace="",c.height="";var p=s.offsetHeight,_=this.options.maxHeight,w="leaflet-popup-scrolled";_&&p>_?(c.height=_+"px",Ae(s,w)):It(s,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),h=this._getAnchor();ht(this._container,c.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,c=parseInt(ia(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+c,p=this._containerWidth,_=new Ie(this._containerLeft,-h-this._containerBottom);_._add(Er(this._container));var w=s.layerPointToContainerPoint(_),S=fe(this.options.autoPanPadding),O=fe(this.options.autoPanPaddingTopLeft||S),V=fe(this.options.autoPanPaddingBottomRight||S),G=s.getSize(),ne=0,me=0;w.x+p+V.x>G.x&&(ne=w.x+p-G.x+V.x),w.x-ne-O.x<0&&(ne=w.x-O.x),w.y+h+V.y>G.y&&(me=w.y+h-G.y+V.y),w.y-me-O.y<0&&(me=w.y-O.y),(ne||me)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([ne,me]))}},_getAnchor:function(){return fe(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),AL=function(s,c){return new dp(s,c)};Ve.mergeOptions({closePopupOnClick:!0}),Ve.include({openPopup:function(s,c,h){return this._initOverlay(dp,s,c,h).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Ne.include({bindPopup:function(s,c){return this._popup=this._initOverlay(dp,this._popup,s,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof lt||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){Ir(s);var c=s.layer||s.target;if(this._popup._source===c&&!(c instanceof Qo)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=c,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var hp=mi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){mi.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){mi.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=mi.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",c=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=He("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var c,h,p=this._map,_=this._container,w=p.latLngToContainerPoint(p.getCenter()),S=p.layerPointToContainerPoint(s),O=this.options.direction,V=_.offsetWidth,G=_.offsetHeight,ne=fe(this.options.offset),me=this._getAnchor();O==="top"?(c=V/2,h=G):O==="bottom"?(c=V/2,h=0):O==="center"?(c=V/2,h=G/2):O==="right"?(c=0,h=G/2):O==="left"?(c=V,h=G/2):S.x<w.x?(O="right",c=0,h=G/2):(O="left",c=V+(ne.x+me.x)*2,h=G/2),s=s.subtract(fe(c,h,!0)).add(ne).add(me),It(_,"leaflet-tooltip-right"),It(_,"leaflet-tooltip-left"),It(_,"leaflet-tooltip-top"),It(_,"leaflet-tooltip-bottom"),Ae(_,"leaflet-tooltip-"+O),ht(_,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&xn(this._container,s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(c)},_getAnchor:function(){return fe(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),RL=function(s,c){return new hp(s,c)};Ve.include({openTooltip:function(s,c,h){return this._initOverlay(hp,s,c,h).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Ne.include({bindTooltip:function(s,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(hp,this._tooltip,s,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var c=s?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[c](h),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof lt||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&(ye(c,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),ye(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var c=s.latlng,h,p;this._tooltip.options.sticky&&s.originalEvent&&(h=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(h),c=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(c)}});var gD=or.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var c=s&&s.tagName==="DIV"?s:document.createElement("div"),h=this.options;if(h.html instanceof Element?(oa(c),c.appendChild(h.html)):c.innerHTML=h.html!==!1?h.html:"",h.bgPos){var p=fe(h.bgPos);c.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function xL(s){return new gD(s)}or.Default=pi;var hd=Ne.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ae.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){b(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),ut(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(li(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(di(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof Ie?s:new Ie(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var c=this.getPane().children,h=-s(-1/0,1/0),p=0,_=c.length,w;p<_;p++)w=c[p].style.zIndex,c[p]!==this._container&&w&&(h=s(h,+w));isFinite(h)&&(this.options.zIndex=h+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ae.ielt9){xn(this._container,this.options.opacity);var s=+new Date,c=!1,h=!1;for(var p in this._tiles){var _=this._tiles[p];if(!(!_.current||!_.loaded)){var w=Math.min(1,(s-_.loaded)/200);xn(_.el,w),w<1?c=!0:(_.active?h=!0:this._onOpaqueTile(_),_.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),c&&(R(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=He("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,c=this.options.maxZoom;if(s!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===s?(this._levels[h].el.style.zIndex=c-Math.abs(s-h),this._onUpdateLevel(h)):(ut(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var p=this._levels[s],_=this._map;return p||(p=this._levels[s]={},p.el=He("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=c,p.origin=_.project(_.unproject(_.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,_.getCenter(),_.getZoom()),f(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var s,c,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)c=this._tiles[s],c.retain=c.current;for(s in this._tiles)if(c=this._tiles[s],c.current&&!c.active){var p=c.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var c in this._tiles)this._tiles[c].coords.z===s&&this._removeTile(c)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)ut(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,c,h,p){var _=Math.floor(s/2),w=Math.floor(c/2),S=h-1,O=new Ie(+_,+w);O.z=+S;var V=this._tileCoordsToKey(O),G=this._tiles[V];return G&&G.active?(G.retain=!0,!0):(G&&G.loaded&&(G.retain=!0),S>p?this._retainParent(_,w,S,p):!1)},_retainChildren:function(s,c,h,p){for(var _=2*s;_<2*s+2;_++)for(var w=2*c;w<2*c+2;w++){var S=new Ie(_,w);S.z=h+1;var O=this._tileCoordsToKey(S),V=this._tiles[O];if(V&&V.active){V.retain=!0;continue}else V&&V.loaded&&(V.retain=!0);h+1<p&&this._retainChildren(_,w,h+1,p)}},_resetView:function(s){var c=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var c=this.options;return c.minNativeZoom!==void 0&&s<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<s?c.maxNativeZoom:s},_setView:function(s,c,h,p){var _=Math.round(c);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var w=this.options.updateWhenZooming&&_!==this._tileZoom;(!p||w)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(s),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(s,c)},_setZoomTransforms:function(s,c){for(var h in this._levels)this._setZoomTransform(this._levels[h],s,c)},_setZoomTransform:function(s,c,h){var p=this._map.getZoomScale(h,s.zoom),_=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(c,h)).round();ae.any3d?hn(s.el,_,p):ht(s.el,_)},_resetGrid:function(){var s=this._map,c=s.options.crs,h=this._tileSize=this.getTileSize(),p=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,c.wrapLng[0]],p).x/h.x),Math.ceil(s.project([0,c.wrapLng[1]],p).x/h.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([c.wrapLat[0],0],p).y/h.x),Math.ceil(s.project([c.wrapLat[1],0],p).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var c=this._map,h=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),p=c.getZoomScale(h,this._tileZoom),_=c.project(s,this._tileZoom).floor(),w=c.getSize().divideBy(p*2);return new ot(_.subtract(w),_.add(w))},_update:function(s){var c=this._map;if(c){var h=this._clampZoom(c.getZoom());if(s===void 0&&(s=c.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),_=this._pxBoundsToTileRange(p),w=_.getCenter(),S=[],O=this.options.keepBuffer,V=new ot(_.getBottomLeft().subtract([O,-O]),_.getTopRight().add([O,-O]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var G in this._tiles){var ne=this._tiles[G].coords;(ne.z!==this._tileZoom||!V.contains(new Ie(ne.x,ne.y)))&&(this._tiles[G].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(s,h);return}for(var me=_.min.y;me<=_.max.y;me++)for(var Oe=_.min.x;Oe<=_.max.x;Oe++){var Pn=new Ie(Oe,me);if(Pn.z=this._tileZoom,!!this._isValidTile(Pn)){var tn=this._tiles[this._tileCoordsToKey(Pn)];tn?tn.current=!0:S.push(Pn)}}if(S.sort(function(Hn,Gc){return Hn.distanceTo(w)-Gc.distanceTo(w)}),S.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var br=document.createDocumentFragment();for(Oe=0;Oe<S.length;Oe++)this._addTile(S[Oe],br);this._level.el.appendChild(br)}}}},_isValidTile:function(s){var c=this._map.options.crs;if(!c.infinite){var h=this._globalTileRange;if(!c.wrapLng&&(s.x<h.min.x||s.x>h.max.x)||!c.wrapLat&&(s.y<h.min.y||s.y>h.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return et(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var c=this._map,h=this.getTileSize(),p=s.scaleBy(h),_=p.add(h),w=c.unproject(p,s.z),S=c.unproject(_,s.z);return[w,S]},_tileCoordsToBounds:function(s){var c=this._tileCoordsToNwSe(s),h=new wn(c[0],c[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var c=s.split(":"),h=new Ie(+c[0],+c[1]);return h.z=+c[2],h},_removeTile:function(s){var c=this._tiles[s];c&&(ut(c.el),delete this._tiles[s],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){Ae(s,"leaflet-tile");var c=this.getTileSize();s.style.width=c.x+"px",s.style.height=c.y+"px",s.onselectstart=f,s.onmousemove=f,ae.ielt9&&this.options.opacity<1&&xn(s,this.options.opacity)},_addTile:function(s,c){var h=this._getTilePos(s),p=this._tileCoordsToKey(s),_=this.createTile(this._wrapCoords(s),i(this._tileReady,this,s));this._initTile(_),this.createTile.length<2&&D(i(this._tileReady,this,s,null,_)),ht(_,h),this._tiles[p]={el:_,coords:s,current:!0},c.appendChild(_),this.fire("tileloadstart",{tile:_,coords:s})},_tileReady:function(s,c,h){c&&this.fire("tileerror",{error:c,tile:h,coords:s});var p=this._tileCoordsToKey(s);h=this._tiles[p],h&&(h.loaded=+new Date,this._map._fadeAnimated?(xn(h.el,0),R(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),c||(Ae(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ae.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var c=new Ie(this._wrapX?d(s.x,this._wrapX):s.x,this._wrapY?d(s.y,this._wrapY):s.y);return c.z=s.z,c},_pxBoundsToTileRange:function(s){var c=this.getTileSize();return new ot(s.min.unscaleBy(c).floor(),s.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function ML(s){return new hd(s)}var Wc=hd.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,c){this._url=s,c=b(this,c),c.detectRetina&&ae.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,c){return this._url===s&&c===void 0&&(c=!0),this._url=s,c||this.redraw(),this},createTile:function(s,c){var h=document.createElement("img");return ye(h,"load",i(this._tileOnLoad,this,c,h)),ye(h,"error",i(this._tileOnError,this,c,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(s),h},getTileUrl:function(s){var c={r:ae.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-s.y;this.options.tms&&(c.y=h),c["-y"]=h}return F(this._url,t(c,this.options))},_tileOnLoad:function(s,c){ae.ielt9?setTimeout(i(s,this,null,c),0):s(null,c)},_tileOnError:function(s,c,h){var p=this.options.errorTileUrl;p&&c.getAttribute("src")!==p&&(c.src=p),s(h,c)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,c=this.options.maxZoom,h=this.options.zoomReverse,p=this.options.zoomOffset;return h&&(s=c-s),s+p},_getSubdomain:function(s){var c=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var s,c;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(c=this._tiles[s].el,c.onload=f,c.onerror=f,!c.complete)){c.src=se;var h=this._tiles[s].coords;ut(c),delete this._tiles[s],this.fire("tileabort",{tile:c,coords:h})}},_removeTile:function(s){var c=this._tiles[s];if(c)return c.el.setAttribute("src",se),hd.prototype._removeTile.call(this,s)},_tileReady:function(s,c,h){if(!(!this._map||h&&h.getAttribute("src")===se))return hd.prototype._tileReady.call(this,s,c,h)}});function _D(s,c){return new Wc(s,c)}var vD=Wc.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,c){this._url=s;var h=t({},this.defaultWmsParams);for(var p in c)p in this.options||(h[p]=c[p]);c=b(this,c);var _=c.detectRetina&&ae.retina?2:1,w=this.getTileSize();h.width=w.x*_,h.height=w.y*_,this.wmsParams=h},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Wc.prototype.onAdd.call(this,s)},getTileUrl:function(s){var c=this._tileCoordsToNwSe(s),h=this._crs,p=ln(h.project(c[0]),h.project(c[1])),_=p.min,w=p.max,S=(this._wmsVersion>=1.3&&this._crs===U?[_.y,_.x,w.y,w.x]:[_.x,_.y,w.x,w.y]).join(","),O=Wc.prototype.getTileUrl.call(this,s);return O+N(this.wmsParams,O,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+S},setParams:function(s,c){return t(this.wmsParams,s),c||this.redraw(),this}});function PL(s,c){return new vD(s,c)}Wc.WMS=vD,_D.wms=PL;var io=Ne.extend({options:{padding:.1},initialize:function(s){b(this,s),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ae(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,c){var h=this._map.getZoomScale(c,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,c),w=p.multiplyBy(-h).add(_).subtract(this._map._getNewPixelOrigin(s,c));ae.any3d?hn(this._container,w,h):ht(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,c=this._map.getSize(),h=this._map.containerPointToLayerPoint(c.multiplyBy(-s)).round();this._bounds=new ot(h,h.add(c.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),yD=io.extend({options:{tolerance:0},getEvents:function(){var s=io.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){io.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");ye(s,"mousemove",this._onMouseMove,this),ye(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ye(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){R(this._redrawRequest),delete this._ctx,ut(this._container),tt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var c in this._layers)s=this._layers[c],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){io.prototype._update.call(this);var s=this._bounds,c=this._container,h=s.getSize(),p=ae.retina?2:1;ht(c,s.min),c.width=p*h.x,c.height=p*h.y,c.style.width=h.x+"px",c.style.height=h.y+"px",ae.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){io.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[a(s)]=s;var c=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var c=s._order,h=c.next,p=c.prev;h?h.prev=p:this._drawLast=p,p?p.next=h:this._drawFirst=h,delete s._order,delete this._layers[a(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var c=s.options.dashArray.split(/[, ]+/),h=[],p,_;for(_=0;_<c.length;_++){if(p=Number(c[_]),isNaN(p))return;h.push(p)}s.options._dashArray=h}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var c=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ot,this._redrawBounds.extend(s._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(s._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var c=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,c=this._redrawBounds;if(this._ctx.save(),c){var h=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!c||s._pxBounds&&s._pxBounds.intersects(c))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,c){if(this._drawing){var h,p,_,w,S=s._parts,O=S.length,V=this._ctx;if(O){for(V.beginPath(),h=0;h<O;h++){for(p=0,_=S[h].length;p<_;p++)w=S[h][p],V[p?"lineTo":"moveTo"](w.x,w.y);c&&V.closePath()}this._fillStroke(V,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var c=s._point,h=this._ctx,p=Math.max(Math.round(s._radius),1),_=(Math.max(Math.round(s._radiusY),1)||p)/p;_!==1&&(h.save(),h.scale(1,_)),h.beginPath(),h.arc(c.x,c.y/_,p,0,Math.PI*2,!1),_!==1&&h.restore(),this._fillStroke(h,s)}},_fillStroke:function(s,c){var h=c.options;h.fill&&(s.globalAlpha=h.fillOpacity,s.fillStyle=h.fillColor||h.color,s.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(s.setLineDash&&s.setLineDash(c.options&&c.options._dashArray||[]),s.globalAlpha=h.opacity,s.lineWidth=h.weight,s.strokeStyle=h.color,s.lineCap=h.lineCap,s.lineJoin=h.lineJoin,s.stroke())},_onClick:function(s){for(var c=this._map.mouseEventToLayerPoint(s),h,p,_=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(c)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(p=h);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,c)}},_handleMouseOut:function(s){var c=this._hoveredLayer;c&&(It(this._container,"leaflet-interactive"),this._fireEvent([c],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,c){if(!this._mouseHoverThrottled){for(var h,p,_=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(c)&&(p=h);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(Ae(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(i(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,c,h){this._map._fireDOMEvent(c,h||c.type,s)},_bringToFront:function(s){var c=s._order;if(c){var h=c.next,p=c.prev;if(h)h.prev=p;else return;p?p.next=h:h&&(this._drawFirst=h),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(s)}},_bringToBack:function(s){var c=s._order;if(c){var h=c.next,p=c.prev;if(p)p.next=h;else return;h?h.prev=p:p&&(this._drawLast=p),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(s)}}});function wD(s){return ae.canvas?new yD(s):null}var fd=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),NL={_initContainer:function(){this._container=He("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(io.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var c=s._container=fd("shape");Ae(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",s._path=fd("path"),c.appendChild(s._path),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){var c=s._container;this._container.appendChild(c),s.options.interactive&&s.addInteractiveTarget(c)},_removePath:function(s){var c=s._container;ut(c),s.removeInteractiveTarget(c),delete this._layers[a(s)]},_updateStyle:function(s){var c=s._stroke,h=s._fill,p=s.options,_=s._container;_.stroked=!!p.stroke,_.filled=!!p.fill,p.stroke?(c||(c=s._stroke=fd("stroke")),_.appendChild(c),c.weight=p.weight+"px",c.color=p.color,c.opacity=p.opacity,p.dashArray?c.dashStyle=q(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=p.lineCap.replace("butt","flat"),c.joinstyle=p.lineJoin):c&&(_.removeChild(c),s._stroke=null),p.fill?(h||(h=s._fill=fd("fill")),_.appendChild(h),h.color=p.fillColor||p.color,h.opacity=p.fillOpacity):h&&(_.removeChild(h),s._fill=null)},_updateCircle:function(s){var c=s._point.round(),h=Math.round(s._radius),p=Math.round(s._radiusY||h);this._setPath(s,s._empty()?"M0 0":"AL "+c.x+","+c.y+" "+h+","+p+" 0,"+65535*360)},_setPath:function(s,c){s._path.v=c},_bringToFront:function(s){li(s._container)},_bringToBack:function(s){di(s._container)}},fp=ae.vml?fd:Tc,pd=io.extend({_initContainer:function(){this._container=fp("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=fp("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ut(this._container),tt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){io.prototype._update.call(this);var s=this._bounds,c=s.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,h.setAttribute("width",c.x),h.setAttribute("height",c.y)),ht(h,s.min),h.setAttribute("viewBox",[s.min.x,s.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(s){var c=s._path=fp("path");s.options.className&&Ae(c,s.options.className),s.options.interactive&&Ae(c,"leaflet-interactive"),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){ut(s._path),s.removeInteractiveTarget(s._path),delete this._layers[a(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var c=s._path,h=s.options;c&&(h.stroke?(c.setAttribute("stroke",h.color),c.setAttribute("stroke-opacity",h.opacity),c.setAttribute("stroke-width",h.weight),c.setAttribute("stroke-linecap",h.lineCap),c.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?c.setAttribute("stroke-dasharray",h.dashArray):c.removeAttribute("stroke-dasharray"),h.dashOffset?c.setAttribute("stroke-dashoffset",h.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),h.fill?(c.setAttribute("fill",h.fillColor||h.color),c.setAttribute("fill-opacity",h.fillOpacity),c.setAttribute("fill-rule",h.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(s,c){this._setPath(s,Cc(s._parts,c))},_updateCircle:function(s){var c=s._point,h=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||h,_="a"+h+","+p+" 0 1,0 ",w=s._empty()?"M0 0":"M"+(c.x-h)+","+c.y+_+h*2+",0 "+_+-h*2+",0 ";this._setPath(s,w)},_setPath:function(s,c){s._path.setAttribute("d",c)},_bringToFront:function(s){li(s._path)},_bringToBack:function(s){di(s._path)}});ae.vml&&pd.include(NL);function ED(s){return ae.svg||ae.vml?new pd(s):null}Ve.include({getRenderer:function(s){var c=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var c=this._paneRenderers[s];return c===void 0&&(c=this._createRenderer({pane:s}),this._paneRenderers[s]=c),c},_createRenderer:function(s){return this.options.preferCanvas&&wD(s)||ED(s)}});var ID=zc.extend({initialize:function(s,c){zc.prototype.initialize.call(this,this._boundsToLatLngs(s),c)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=et(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function kL(s,c){return new ID(s,c)}pd.create=fp,pd.pointsToPath=Cc,ro.geometryToLayer=sp,ro.coordsToLatLng=yy,ro.coordsToLatLngs=ap,ro.latLngToCoords=wy,ro.latLngsToCoords=cp,ro.getFeature=qc,ro.asFeature=up,Ve.mergeOptions({boxZoom:!0});var bD=ir.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){ye(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){tt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ut(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),qo(),Yi(),this._startPoint=this._map.mouseEventToContainerPoint(s),ye(document,{contextmenu:Ir,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=He("div","leaflet-zoom-box",this._container),Ae(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var c=new ot(this._point,this._startPoint),h=c.getSize();ht(this._box,c.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(ut(this._box),It(this._container,"leaflet-crosshair")),Ze(),Yl(),tt(document,{contextmenu:Ir,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var c=new wn(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ve.addInitHook("addHandler","boxZoom",bD),Ve.mergeOptions({doubleClickZoom:!0});var TD=ir.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var c=this._map,h=c.getZoom(),p=c.options.zoomDelta,_=s.originalEvent.shiftKey?h-p:h+p;c.options.doubleClickZoom==="center"?c.setZoom(_):c.setZoomAround(s.containerPoint,_)}});Ve.addInitHook("addHandler","doubleClickZoom",TD),Ve.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var CD=ir.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Ur(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}Ae(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){It(this._map._container,"leaflet-grab"),It(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=et(this._map.options.maxBounds);this._offsetLimit=ln(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var c=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(c),this._prunePositions(c)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,c){return s-(s-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;s.x<c.min.x&&(s.x=this._viscousLimit(s.x,c.min.x)),s.y<c.min.y&&(s.y=this._viscousLimit(s.y,c.min.y)),s.x>c.max.x&&(s.x=this._viscousLimit(s.x,c.max.x)),s.y>c.max.y&&(s.y=this._viscousLimit(s.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,c=Math.round(s/2),h=this._initialWorldOffset,p=this._draggable._newPos.x,_=(p-c+h)%s+c-h,w=(p+c+h)%s-c-h,S=Math.abs(_+h)<Math.abs(w+h)?_:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=S},_onDragEnd:function(s){var c=this._map,h=c.options,p=!h.inertia||s.noInertia||this._times.length<2;if(c.fire("dragend",s),p)c.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,S=h.easeLinearity,O=_.multiplyBy(S/w),V=O.distanceTo([0,0]),G=Math.min(h.inertiaMaxSpeed,V),ne=O.multiplyBy(G/V),me=G/(h.inertiaDeceleration*S),Oe=ne.multiplyBy(-me/2).round();!Oe.x&&!Oe.y?c.fire("moveend"):(Oe=c._limitOffset(Oe,c.options.maxBounds),D(function(){c.panBy(Oe,{duration:me,easeLinearity:S,noMoveStart:!0,animate:!0})}))}}});Ve.addInitHook("addHandler","dragging",CD),Ve.mergeOptions({keyboard:!0,keyboardPanDelta:80});var DD=ir.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),ye(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),tt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,c=document.documentElement,h=s.scrollTop||c.scrollTop,p=s.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(p,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var c=this._panKeys={},h=this.keyCodes,p,_;for(p=0,_=h.left.length;p<_;p++)c[h.left[p]]=[-1*s,0];for(p=0,_=h.right.length;p<_;p++)c[h.right[p]]=[s,0];for(p=0,_=h.down.length;p<_;p++)c[h.down[p]]=[0,s];for(p=0,_=h.up.length;p<_;p++)c[h.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var c=this._zoomKeys={},h=this.keyCodes,p,_;for(p=0,_=h.zoomIn.length;p<_;p++)c[h.zoomIn[p]]=s;for(p=0,_=h.zoomOut.length;p<_;p++)c[h.zoomOut[p]]=-s},_addHooks:function(){ye(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){tt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var c=s.keyCode,h=this._map,p;if(c in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(p=this._panKeys[c],s.shiftKey&&(p=fe(p).multiplyBy(3)),h.options.maxBounds&&(p=h._limitOffset(fe(p),h.options.maxBounds)),h.options.worldCopyJump){var _=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(p)));h.panTo(_)}else h.panBy(p)}else if(c in this._zoomKeys)h.setZoom(h.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;Ir(s)}}});Ve.addInitHook("addHandler","keyboard",DD),Ve.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var SD=ir.extend({addHooks:function(){ye(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){tt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var c=od(s),h=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),p),Ir(s)},_performZoom:function(){var s=this._map,c=s.getZoom(),h=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,w=h?Math.ceil(_/h)*h:_,S=s._limitZoom(c+(this._delta>0?w:-w))-c;this._delta=0,this._startTime=null,S&&(s.options.scrollWheelZoom==="center"?s.setZoom(c+S):s.setZoomAround(this._lastMousePos,c+S))}});Ve.addInitHook("addHandler","scrollWheelZoom",SD);var OL=600;Ve.mergeOptions({tapHold:ae.touchNative&&ae.safari&&ae.mobile,tapTolerance:15});var AD=ir.extend({addHooks:function(){ye(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){tt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var c=s.touches[0];this._startPos=this._newPos=new Ie(c.clientX,c.clientY),this._holdTimeout=setTimeout(i(function(){this._cancel(),this._isTapValid()&&(ye(document,"touchend",bt),ye(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),OL),ye(document,"touchend touchcancel contextmenu",this._cancel,this),ye(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){tt(document,"touchend",bt),tt(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),tt(document,"touchend touchcancel contextmenu",this._cancel,this),tt(document,"touchmove",this._onMove,this)},_onMove:function(s){var c=s.touches[0];this._newPos=new Ie(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,c){var h=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});h._simulated=!0,c.target.dispatchEvent(h)}});Ve.addInitHook("addHandler","tapHold",AD),Ve.mergeOptions({touchZoom:ae.touch,bounceAtZoomLimits:!0});var RD=ir.extend({addHooks:function(){Ae(this._map._container,"leaflet-touch-zoom"),ye(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){It(this._map._container,"leaflet-touch-zoom"),tt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var c=this._map;if(!(!s.touches||s.touches.length!==2||c._animatingZoom||this._zooming)){var h=c.mouseEventToContainerPoint(s.touches[0]),p=c.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(h.add(p)._divideBy(2))),this._startDist=h.distanceTo(p),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),ye(document,"touchmove",this._onTouchMove,this),ye(document,"touchend touchcancel",this._onTouchEnd,this),bt(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var c=this._map,h=c.mouseEventToContainerPoint(s.touches[0]),p=c.mouseEventToContainerPoint(s.touches[1]),_=h.distanceTo(p)/this._startDist;if(this._zoom=c.getScaleZoom(_,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&_<1||this._zoom>c.getMaxZoom()&&_>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var w=h._add(p)._divideBy(2)._subtract(this._centerPoint);if(_===1&&w.x===0&&w.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),R(this._animRequest);var S=i(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(S,this,!0),bt(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,R(this._animRequest),tt(document,"touchmove",this._onTouchMove,this),tt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ve.addInitHook("addHandler","touchZoom",RD),Ve.BoxZoom=bD,Ve.DoubleClickZoom=TD,Ve.Drag=CD,Ve.Keyboard=DD,Ve.ScrollWheelZoom=SD,Ve.TapHold=AD,Ve.TouchZoom=RD,n.Bounds=ot,n.Browser=ae,n.CRS=Rn,n.Canvas=yD,n.Circle=vy,n.CircleMarker=op,n.Class=k,n.Control=$n,n.DivIcon=gD,n.DivOverlay=mi,n.DomEvent=mt,n.DomUtil=hi,n.Draggable=Ur,n.Evented=Or,n.FeatureGroup=lt,n.GeoJSON=ro,n.GridLayer=hd,n.Handler=ir,n.Icon=or,n.ImageOverlay=lp,n.LatLng=ve,n.LatLngBounds=wn,n.Layer=Ne,n.LayerGroup=gt,n.LineUtil=l,n.Map=Ve,n.Marker=ip,n.Mixin=Fc,n.Path=Qo,n.Point=Ie,n.PolyUtil=ad,n.Polygon=zc,n.Polyline=no,n.Popup=dp,n.PosAnimation=Qf,n.Projection=I,n.Rectangle=ID,n.Renderer=io,n.SVG=pd,n.SVGOverlay=mD,n.TileLayer=Wc,n.Tooltip=hp,n.Transformation=Ll,n.Util=M,n.VideoOverlay=pD,n.bind=i,n.bounds=ln,n.canvas=wD,n.circle=EL,n.circleMarker=wL,n.control=Ko,n.divIcon=xL,n.extend=t,n.featureGroup=en,n.geoJSON=fD,n.geoJson=TL,n.gridLayer=ML,n.icon=sr,n.imageOverlay=CL,n.latLng=Fe,n.latLngBounds=et,n.layerGroup=ze,n.map=Yf,n.marker=yL,n.point=fe,n.polygon=bL,n.polyline=IL,n.popup=AL,n.rectangle=kL,n.setOptions=b,n.stamp=a,n.svg=ED,n.svgOverlay=SL,n.tileLayer=_D,n.tooltip=RL,n.transformation=ai,n.version=e,n.videoOverlay=DL;var LL=window.L;n.noConflict=function(){return window.L=LL,this},window.L=n})});var Ty;function mp(){return Ty}function gi(n){let e=Ty;return Ty=n,e}var VD=Symbol("NotFound");function Kc(n){return n===VD||n?.name==="\u0275NotFound"}var In=null,gp=!1,Cy=1,eF=null,bn=Symbol("SIGNAL");function Pe(n){let e=In;return In=n,e}function wp(){return In}var Zc={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Qc(n){if(gp)throw new Error("");if(In===null)return;In.consumerOnSignalRead(n);let e=In.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=In.recomputing;if(r&&(t=e!==void 0?e.nextProducer:In.producers,t!==void 0&&t.producer===n)){In.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===In&&(!r||nF(i,In)))return;let o=Jc(In),a={producer:n,consumer:In,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};In.producersTail=a,e!==void 0?e.nextProducer=a:In.producers=a,o&&$D(n,a)}function UD(){Cy++}function Ep(n){if(!(Jc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Cy)){if(!n.producerMustRecompute(n)&&!_d(n)){yp(n);return}n.producerRecomputeValue(n),yp(n)}}function Dy(n){if(n.consumers===void 0)return;let e=gp;gp=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||tF(r)}}finally{gp=e}}function Sy(){return In?.consumerAllowSignalWrites!==!1}function tF(n){n.dirty=!0,Dy(n),n.consumerMarkedDirty?.(n)}function yp(n){n.dirty=!1,n.lastCleanEpoch=Cy}function Yc(n){return n&&jD(n),Pe(n)}function jD(n){n.producersTail=void 0,n.recomputing=!0}function gd(n,e){Pe(e),n&&BD(n)}function BD(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Jc(n))do t=Ay(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function _d(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Ep(t),r!==t.version))return!0}return!1}function vd(n){if(Jc(n)){let e=n.producers;for(;e!==void 0;)e=Ay(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function $D(n,e){let t=n.consumersTail,r=Jc(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)$D(i.producer,i)}function Ay(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Jc(e)){let o=e.producers;for(;o!==void 0;)o=Ay(o)}return t}function Jc(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Ip(n){eF?.(n)}function nF(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function bp(n,e){return Object.is(n,e)}function Tp(n,e){let t=Object.create(rF);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Ep(t),Qc(t),t.value===md)throw t.error;return t.value};return r[bn]=t,Ip(t),r}var _p=Symbol("UNSET"),vp=Symbol("COMPUTING"),md=Symbol("ERRORED"),rF=we(Q({},Zc),{value:_p,dirty:!0,error:null,equal:bp,kind:"computed",producerMustRecompute(n){return n.value===_p||n.value===vp},producerRecomputeValue(n){if(n.value===vp)throw new Error("");let e=n.value;n.value=vp;let t=Yc(n),r,i=!1;try{r=n.computation(),Pe(null),i=e!==_p&&e!==md&&r!==md&&n.equal(e,r)}catch(o){r=md,n.error=o}finally{gd(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function iF(){throw new Error}var HD=iF;function zD(n){HD(n)}function Ry(n){HD=n}var oF=null;function xy(n,e){let t=Object.create(Cp);t.value=n,e!==void 0&&(t.equal=e);let r=()=>qD(t);return r[bn]=t,Ip(t),[r,a=>Xc(t,a),a=>My(t,a)]}function qD(n){return Qc(n),n.value}function Xc(n,e){Sy()||zD(n),n.equal(n.value,e)||(n.value=e,sF(n))}function My(n,e){Sy()||zD(n),Xc(n,e(n.value))}var Cp=we(Q({},Zc),{equal:bp,value:void 0,kind:"signal"});function sF(n){n.version++,UD(),Dy(n),oF?.(n)}function Re(n){return typeof n=="function"}function eu(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Dp=eu(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ma(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var At=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Re(r))try{r()}catch(o){e=o instanceof Dp?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{WD(o)}catch(a){e=e??[],a instanceof Dp?e=[...e,...a.errors]:e.push(a)}}if(e)throw new Dp(e)}}add(e){var t;if(e&&e!==this)if(this.closed)WD(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ma(t,e)}remove(e){let{_finalizers:t}=this;t&&ma(t,e),e instanceof n&&e._removeParent(this)}};At.EMPTY=(()=>{let n=new At;return n.closed=!0,n})();var Py=At.EMPTY;function Sp(n){return n instanceof At||n&&"closed"in n&&Re(n.remove)&&Re(n.add)&&Re(n.unsubscribe)}function WD(n){Re(n)?n():n.unsubscribe()}var jr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var tu={setTimeout(n,e,...t){let{delegate:r}=tu;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=tu;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ap(n){tu.setTimeout(()=>{let{onUnhandledError:e}=jr;if(e)e(n);else throw n})}function yd(){}var GD=Ny("C",void 0,void 0);function KD(n){return Ny("E",void 0,n)}function ZD(n){return Ny("N",n,void 0)}function Ny(n,e,t){return{kind:n,value:e,error:t}}var ga=null;function nu(n){if(jr.useDeprecatedSynchronousErrorHandling){let e=!ga;if(e&&(ga={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ga;if(ga=null,t)throw r}}else n()}function QD(n){jr.useDeprecatedSynchronousErrorHandling&&ga&&(ga.errorThrown=!0,ga.error=n)}var _a=class extends At{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Sp(e)&&e.add(this)):this.destination=uF}static create(e,t,r){return new ru(e,t,r)}next(e){this.isStopped?Oy(ZD(e),this):this._next(e)}error(e){this.isStopped?Oy(KD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Oy(GD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},aF=Function.prototype.bind;function ky(n,e){return aF.call(n,e)}var Ly=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Rp(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Rp(r)}else Rp(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Rp(t)}}},ru=class extends _a{constructor(e,t,r){super();let i;if(Re(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&jr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ky(e.next,o),error:e.error&&ky(e.error,o),complete:e.complete&&ky(e.complete,o)}):i=e}this.destination=new Ly(i)}};function Rp(n){jr.useDeprecatedSynchronousErrorHandling?QD(n):Ap(n)}function cF(n){throw n}function Oy(n,e){let{onStoppedNotification:t}=jr;t&&tu.setTimeout(()=>t(n,e))}var uF={closed:!0,next:yd,error:cF,complete:yd};var iu=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ar(n){return n}function xp(...n){return Fy(n)}function Fy(n){return n.length===0?ar:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var be=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=dF(t)?t:new ru(t,r,i);return nu(()=>{let{operator:a,source:u}=this;o.add(a?a.call(o,u):u?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=YD(r),new r((i,o)=>{let a=new ru({next:u=>{try{t(u)}catch(d){o(d),a.unsubscribe()}},error:o,complete:i});this.subscribe(a)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[iu](){return this}pipe(...t){return Fy(t)(this)}toPromise(t){return t=YD(t),new t((r,i)=>{let o;this.subscribe(a=>o=a,a=>i(a),()=>r(o))})}}return n.create=e=>new n(e),n})();function YD(n){var e;return(e=n??jr.Promise)!==null&&e!==void 0?e:Promise}function lF(n){return n&&Re(n.next)&&Re(n.error)&&Re(n.complete)}function dF(n){return n&&n instanceof _a||lF(n)&&Sp(n)}function Vy(n){return Re(n?.lift)}function qe(n){return e=>{if(Vy(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ue(n,e,t,r,i){return new Uy(n,e,t,r,i)}var Uy=class extends _a{constructor(e,t,r,i,o,a){super(e),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=t?function(u){try{t(u)}catch(d){e.error(d)}}:super._next,this._error=i?function(u){try{i(u)}catch(d){e.error(d)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ou(){return qe((n,e)=>{let t=null;n._refCount++;let r=Ue(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var su=class extends be{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Vy(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new At;let t=this.getSubject();e.add(this.source.subscribe(Ue(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=At.EMPTY)}return e}refCount(){return ou()(this)}};var JD=eu(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Bt=(()=>{class n extends be{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Mp(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new JD}next(t){nu(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){nu(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){nu(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Py:(this.currentObservers=null,o.push(t),new At(()=>{this.currentObservers=null,ma(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new be;return t.source=this,t}}return n.create=(e,t)=>new Mp(e,t),n})(),Mp=class extends Bt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Py}};var fn=class extends Bt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var jy={now(){return(jy.delegate||Date).now()},delegate:void 0};var Pp=class extends At{constructor(e,t){super()}schedule(e,t=0){return this}};var wd={setInterval(n,e,...t){let{delegate:r}=wd;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=wd;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var au=class extends Pp{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return wd.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&wd.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ma(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var cu=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};cu.now=jy.now;var uu=class extends cu{constructor(e,t=cu.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var By=new uu(au);var Np=class extends au{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var kp=class extends uu{};var $y=new kp(Np);var zn=new be(n=>n.complete());function XD(n){return n&&Re(n.schedule)}function eS(n){return n[n.length-1]}function Op(n){return Re(eS(n))?n.pop():void 0}function Jo(n){return XD(eS(n))?n.pop():void 0}function Hy(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function nS(n,e,t,r){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function u(g){try{f(r.next(g))}catch(y){a(y)}}function d(g){try{f(r.throw(g))}catch(y){a(y)}}function f(g){g.done?o(g.value):i(g.value).then(u,d)}f((r=r.apply(n,e||[])).next())})}function tS(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function va(n){return this instanceof va?(this.v=n,this):new va(n)}function rS(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(b){return function(N){return Promise.resolve(N).then(b,y)}}function u(b,N){r[b]&&(i[b]=function($){return new Promise(function(F,q){o.push([b,$,F,q])>1||d(b,$)})},N&&(i[b]=N(i[b])))}function d(b,N){try{f(r[b](N))}catch($){E(o[0][3],$)}}function f(b){b.value instanceof va?Promise.resolve(b.value.v).then(g,y):E(o[0][2],b)}function g(b){d("next",b)}function y(b){d("throw",b)}function E(b,N){b(N),o.shift(),o.length&&d(o[0][0],o[0][1])}}function iS(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof tS=="function"?tS(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(a){return new Promise(function(u,d){a=n[o](a),i(u,d,a.done,a.value)})}}function i(o,a,u,d){Promise.resolve(d).then(function(f){o({value:f,done:u})},a)}}var Lp=n=>n&&typeof n.length=="number"&&typeof n!="function";function Fp(n){return Re(n?.then)}function Vp(n){return Re(n[iu])}function Up(n){return Symbol.asyncIterator&&Re(n?.[Symbol.asyncIterator])}function jp(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function hF(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Bp=hF();function $p(n){return Re(n?.[Bp])}function Hp(n){return rS(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield va(t.read());if(i)return yield va(void 0);yield yield va(r)}}finally{t.releaseLock()}})}function zp(n){return Re(n?.getReader)}function $t(n){if(n instanceof be)return n;if(n!=null){if(Vp(n))return fF(n);if(Lp(n))return pF(n);if(Fp(n))return mF(n);if(Up(n))return oS(n);if($p(n))return gF(n);if(zp(n))return _F(n)}throw jp(n)}function fF(n){return new be(e=>{let t=n[iu]();if(Re(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function pF(n){return new be(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function mF(n){return new be(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ap)})}function gF(n){return new be(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function oS(n){return new be(e=>{vF(n,e).catch(t=>e.error(t))})}function _F(n){return oS(Hp(n))}function vF(n,e){var t,r,i,o;return nS(this,void 0,void 0,function*(){try{for(t=iS(n);r=yield t.next(),!r.done;){let a=r.value;if(e.next(a),e.closed)return}}catch(a){i={error:a}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function qn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Xo(n,e=0){return qe((t,r)=>{t.subscribe(Ue(r,i=>qn(r,n,()=>r.next(i),e),()=>qn(r,n,()=>r.complete(),e),i=>qn(r,n,()=>r.error(i),e)))})}function es(n,e=0){return qe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function sS(n,e){return $t(n).pipe(es(e),Xo(e))}function aS(n,e){return $t(n).pipe(es(e),Xo(e))}function cS(n,e){return new be(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function uS(n,e){return new be(t=>{let r;return qn(t,e,()=>{r=n[Bp](),qn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(a){t.error(a);return}o?t.complete():t.next(i)},0,!0)}),()=>Re(r?.return)&&r.return()})}function qp(n,e){if(!n)throw new Error("Iterable cannot be null");return new be(t=>{qn(t,e,()=>{let r=n[Symbol.asyncIterator]();qn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function lS(n,e){return qp(Hp(n),e)}function dS(n,e){if(n!=null){if(Vp(n))return sS(n,e);if(Lp(n))return cS(n,e);if(Fp(n))return aS(n,e);if(Up(n))return qp(n,e);if($p(n))return uS(n,e);if(zp(n))return lS(n,e)}throw jp(n)}function ft(n,e){return e?dS(n,e):$t(n)}function he(...n){let e=Jo(n);return ft(n,e)}function lu(n,e){let t=Re(n)?n:()=>n,r=i=>i.error(t());return new be(e?i=>e.schedule(r,0,i):r)}function zy(n){return!!n&&(n instanceof be||Re(n.lift)&&Re(n.subscribe))}var oo=eu(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Te(n,e){return qe((t,r)=>{let i=0;t.subscribe(Ue(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:yF}=Array;function wF(n,e){return yF(e)?n(...e):n(e)}function Wp(n){return Te(e=>wF(n,e))}var{isArray:EF}=Array,{getPrototypeOf:IF,prototype:bF,keys:TF}=Object;function Gp(n){if(n.length===1){let e=n[0];if(EF(e))return{args:e,keys:null};if(CF(e)){let t=TF(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function CF(n){return n&&typeof n=="object"&&IF(n)===bF}function Kp(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Ed(...n){let e=Jo(n),t=Op(n),{args:r,keys:i}=Gp(n);if(r.length===0)return ft([],e);let o=new be(DF(r,e,i?a=>Kp(i,a):ar));return t?o.pipe(Wp(t)):o}function DF(n,e,t=ar){return r=>{hS(e,()=>{let{length:i}=n,o=new Array(i),a=i,u=i;for(let d=0;d<i;d++)hS(e,()=>{let f=ft(n[d],e),g=!1;f.subscribe(Ue(r,y=>{o[d]=y,g||(g=!0,u--),u||r.next(t(o.slice()))},()=>{--a||r.complete()}))},r)},r)}}function hS(n,e,t){n?qn(t,n,e):e()}function fS(n,e,t,r,i,o,a,u){let d=[],f=0,g=0,y=!1,E=()=>{y&&!d.length&&!f&&e.complete()},b=$=>f<r?N($):d.push($),N=$=>{o&&e.next($),f++;let F=!1;$t(t($,g++)).subscribe(Ue(e,q=>{i?.(q),o?b(q):e.next(q)},()=>{F=!0},void 0,()=>{if(F)try{for(f--;d.length&&f<r;){let q=d.shift();a?qn(e,a,()=>N(q)):N(q)}E()}catch(q){e.error(q)}}))};return n.subscribe(Ue(e,b,()=>{y=!0,E()})),()=>{u?.()}}function Nt(n,e,t=1/0){return Re(e)?Nt((r,i)=>Te((o,a)=>e(r,o,i,a))($t(n(r,i))),t):(typeof e=="number"&&(t=e),qe((r,i)=>fS(r,i,n,t)))}function du(n=1/0){return Nt(ar,n)}function pS(){return du(1)}function hu(...n){return pS()(ft(n,Jo(n)))}function Id(n){return new be(e=>{$t(n()).subscribe(e)})}function qy(...n){let e=Op(n),{args:t,keys:r}=Gp(n),i=new be(o=>{let{length:a}=t;if(!a){o.complete();return}let u=new Array(a),d=a,f=a;for(let g=0;g<a;g++){let y=!1;$t(t[g]).subscribe(Ue(o,E=>{y||(y=!0,f--),u[g]=E},()=>d--,void 0,()=>{(!d||!y)&&(f||o.next(r?Kp(r,u):u),o.complete())}))}});return e?i.pipe(Wp(e)):i}function pn(n,e){return qe((t,r)=>{let i=0;t.subscribe(Ue(r,o=>n.call(e,o,i++)&&r.next(o)))})}function so(n){return qe((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Ue(t,void 0,void 0,a=>{o=$t(n(a,so(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function mS(n,e,t,r,i){return(o,a)=>{let u=t,d=e,f=0;o.subscribe(Ue(a,g=>{let y=f++;d=u?n(d,g,y):(u=!0,g),r&&a.next(d)},i&&(()=>{u&&a.next(d),a.complete()})))}}function _i(n,e){return Re(e)?Nt(n,e,1):Nt(n,1)}function ts(n){return qe((e,t)=>{let r=!1;e.subscribe(Ue(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ao(n){return n<=0?()=>zn:qe((e,t)=>{let r=0;e.subscribe(Ue(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Zp(n=SF){return qe((e,t)=>{let r=!1;e.subscribe(Ue(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function SF(){return new oo}function ns(n){return qe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function co(n,e){let t=arguments.length>=2;return r=>r.pipe(n?pn((i,o)=>n(i,o,r)):ar,ao(1),t?ts(e):Zp(()=>new oo))}function fu(n){return n<=0?()=>zn:qe((e,t)=>{let r=[];e.subscribe(Ue(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Wy(n,e){let t=arguments.length>=2;return r=>r.pipe(n?pn((i,o)=>n(i,o,r)):ar,fu(1),t?ts(e):Zp(()=>new oo))}function Qp(n,e){return qe(mS(n,e,arguments.length>=2,!0))}function Yp(...n){let e=Jo(n);return qe((t,r)=>{(e?hu(n,t,e):hu(n,t)).subscribe(r)})}function mn(n,e){return qe((t,r)=>{let i=null,o=0,a=!1,u=()=>a&&!i&&r.complete();t.subscribe(Ue(r,d=>{i?.unsubscribe();let f=0,g=o++;$t(n(d,g)).subscribe(i=Ue(r,y=>r.next(e?e(d,y,g,f++):y),()=>{i=null,u()}))},()=>{a=!0,u()}))})}function Jp(n){return qe((e,t)=>{$t(n).subscribe(Ue(t,()=>t.complete(),yd)),!t.closed&&e.subscribe(t)})}function nn(n,e,t){let r=Re(n)||e||t?{next:n,error:e,complete:t}:n;return r?qe((i,o)=>{var a;(a=r.subscribe)===null||a===void 0||a.call(r);let u=!0;i.subscribe(Ue(o,d=>{var f;(f=r.next)===null||f===void 0||f.call(r,d),o.next(d)},()=>{var d;u=!1,(d=r.complete)===null||d===void 0||d.call(r),o.complete()},d=>{var f;u=!1,(f=r.error)===null||f===void 0||f.call(r,d),o.error(d)},()=>{var d,f;u&&((d=r.unsubscribe)===null||d===void 0||d.call(r)),(f=r.finalize)===null||f===void 0||f.call(r)}))}):ar}function gS(n){let e=Pe(null);try{return n()}finally{Pe(e)}}var rs=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},ow=new rs("20.3.14");var nm="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",te=class extends Error{code;constructor(e,t){super(fo(e,t)),this.code=e}};function AF(n){return`NG0${Math.abs(n)}`}function fo(n,e){return`${AF(n)}${e?": "+e:""}`}var Dd=globalThis;function Ye(n){for(let e in n)if(n[e]===Ye)return e;throw Error("")}function yS(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function lo(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(lo).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function sw(n,e){return n?e?`${n} ${e}`:n:e||""}var RF=Ye({__forward_ref__:Ye});function lr(n){return n.__forward_ref__=lr,n.toString=function(){return lo(this())},n}function gn(n){return aw(n)?n():n}function aw(n){return typeof n=="function"&&n.hasOwnProperty(RF)&&n.__forward_ref__===lr}function re(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function dr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Sd(n){return xF(n,rm)}function cw(n){return Sd(n)!==null}function xF(n,e){return n.hasOwnProperty(e)&&n[e]||null}function MF(n){let e=n?.[rm]??null;return e||null}function Ky(n){return n&&n.hasOwnProperty(em)?n[em]:null}var rm=Ye({\u0275prov:Ye}),em=Ye({\u0275inj:Ye}),J=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=re({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function uw(n){return n&&!!n.\u0275providers}var lw=Ye({\u0275cmp:Ye}),dw=Ye({\u0275dir:Ye}),hw=Ye({\u0275pipe:Ye}),fw=Ye({\u0275mod:Ye}),Td=Ye({\u0275fac:Ye}),Ta=Ye({__NG_ELEMENT_ID__:Ye}),_S=Ye({__NG_ENV_ID__:Ye});function Ad(n){return typeof n=="string"?n:n==null?"":String(n)}function wS(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ad(n)}var ES=Ye({ngErrorCode:Ye}),PF=Ye({ngErrorMessage:Ye}),NF=Ye({ngTokenPath:Ye});function pw(n,e){return IS("",-200,e)}function im(n,e){throw new te(-201,!1)}function IS(n,e,t){let r=new te(e,n);return r[ES]=e,r[PF]=n,t&&(r[NF]=t),r}function kF(n){return n[ES]}var Zy;function bS(){return Zy}function cr(n){let e=Zy;return Zy=n,e}function mw(n,e,t){let r=Sd(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;im(n,"Injector")}var OF={},ya=OF,Qy="__NG_DI_FLAG__",Yy=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=wa(t)||0;try{return this.injector.get(e,r&8?null:ya,r)}catch(i){if(Kc(i))return i;throw i}}};function LF(n,e=0){let t=mp();if(t===void 0)throw new te(-203,!1);if(t===null)return mw(n,void 0,e);{let r=FF(e),i=t.retrieve(n,r);if(Kc(i)){if(r.optional)return null;throw i}return i}}function le(n,e=0){return(bS()||LF)(gn(n),e)}function B(n,e){return le(n,wa(e))}function wa(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function FF(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Jy(n){let e=[];for(let t=0;t<n.length;t++){let r=gn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new te(900,!1);let i,o=0;for(let a=0;a<r.length;a++){let u=r[a],d=VF(u);typeof d=="number"?d===-1?i=u.token:o|=d:i=u}e.push(le(i,o))}else e.push(le(r))}return e}function TS(n,e){return n[Qy]=e,n.prototype[Qy]=e,n}function VF(n){return n[Qy]}function Ea(n,e){let t=n.hasOwnProperty(Td);return t?n[Td]:null}function om(n,e){n.forEach(t=>Array.isArray(t)?om(t,e):e(t))}function gw(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Rd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function CS(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function DS(n,e,t){let r=mu(n,e);return r>=0?n[r|1]=t:(r=~r,CS(n,r,e,t)),r}function sm(n,e){let t=mu(n,e);if(t>=0)return n[t|1]}function mu(n,e){return UF(n,e,1)}function UF(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),a=n[o<<t];if(e===a)return o<<t;a>e?i=o:r=o+1}return~(i<<t)}var os={},ur=[],ss=new J(""),_w=new J("",-1),vw=new J(""),Cd=class{get(e,t=ya){if(t===ya){let i=IS("",-201);throw i.name="\u0275NotFound",i}return t}};function yw(n){return n[fw]||null}function po(n){return n[lw]||null}function ww(n){return n[dw]||null}function SS(n){return n[hw]||null}function Nn(n){return{\u0275providers:n}}function AS(...n){return{\u0275providers:Ew(!0,n),\u0275fromNgModule:!0}}function Ew(n,...e){let t=[],r=new Set,i,o=a=>{t.push(a)};return om(e,a=>{let u=a;tm(u,o,[],r)&&(i||=[],i.push(u))}),i!==void 0&&RS(i,o),t}function RS(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Iw(i,o=>{e(o,r)})}}function tm(n,e,t,r){if(n=gn(n),!n)return!1;let i=null,o=Ky(n),a=!o&&po(n);if(!o&&!a){let d=n.ngModule;if(o=Ky(d),o)i=d;else return!1}else{if(a&&!a.standalone)return!1;i=n}let u=r.has(i);if(a){if(u)return!1;if(r.add(i),a.dependencies){let d=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let f of d)tm(f,e,t,r)}}else if(o){if(o.imports!=null&&!u){r.add(i);let f;try{om(o.imports,g=>{tm(g,e,t,r)&&(f||=[],f.push(g))})}finally{}f!==void 0&&RS(f,e)}if(!u){let f=Ea(i)||(()=>new i);e({provide:i,useFactory:f,deps:ur},i),e({provide:vw,useValue:i,multi:!0},i),e({provide:ss,useValue:()=>le(i),multi:!0},i)}let d=o.providers;if(d!=null&&!u){let f=n;Iw(d,g=>{e(g,f)})}}else return!1;return i!==n&&n.providers!==void 0}function Iw(n,e){for(let t of n)uw(t)&&(t=t.\u0275providers),Array.isArray(t)?Iw(t,e):e(t)}var jF=Ye({provide:String,useValue:Ye});function xS(n){return n!==null&&typeof n=="object"&&jF in n}function BF(n){return!!(n&&n.useExisting)}function $F(n){return!!(n&&n.useFactory)}function Ia(n){return typeof n=="function"}function MS(n){return!!n.useClass}var xd=new J(""),Xp={},vS={},Gy;function Md(){return Gy===void 0&&(Gy=new Cd),Gy}var Tt=class{},ba=class extends Tt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,ew(e,a=>this.processProvider(a)),this.records.set(_w,pu(void 0,this)),i.has("environment")&&this.records.set(Tt,pu(void 0,this));let o=this.records.get(xd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(vw,ur,{self:!0}))}retrieve(e,t){let r=wa(t)||0;try{return this.get(e,ya,r)}catch(i){if(Kc(i))return i;throw i}}destroy(){bd(this),this._destroyed=!0;let e=Pe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Pe(e)}}onDestroy(e){return bd(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){bd(this);let t=gi(this),r=cr(void 0),i;try{return e()}finally{gi(t),cr(r)}}get(e,t=ya,r){if(bd(this),e.hasOwnProperty(_S))return e[_S](this);let i=wa(r),o,a=gi(this),u=cr(void 0);try{if(!(i&4)){let f=this.records.get(e);if(f===void 0){let g=GF(e)&&Sd(e);g&&this.injectableDefInScope(g)?f=pu(Xy(e),Xp):f=null,this.records.set(e,f)}if(f!=null)return this.hydrate(e,f,i)}let d=i&2?Md():this.parent;return t=i&8&&t===ya?null:t,d.get(e,t)}catch(d){let f=kF(d);throw f===-200||f===-201?new te(f,null):d}finally{cr(u),gi(a)}}resolveInjectorInitializers(){let e=Pe(null),t=gi(this),r=cr(void 0),i;try{let o=this.get(ss,ur,{self:!0});for(let a of o)a()}finally{gi(t),cr(r),Pe(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(lo(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=gn(e);let t=Ia(e)?e:gn(e&&e.provide),r=zF(e);if(!Ia(e)&&e.multi===!0){let i=this.records.get(t);i||(i=pu(void 0,Xp,!0),i.factory=()=>Jy(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=Pe(null);try{if(t.value===vS)throw pw(lo(e));return t.value===Xp&&(t.value=vS,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&WF(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Pe(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=gn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Xy(n){let e=Sd(n),t=e!==null?e.factory:Ea(n);if(t!==null)return t;if(n instanceof J)throw new te(204,!1);if(n instanceof Function)return HF(n);throw new te(204,!1)}function HF(n){if(n.length>0)throw new te(204,!1);let t=MF(n);return t!==null?()=>t.factory(n):()=>new n}function zF(n){if(xS(n))return pu(void 0,n.useValue);{let e=bw(n);return pu(e,Xp)}}function bw(n,e,t){let r;if(Ia(n)){let i=gn(n);return Ea(i)||Xy(i)}else if(xS(n))r=()=>gn(n.useValue);else if($F(n))r=()=>n.useFactory(...Jy(n.deps||[]));else if(BF(n))r=(i,o)=>le(gn(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=gn(n&&(n.useClass||n.provide));if(qF(n))r=()=>new i(...Jy(n.deps));else return Ea(i)||Xy(i)}return r}function bd(n){if(n.destroyed)throw new te(205,!1)}function pu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function qF(n){return!!n.deps}function WF(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function GF(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function ew(n,e){for(let t of n)Array.isArray(t)?ew(t,e):t&&uw(t)?ew(t.\u0275providers,e):e(t)}function Rt(n,e){let t;n instanceof ba?(bd(n),t=n):t=new Yy(n);let r,i=gi(t),o=cr(void 0);try{return e()}finally{gi(i),cr(o)}}function PS(){return bS()!==void 0||mp()!=null}var $r=0,Me=1,Ce=2,_n=3,Tr=4,Cr=5,Pd=6,gu=7,Tn=8,as=9,vi=10,vt=11,_u=12,Tw=13,Ca=14,Dr=15,Da=16,Sa=17,Aa=18,Nd=19,Cw=20,uo=21,am=22,kd=23,hr=24,Ra=25,Od=26,Wn=27,NS=1;var cs=7,Ld=8,Fd=9,Gn=10;function yi(n){return Array.isArray(n)&&typeof n[NS]=="object"}function Hr(n){return Array.isArray(n)&&n[NS]===!0}function Dw(n){return(n.flags&4)!==0}function us(n){return n.componentOffset>-1}function Vd(n){return(n.flags&1)===1}function wi(n){return!!n.template}function vu(n){return(n[Ce]&512)!==0}function xa(n){return(n[Ce]&256)===256}var kS="svg",OS="math";function Sr(n){for(;Array.isArray(n);)n=n[$r];return n}function Sw(n,e){return Sr(e[n])}function zr(n,e){return Sr(e[n.index])}function cm(n,e){return n.data[e]}function Ar(n,e){let t=e[n];return yi(t)?t:t[$r]}function um(n){return(n[Ce]&128)===128}function LS(n){return Hr(n[_n])}function Ma(n,e){return e==null?null:n[e]}function Aw(n){n[Sa]=0}function Rw(n){n[Ce]&1024||(n[Ce]|=1024,um(n)&&yu(n))}function FS(n,e){for(;n>0;)e=e[Ca],n--;return e}function Ud(n){return!!(n[Ce]&9216||n[hr]?.dirty)}function lm(n){n[vi].changeDetectionScheduler?.notify(8),n[Ce]&64&&(n[Ce]|=1024),Ud(n)&&yu(n)}function yu(n){n[vi].changeDetectionScheduler?.notify(0);let e=is(n);for(;e!==null&&!(e[Ce]&8192||(e[Ce]|=8192,!um(e)));)e=is(e)}function xw(n,e){if(xa(n))throw new te(911,!1);n[uo]===null&&(n[uo]=[]),n[uo].push(e)}function VS(n,e){if(n[uo]===null)return;let t=n[uo].indexOf(e);t!==-1&&n[uo].splice(t,1)}function is(n){let e=n[_n];return Hr(e)?e[_n]:e}function US(n){return n[gu]??=[]}function jS(n){return n.cleanup??=[]}var je={lFrame:XS(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var tw=!1;function BS(){return je.lFrame.elementDepthCount}function $S(){je.lFrame.elementDepthCount++}function Mw(){je.lFrame.elementDepthCount--}function Pw(){return je.bindingsEnabled}function HS(){return je.skipHydrationRootTNode!==null}function Nw(n){return je.skipHydrationRootTNode===n}function kw(){je.skipHydrationRootTNode=null}function Je(){return je.lFrame.lView}function kn(){return je.lFrame.tView}function kt(n){return je.lFrame.contextLView=n,n[Tn]}function Ot(n){return je.lFrame.contextLView=null,n}function rn(){let n=Ow();for(;n!==null&&n.type===64;)n=n.parent;return n}function Ow(){return je.lFrame.currentTNode}function zS(){let n=je.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function wu(n,e){let t=je.lFrame;t.currentTNode=n,t.isParent=e}function Lw(){return je.lFrame.isParent}function qS(){je.lFrame.isParent=!1}function Fw(){return tw}function Vw(n){let e=tw;return tw=n,e}function WS(n){return je.lFrame.bindingIndex=n}function Eu(){return je.lFrame.bindingIndex++}function GS(n){let e=je.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function KS(){return je.lFrame.inI18n}function ZS(n,e){let t=je.lFrame;t.bindingIndex=t.bindingRootIndex=n,dm(e)}function QS(){return je.lFrame.currentDirectiveIndex}function dm(n){je.lFrame.currentDirectiveIndex=n}function YS(n){let e=je.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Uw(n){je.lFrame.currentQueryIndex=n}function KF(n){let e=n[Me];return e.type===2?e.declTNode:e.type===1?n[Cr]:null}function jw(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=KF(o),i===null||(o=o[Ca],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=je.lFrame=JS();return r.currentTNode=e,r.lView=n,!0}function hm(n){let e=JS(),t=n[Me];je.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function JS(){let n=je.lFrame,e=n===null?null:n.child;return e===null?XS(n):e}function XS(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function eA(){let n=je.lFrame;return je.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Bw=eA;function fm(){let n=eA();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function tA(n){return(je.lFrame.contextLView=FS(n,je.lFrame.contextLView))[Tn]}function Pa(){return je.lFrame.selectedIndex}function ls(n){je.lFrame.selectedIndex=n}function jd(){let n=je.lFrame;return cm(n.tView,n.selectedIndex)}function nA(){return je.lFrame.currentNamespace}var rA=!0;function pm(){return rA}function mm(n){rA=n}function nw(n,e=null,t=null,r){let i=$w(n,e,t,r);return i.resolveInjectorInitializers(),i}function $w(n,e=null,t=null,r,i=new Set){let o=[t||ur,AS(n)];return r=r||(typeof n=="object"?void 0:lo(n)),new ba(o,e||Md(),r||null,i)}var _t=class n{static THROW_IF_NOT_FOUND=ya;static NULL=new Cd;static create(e,t){if(Array.isArray(e))return nw({name:""},t,e,"");{let r=e.name??"";return nw({name:r},e.parent,e.providers,r)}}static \u0275prov=re({token:n,providedIn:"any",factory:()=>le(_w)});static __NG_ELEMENT_ID__=-1},xt=new J(""),qr=(()=>{class n{static __NG_ELEMENT_ID__=ZF;static __NG_ENV_ID__=t=>t}return n})(),rw=class extends qr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return xa(this._lView)}onDestroy(e){let t=this._lView;return xw(t,e),()=>VS(t,e)}};function ZF(){return new rw(Je())}var Br=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Kn=new J("",{providedIn:"root",factory:()=>{let n=B(Tt),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(Br),e.handleError(t))}}}),iA={provide:ss,useValue:()=>void B(Br),multi:!0};function Hw(n){return typeof n=="function"&&n[bn]!==void 0}function Ct(n,e){let[t,r,i]=xy(n,e?.equal),o=t,a=o[bn];return o.set=r,o.update=i,o.asReadonly=oA.bind(o),o}function oA(){let n=this[bn];if(n.readonlyFn===void 0){let e=()=>this();e[bn]=n,n.readonlyFn=e}return n.readonlyFn}function zw(n){return Hw(n)&&typeof n.set=="function"}var gm=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=QF}return n})();function QF(){return new gm(Je(),rn())}var ho=class{},_m=new J("",{providedIn:"root",factory:()=>!1});var qw=new J(""),Ww=new J(""),Ei=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new fn(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new be(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})(),mo=(()=>{class n{internalPendingTasks=B(Ei);scheduler=B(ho);errorHandler=B(Kn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})();function Bd(...n){}var Gw=(()=>{class n{static \u0275prov=re({token:n,providedIn:"root",factory:()=>new iw})}return n})(),iw=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function Au(n){return{toString:n}.toString()}var vm="__parameters__";function oV(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function sV(n,e,t){return Au(()=>{let r=oV(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let a=new i(...o);return u.annotation=a,u;function u(d,f,g){let y=d.hasOwnProperty(vm)?d[vm]:Object.defineProperty(d,vm,{value:[]})[vm];for(;y.length<=g;)y.push(null);return(y[g]=y[g]||[]).push(a),d}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var on=TS(sV("Optional"),8);function aV(n){return typeof n=="function"}var Cm=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function FA(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var _o=(()=>{let n=()=>VA;return n.ngInherit=!0,n})();function VA(n){return n.type.prototype.ngOnChanges&&(n.setInput=uV),cV}function cV(){let n=jA(this),e=n?.current;if(e){let t=n.previous;if(t===os)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function uV(n,e,t,r,i){let o=this.declaredInputs[r],a=jA(n)||lV(n,{previous:os,current:null}),u=a.current||(a.current={}),d=a.previous,f=d[o];u[o]=new Cm(f&&f.currentValue,t,d===os),FA(n,e,i,t)}var UA="__ngSimpleChanges__";function jA(n){return n[UA]||null}function lV(n,e){return n[UA]=e}var sA=[];var nt=function(n,e=null,t){for(let r=0;r<sA.length;r++){let i=sA[r];i(n,e,t)}};function dV(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let a=VA(e);(t.preOrderHooks??=[]).push(n,a),(t.preOrderCheckHooks??=[]).push(n,a)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function BA(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:u,ngAfterViewInit:d,ngAfterViewChecked:f,ngOnDestroy:g}=o;a&&(n.contentHooks??=[]).push(-t,a),u&&((n.contentHooks??=[]).push(t,u),(n.contentCheckHooks??=[]).push(t,u)),d&&(n.viewHooks??=[]).push(-t,d),f&&((n.viewHooks??=[]).push(t,f),(n.viewCheckHooks??=[]).push(t,f)),g!=null&&(n.destroyHooks??=[]).push(t,g)}}function Em(n,e,t){$A(n,e,3,t)}function Im(n,e,t,r){(n[Ce]&3)===t&&$A(n,e,t,r)}function Kw(n,e){let t=n[Ce];(t&3)===e&&(t&=16383,t+=1,n[Ce]=t)}function $A(n,e,t,r){let i=r!==void 0?n[Sa]&65535:0,o=r??-1,a=e.length-1,u=0;for(let d=i;d<a;d++)if(typeof e[d+1]=="number"){if(u=e[d],r!=null&&u>=r)break}else e[d]<0&&(n[Sa]+=65536),(u<o||o==-1)&&(hV(n,t,e,d),n[Sa]=(n[Sa]&4294901760)+d+2),d++}function aA(n,e){nt(4,n,e);let t=Pe(null);try{e.call(n)}finally{Pe(t),nt(5,n,e)}}function hV(n,e,t,r){let i=t[r]<0,o=t[r+1],a=i?-t[r]:t[r],u=n[a];i?n[Ce]>>14<n[Sa]>>16&&(n[Ce]&3)===e&&(n[Ce]+=16384,aA(u,o)):aA(u,o)}var bu=-1,ka=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function fV(n){return(n.flags&8)!==0}function pV(n){return(n.flags&16)!==0}function mV(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],a=t[r++],u=t[r++];n.setAttribute(e,a,u,o)}else{let o=i,a=t[++r];gV(o)?n.setProperty(e,o,a):n.setAttribute(e,o,a),r++}}return r}function HA(n){return n===3||n===4||n===6}function gV(n){return n.charCodeAt(0)===64}function Tu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?cA(n,t,i,null,e[++r]):cA(n,t,i,null,null))}}return n}function cA(n,e,t,r,i){let o=0,a=n.length;if(e===-1)a=-1;else for(;o<n.length;){let u=n[o++];if(typeof u=="number"){if(u===e){a=-1;break}else if(u>e){a=o-1;break}}}for(;o<n.length;){let u=n[o];if(typeof u=="number")break;if(u===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}a!==-1&&(n.splice(a,0,e),o=a+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function zA(n){return n!==bu}function Dm(n){return n&32767}function _V(n){return n>>16}function Sm(n,e){let t=_V(n),r=e;for(;t>0;)r=r[Ca],t--;return r}var rE=!0;function uA(n){let e=rE;return rE=n,e}var vV=256,qA=vV-1,WA=5,yV=0,Ii={};function wV(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ta)&&(r=t[Ta]),r==null&&(r=t[Ta]=yV++);let i=r&qA,o=1<<i;e.data[n+(i>>WA)]|=o}function Am(n,e){let t=GA(n,e);if(t!==-1)return t;let r=e[Me];r.firstCreatePass&&(n.injectorIndex=e.length,Zw(r.data,n),Zw(e,null),Zw(r.blueprint,null));let i=IE(n,e),o=n.injectorIndex;if(zA(i)){let a=Dm(i),u=Sm(i,e),d=u[Me].data;for(let f=0;f<8;f++)e[o+f]=u[a+f]|d[a+f]}return e[o+8]=i,o}function Zw(n,e){n.push(0,0,0,0,0,0,0,0,e)}function GA(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function IE(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=JA(i),r===null)return bu;if(t++,i=i[Ca],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return bu}function iE(n,e,t){wV(n,e,t)}function EV(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(HA(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function KA(n,e,t){if(t&8||n!==void 0)return n;im(e,"NodeInjector")}function ZA(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[as],o=cr(void 0);try{return i?i.get(e,r,t&8):mw(e,r,t&8)}finally{cr(o)}}return KA(r,e,t)}function QA(n,e,t,r=0,i){if(n!==null){if(e[Ce]&2048&&!(r&2)){let a=DV(n,e,t,r,Ii);if(a!==Ii)return a}let o=YA(n,e,t,r,Ii);if(o!==Ii)return o}return ZA(e,t,r,i)}function YA(n,e,t,r,i){let o=TV(t);if(typeof o=="function"){if(!jw(e,n,r))return r&1?KA(i,t,r):ZA(e,t,r,i);try{let a;if(a=o(r),a==null&&!(r&8))im(t);else return a}finally{Bw()}}else if(typeof o=="number"){let a=null,u=GA(n,e),d=bu,f=r&1?e[Dr][Cr]:null;for((u===-1||r&4)&&(d=u===-1?IE(n,e):e[u+8],d===bu||!dA(r,!1)?u=-1:(a=e[Me],u=Dm(d),e=Sm(d,e)));u!==-1;){let g=e[Me];if(lA(o,u,g.data)){let y=IV(u,e,t,a,r,f);if(y!==Ii)return y}d=e[u+8],d!==bu&&dA(r,e[Me].data[u+8]===f)&&lA(o,u,e)?(a=g,u=Dm(d),e=Sm(d,e)):u=-1}}return i}function IV(n,e,t,r,i,o){let a=e[Me],u=a.data[n+8],d=r==null?us(u)&&rE:r!=a&&(u.type&3)!==0,f=i&1&&o===u,g=bV(u,a,t,d,f);return g!==null?Rm(e,a,g,u,i):Ii}function bV(n,e,t,r,i){let o=n.providerIndexes,a=e.data,u=o&1048575,d=n.directiveStart,f=n.directiveEnd,g=o>>20,y=r?u:u+g,E=i?u+g:f;for(let b=y;b<E;b++){let N=a[b];if(b<d&&t===N||b>=d&&N.type===t)return b}if(i){let b=a[d];if(b&&wi(b)&&b.type===t)return d}return null}function Rm(n,e,t,r,i){let o=n[t],a=e.data;if(o instanceof ka){let u=o;if(u.resolving){let b=wS(a[t]);throw pw(b)}let d=uA(u.canSeeViewProviders);u.resolving=!0;let f=a[t].type||a[t],g,y=u.injectImpl?cr(u.injectImpl):null,E=jw(n,r,0);try{o=n[t]=u.factory(void 0,i,a,n,r),e.firstCreatePass&&t>=r.directiveStart&&dV(t,a[t],e)}finally{y!==null&&cr(y),uA(d),u.resolving=!1,Bw()}}return o}function TV(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Ta)?n[Ta]:void 0;return typeof e=="number"?e>=0?e&qA:CV:e}function lA(n,e,t){let r=1<<n;return!!(t[e+(n>>WA)]&r)}function dA(n,e){return!(n&2)&&!(n&1&&e)}var Na=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return QA(this._tNode,this._lView,e,wa(r),t)}};function CV(){return new Na(rn(),Je())}function Gr(n){return Au(()=>{let e=n.prototype.constructor,t=e[Td]||oE(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Td]||oE(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function oE(n){return aw(n)?()=>{let e=oE(gn(n));return e&&e()}:Ea(n)}function DV(n,e,t,r,i){let o=n,a=e;for(;o!==null&&a!==null&&a[Ce]&2048&&!vu(a);){let u=YA(o,a,t,r|2,Ii);if(u!==Ii)return u;let d=o.parent;if(!d){let f=a[Cw];if(f){let g=f.get(t,Ii,r);if(g!==Ii)return g}d=JA(a),a=a[Ca]}o=d}return i}function JA(n){let e=n[Me],t=e.type;return t===2?e.declTNode:t===1?n[Cr]:null}function Gd(n){return EV(rn(),n)}function SV(){return $m(rn(),Je())}function $m(n,e){return new vo(zr(n,e))}var vo=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=SV}return n})();function XA(n){return(n.flags&128)===128}var bE=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(bE||{}),eR=new Map,AV=0;function RV(){return AV++}function xV(n){eR.set(n[Nd],n)}function sE(n){eR.delete(n[Nd])}var hA="__ngContext__";function Cu(n,e){yi(e)?(n[hA]=e[Nd],xV(e)):n[hA]=e}function tR(n){return rR(n[_u])}function nR(n){return rR(n[Tr])}function rR(n){for(;n!==null&&!Hr(n);)n=n[Tr];return n}var aE;function TE(n){aE=n}function iR(){if(aE!==void 0)return aE;if(typeof document<"u")return document;throw new te(210,!1)}var Hm=new J("",{providedIn:"root",factory:()=>MV}),MV="ng",zm=new J(""),Ua=new J("",{providedIn:"platform",factory:()=>"unknown"});var qm=new J("",{providedIn:"root",factory:()=>iR().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var PV="h",NV="b";var oR=!1,sR=new J("",{providedIn:"root",factory:()=>oR});var CE=new J("");var kV=(n,e,t,r)=>{};function OV(n,e,t,r){kV(n,e,t,r)}function DE(n){return(n.flags&32)===32}var LV=()=>null;function aR(n,e,t=!1){return LV(n,e,t)}function cR(n,e){let t=n.contentQueries;if(t!==null){let r=Pe(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],a=t[i+1];if(a!==-1){let u=n.data[a];Uw(o),u.contentQueries(2,e[a],a)}}}finally{Pe(r)}}}function cE(n,e,t){Uw(0);let r=Pe(null);try{e(n,t)}finally{Pe(r)}}function uR(n,e,t){if(Dw(e)){let r=Pe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let a=i;a<o;a++){let u=n.data[a];if(u.contentQueries){let d=t[a];u.contentQueries(1,d,a)}}}finally{Pe(r)}}}var go=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(go||{});var ym;function FV(){if(ym===void 0&&(ym=null,Dd.trustedTypes))try{ym=Dd.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ym}function fA(n){return FV()?.createScriptURL(n)||n}var xm=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${nm})`}};function Kd(n){return n instanceof xm?n.changingThisBreaksApplicationSecurity:n}function SE(n,e){let t=lR(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${nm})`)}return t===e}function lR(n){return n instanceof xm&&n.getTypeName()||null}var VV=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function dR(n){return n=String(n),n.match(VV)?n:"unsafe:"+n}var Wm=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Wm||{});function hR(n){let e=pR();return e?e.sanitize(Wm.URL,n)||"":SE(n,"URL")?Kd(n):dR(Ad(n))}function fR(n){let e=pR();if(e)return fA(e.sanitize(Wm.RESOURCE_URL,n)||"");if(SE(n,"ResourceURL"))return fA(Kd(n));throw new te(904,!1)}function UV(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?fR:hR}function AE(n,e,t){return UV(e,t)(n)}function pR(){let n=Je();return n&&n[vi].sanitizer}function mR(n){return n instanceof Function?n():n}function jV(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var gR="ng-template";function BV(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&jV(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(RE(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function RE(n){return n.type===4&&n.value!==gR}function $V(n,e,t){let r=n.type===4&&!t?gR:n.value;return e===r}function HV(n,e,t){let r=4,i=n.attrs,o=i!==null?WV(i):0,a=!1;for(let u=0;u<e.length;u++){let d=e[u];if(typeof d=="number"){if(!a&&!Wr(r)&&!Wr(d))return!1;if(a&&Wr(d))continue;a=!1,r=d|r&1;continue}if(!a)if(r&4){if(r=2|r&1,d!==""&&!$V(n,d,t)||d===""&&e.length===1){if(Wr(r))return!1;a=!0}}else if(r&8){if(i===null||!BV(n,i,d,t)){if(Wr(r))return!1;a=!0}}else{let f=e[++u],g=zV(d,i,RE(n),t);if(g===-1){if(Wr(r))return!1;a=!0;continue}if(f!==""){let y;if(g>o?y="":y=i[g+1].toLowerCase(),r&2&&f!==y){if(Wr(r))return!1;a=!0}}}}return Wr(r)||a}function Wr(n){return(n&1)===0}function zV(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let a=e[i];if(a===n)return i;if(a===3||a===6)o=!0;else if(a===1||a===2){let u=e[++i];for(;typeof u=="string";)u=e[++i];continue}else{if(a===4)break;if(a===0){i+=4;continue}}i+=o?1:2}return-1}else return GV(e,n)}function qV(n,e,t=!1){for(let r=0;r<e.length;r++)if(HV(n,e[r],t))return!0;return!1}function WV(n){for(let e=0;e<n.length;e++){let t=n[e];if(HA(t))return e}return n.length}function GV(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function pA(n,e){return n?":not("+e.trim()+")":e}function KV(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let a=n[t];if(typeof a=="string")if(r&2){let u=n[++t];i+="["+a+(u.length>0?'="'+u+'"':"")+"]"}else r&8?i+="."+a:r&4&&(i+=" "+a);else i!==""&&!Wr(a)&&(e+=pA(o,i),i=""),r=a,o=o||!Wr(r);t++}return i!==""&&(e+=pA(o,i)),e}function ZV(n){return n.map(KV).join(",")}function QV(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Wr(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var hs={};function YV(n,e){return n.createText(e)}function JV(n,e,t){n.setValue(e,t)}function _R(n,e,t){return n.createElement(e,t)}function Mm(n,e,t,r,i){n.insertBefore(e,t,r,i)}function vR(n,e,t){n.appendChild(e,t)}function mA(n,e,t,r,i){r!==null?Mm(n,e,t,r,i):vR(n,e,t)}function XV(n,e,t,r){n.removeChild(null,e,t,r)}function e2(n,e,t){n.setAttribute(e,"style",t)}function t2(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function yR(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&mV(n,e,r),i!==null&&t2(n,e,i),o!==null&&e2(n,e,o)}function xE(n,e,t,r,i,o,a,u,d,f,g){let y=Wn+r,E=y+i,b=n2(y,E),N=typeof f=="function"?f():f;return b[Me]={type:n,blueprint:b,template:t,queries:null,viewQuery:u,declTNode:e,data:b.slice().fill(null,y),bindingStartIndex:y,expandoStartIndex:E,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:d,consts:N,incompleteFirstPass:!1,ssrId:g}}function n2(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:hs);return t}function r2(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=xE(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function ME(n,e,t,r,i,o,a,u,d,f,g){let y=e.blueprint.slice();return y[$r]=i,y[Ce]=r|4|128|8|64|1024,(f!==null||n&&n[Ce]&2048)&&(y[Ce]|=2048),Aw(y),y[_n]=y[Ca]=n,y[Tn]=t,y[vi]=a||n&&n[vi],y[vt]=u||n&&n[vt],y[as]=d||n&&n[as]||null,y[Cr]=o,y[Nd]=RV(),y[Pd]=g,y[Cw]=f,y[Dr]=e.type==2?n[Dr]:y,y}function i2(n,e,t){let r=zr(e,n),i=r2(t),o=n[vi].rendererFactory,a=PE(n,ME(n,i,null,wR(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=a}function wR(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function ER(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function PE(n,e){return n[_u]?n[Tw][Tr]=e:n[_u]=e,n[Tw]=e,e}function X(n=1){IR(kn(),Je(),Pa()+n,!1)}function IR(n,e,t,r){if(!r)if((e[Ce]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Em(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Im(e,o,0,t)}ls(t)}var Gm=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Gm||{});function uE(n,e,t,r){let i=Pe(null);try{let[o,a,u]=n.inputs[t],d=null;(a&Gm.SignalBased)!==0&&(d=e[o][bn]),d!==null&&d.transformFn!==void 0?r=d.transformFn(r):u!==null&&(r=u.call(e,r)),n.setInput!==null?n.setInput(e,d,r,t,o):FA(e,d,o,r)}finally{Pe(i)}}var bi=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(bi||{}),o2;function NE(n,e){return o2(n,e)}var Du=new Set,Km=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Km||{}),ja=new J(""),gA=new Set;function Ru(n){gA.has(n)||(gA.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var bR=!1,lE=class extends Bt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,PS()&&(this.destroyRef=B(qr,{optional:!0})??void 0,this.pendingTasks=B(Ei,{optional:!0})??void 0)}emit(e){let t=Pe(null);try{super.next(e)}finally{Pe(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),a=r;if(e&&typeof e=="object"){let d=e;i=d.next?.bind(d),o=d.error?.bind(d),a=d.complete?.bind(d)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),a&&(a=this.wrapInTimeout(a)));let u=super.subscribe({next:i,error:o,complete:a});return e instanceof At&&e.add(u),u}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Ht=lE;function TR(n){let e,t;function r(){n=Bd;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function _A(n){return queueMicrotask(()=>n()),()=>{n=Bd}}var kE="isAngularZone",Pm=kE+"_ID",s2=0,Ge=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ht(!1);onMicrotaskEmpty=new Ht(!1);onStable=new Ht(!1);onError=new Ht(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=bR}=e;if(typeof Zone>"u")throw new te(908,!1);Zone.assertZonePatched();let a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!i&&r,a.shouldCoalesceRunChangeDetection=i,a.callbackScheduled=!1,a.scheduleInRootZone=o,u2(a)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(kE)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new te(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new te(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+i,e,a2,Bd,Bd);try{return o.runTask(a,t,r)}finally{o.cancelTask(a)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},a2={};function OE(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function c2(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){TR(()=>{n.callbackScheduled=!1,dE(n),n.isCheckStableRunning=!0,OE(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),dE(n)}function u2(n){let e=()=>{c2(n)},t=s2++;n._inner=n._inner.fork({name:"angular",properties:{[kE]:!0,[Pm]:t,[Pm+t]:!0},onInvokeTask:(r,i,o,a,u,d)=>{if(l2(d))return r.invokeTask(o,a,u,d);try{return vA(n),r.invokeTask(o,a,u,d)}finally{(n.shouldCoalesceEventChangeDetection&&a.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),yA(n)}},onInvoke:(r,i,o,a,u,d,f)=>{try{return vA(n),r.invoke(o,a,u,d,f)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!d2(d)&&e(),yA(n)}},onHasTask:(r,i,o,a)=>{r.hasTask(o,a),i===o&&(a.change=="microTask"?(n._hasPendingMicrotasks=a.microTask,dE(n),OE(n)):a.change=="macroTask"&&(n.hasPendingMacrotasks=a.macroTask))},onHandleError:(r,i,o,a)=>(r.handleError(o,a),n.runOutsideAngular(()=>n.onError.emit(a)),!1)})}function dE(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function vA(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function yA(n){n._nesting--,OE(n)}var Nm=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ht;onMicrotaskEmpty=new Ht;onStable=new Ht;onError=new Ht;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function l2(n){return CR(n,"__ignore_ng_zone__")}function d2(n){return CR(n,"__scheduler_tick__")}function CR(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var LE=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})(),DR=[0,1,2,3],SR=(()=>{class n{ngZone=B(Ge);scheduler=B(ho);errorHandler=B(Br,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){B(ja,{optional:!0})}execute(){let t=this.sequences.size>0;t&&nt(16),this.executing=!0;for(let r of DR)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&nt(17)}register(t){let{view:r}=t;r!==void 0?((r[Ra]??=[]).push(t),yu(r),r[Ce]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Km.AFTER_NEXT_RENDER,t):t()}static \u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})(),km=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,a=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=a,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Ra];e&&(this.view[Ra]=e.filter(t=>t!==this))}};function Zm(n,e){let t=e?.injector??B(_t);return Ru("NgAfterNextRender"),f2(n,t,e,!0)}function h2(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function f2(n,e,t,r){let i=e.get(LE);i.impl??=e.get(SR);let o=e.get(ja,null,{optional:!0}),a=t?.manualCleanup!==!0?e.get(qr):null,u=e.get(gm,null,{optional:!0}),d=new km(i.impl,h2(n),u?.view,r,a,o?.snapshot(null));return i.impl.register(d),d}var p2=new J("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function AR(n,e,t){let r=n.get(p2);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function m2(n,e){for(let[t,r]of e)AR(n,r.animateFns)}function wA(n,e,t,r){let i=n?.[Od]?.enter;e!==null&&i&&i.has(t.index)&&m2(r,i)}function Iu(n,e,t,r,i,o,a,u){if(i!=null){let d,f=!1;Hr(i)?d=i:yi(i)&&(f=!0,i=i[$r]);let g=Sr(i);n===0&&r!==null?(wA(u,r,o,t),a==null?vR(e,r,g):Mm(e,r,g,a||null,!0)):n===1&&r!==null?(wA(u,r,o,t),Mm(e,r,g,a||null,!0)):n===2?EA(u,o,t,y=>{XV(e,g,f,y)}):n===3&&EA(u,o,t,()=>{e.destroyNode(g)}),d!=null&&A2(e,n,t,d,o,r,a)}}function g2(n,e){RR(n,e),e[$r]=null,e[Cr]=null}function _2(n,e,t,r,i,o){r[$r]=i,r[Cr]=e,Qm(n,r,t,1,i,o)}function RR(n,e){e[vi].changeDetectionScheduler?.notify(9),Qm(n,e,e[vt],2,null,null)}function v2(n){let e=n[_u];if(!e)return Qw(n[Me],n);for(;e;){let t=null;if(yi(e))t=e[_u];else{let r=e[Gn];r&&(t=r)}if(!t){for(;e&&!e[Tr]&&e!==n;)yi(e)&&Qw(e[Me],e),e=e[_n];e===null&&(e=n),yi(e)&&Qw(e[Me],e),t=e&&e[Tr]}e=t}}function FE(n,e){let t=n[Fd],r=t.indexOf(e);t.splice(r,1)}function xR(n,e){if(xa(e))return;let t=e[vt];t.destroyNode&&Qm(n,e,t,3,null,null),v2(e)}function Qw(n,e){if(xa(e))return;let t=Pe(null);try{e[Ce]&=-129,e[Ce]|=256,e[hr]&&vd(e[hr]),E2(n,e),w2(n,e),e[Me].type===1&&e[vt].destroy();let r=e[Da];if(r!==null&&Hr(e[_n])){r!==e[_n]&&FE(r,e);let i=e[Aa];i!==null&&i.detachView(n)}sE(e)}finally{Pe(t)}}function EA(n,e,t,r){let i=n?.[Od];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Du.add(n),AR(t,()=>{if(i.leave&&i.leave.has(e.index)){let a=i.leave.get(e.index),u=[];if(a){for(let d=0;d<a.animateFns.length;d++){let f=a.animateFns[d],{promise:g}=f();u.push(g)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(u),y2(n,r)}else n&&Du.delete(n),r(!1)},i)}function y2(n,e){let t=n[Od]?.running;if(t){t.then(()=>{n[Od].running=void 0,Du.delete(n),e(!0)});return}e(!1)}function w2(n,e){let t=n.cleanup,r=e[gu];if(t!==null)for(let a=0;a<t.length-1;a+=2)if(typeof t[a]=="string"){let u=t[a+3];u>=0?r[u]():r[-u].unsubscribe(),a+=2}else{let u=r[t[a+1]];t[a].call(u)}r!==null&&(e[gu]=null);let i=e[uo];if(i!==null){e[uo]=null;for(let a=0;a<i.length;a++){let u=i[a];u()}}let o=e[kd];if(o!==null){e[kd]=null;for(let a of o)a.destroy()}}function E2(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ka)){let o=t[r+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let u=i[o[a]],d=o[a+1];nt(4,u,d);try{d.call(u)}finally{nt(5,u,d)}}else{nt(4,i,o);try{o.call(i)}finally{nt(5,i,o)}}}}}function I2(n,e,t){return b2(n,e.parent,t)}function b2(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[$r];if(us(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===go.None||i===go.Emulated)return null}return zr(r,t)}function T2(n,e,t){return D2(n,e,t)}function C2(n,e,t){return n.type&40?zr(n,t):null}var D2=C2,IA;function VE(n,e,t,r){let i=I2(n,r,e),o=e[vt],a=r.parent||e[Cr],u=T2(a,r,e);if(i!=null)if(Array.isArray(t))for(let d=0;d<t.length;d++)mA(o,i,t[d],u,!1);else mA(o,i,t,u,!1);IA!==void 0&&IA(o,r,e,t,i)}function $d(n,e){if(e!==null){let t=e.type;if(t&3)return zr(e,n);if(t&4)return hE(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return $d(n,r);{let i=n[e.index];return Hr(i)?hE(-1,i):Sr(i)}}else{if(t&128)return $d(n,e.next);if(t&32)return NE(e,n)()||Sr(n[e.index]);{let r=MR(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=is(n[Dr]);return $d(i,r)}else return $d(n,e.next)}}}return null}function MR(n,e){if(e!==null){let r=n[Dr][Cr],i=e.projection;return r.projection[i]}return null}function hE(n,e){let t=Gn+n+1;if(t<e.length){let r=e[t],i=r[Me].firstChild;if(i!==null)return $d(r,i)}return e[cs]}function UE(n,e,t,r,i,o,a){for(;t!=null;){let u=r[as];if(t.type===128){t=t.next;continue}let d=r[t.index],f=t.type;if(a&&e===0&&(d&&Cu(Sr(d),r),t.flags|=2),!DE(t))if(f&8)UE(n,e,t.child,r,i,o,!1),Iu(e,n,u,i,d,t,o,r);else if(f&32){let g=NE(t,r),y;for(;y=g();)Iu(e,n,u,i,y,t,o,r);Iu(e,n,u,i,d,t,o,r)}else f&16?S2(n,e,r,t,i,o):Iu(e,n,u,i,d,t,o,r);t=a?t.projectionNext:t.next}}function Qm(n,e,t,r,i,o){UE(t,r,n.firstChild,e,i,o,!1)}function S2(n,e,t,r,i,o){let a=t[Dr],d=a[Cr].projection[r.projection];if(Array.isArray(d))for(let f=0;f<d.length;f++){let g=d[f];Iu(e,n,t[as],i,g,r,o,t)}else{let f=d,g=a[_n];XA(r)&&(f.flags|=128),UE(n,e,f,g,i,o,!0)}}function A2(n,e,t,r,i,o,a){let u=r[cs],d=Sr(r);u!==d&&Iu(e,n,t,o,u,i,a);for(let f=Gn;f<r.length;f++){let g=r[f];Qm(g[Me],g,n,e,o,u)}}function R2(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:bi.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=bi.Important),n.setStyle(t,r,i,o))}}function PR(n,e,t,r,i){let o=Pa(),a=r&2;try{ls(-1),a&&e.length>Wn&&IR(n,e,Wn,!1),nt(a?2:0,i,t),t(r,i)}finally{ls(o),nt(a?3:1,i,t)}}function jE(n,e,t){O2(n,e,t),(t.flags&64)===64&&L2(n,e,t)}function BE(n,e,t=zr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let a=r[o+1],u=a===-1?t(e,n):n[a];n[i++]=u}}}function x2(n,e,t,r){let o=r.get(sR,oR)||t===go.ShadowDom,a=n.selectRootElement(e,o);return M2(a),a}function M2(n){P2(n)}var P2=()=>null;function N2(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function NR(n,e,t,r,i,o){let a=e[Me];if($E(n,a,e,t,r)){us(n)&&k2(e,n.index);return}n.type&3&&(t=N2(t)),kR(n,e,t,r,i,o)}function kR(n,e,t,r,i,o){if(n.type&3){let a=zr(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(a,t,r)}else n.type&12}function k2(n,e){let t=Ar(e,n);t[Ce]&16||(t[Ce]|=64)}function O2(n,e,t){let r=t.directiveStart,i=t.directiveEnd;us(t)&&i2(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Am(t,e);let o=t.initialInputs;for(let a=r;a<i;a++){let u=n.data[a],d=Rm(e,n,a,t);if(Cu(d,e),o!==null&&j2(e,a-r,d,u,t,o),wi(u)){let f=Ar(t.index,e);f[Tn]=Rm(e,n,a,t)}}}function L2(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,a=QS();try{ls(o);for(let u=r;u<i;u++){let d=n.data[u],f=e[u];dm(u),(d.hostBindings!==null||d.hostVars!==0||d.hostAttrs!==null)&&F2(d,f)}}finally{ls(-1),dm(a)}}function F2(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function OR(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];qV(e,o.selectors,!1)&&(r??=[],wi(o)?r.unshift(o):r.push(o))}return r}function V2(n,e,t,r,i,o){let a=zr(n,e);U2(e[vt],a,o,n.value,t,r,i)}function U2(n,e,t,r,i,o,a){if(o==null)n.removeAttribute(e,i,t);else{let u=a==null?Ad(o):a(o,r||"",i);n.setAttribute(e,i,u,t)}}function j2(n,e,t,r,i,o){let a=o[e];if(a!==null)for(let u=0;u<a.length;u+=2){let d=a[u],f=a[u+1];uE(r,t,d,f)}}function LR(n,e,t,r,i){let o=Wn+t,a=e[Me],u=i(a,e,n,r,t);e[o]=u,wu(n,!0);let d=n.type===2;return d?(yR(e[vt],u,n),(BS()===0||Vd(n))&&Cu(u,e),$S()):Cu(u,e),pm()&&(!d||!DE(n))&&VE(a,e,u,n),n}function FR(n){let e=n;return Lw()?qS():(e=e.parent,wu(e,!1)),e}function B2(n,e){let t=n[as];if(!t)return;let r;try{r=t.get(Kn,null)}catch{r=null}r?.(e)}function $E(n,e,t,r,i){let o=n.inputs?.[r],a=n.hostDirectiveInputs?.[r],u=!1;if(a)for(let d=0;d<a.length;d+=2){let f=a[d],g=a[d+1],y=e.data[f];uE(y,t[f],g,i),u=!0}if(o)for(let d of o){let f=t[d],g=e.data[d];uE(g,f,r,i),u=!0}return u}function $2(n,e){let t=Ar(e,n),r=t[Me];H2(r,t);let i=t[$r];i!==null&&t[Pd]===null&&(t[Pd]=aR(i,t[as])),nt(18),HE(r,t,t[Tn]),nt(19,t[Tn])}function H2(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function HE(n,e,t){hm(e);try{let r=n.viewQuery;r!==null&&cE(1,r,t);let i=n.template;i!==null&&PR(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Aa]?.finishViewCreation(n),n.staticContentQueries&&cR(n,e),n.staticViewQueries&&cE(2,n.viewQuery,t);let o=n.components;o!==null&&z2(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Ce]&=-5,fm()}}function z2(n,e){for(let t=0;t<e.length;t++)$2(n,e[t])}function q2(n,e,t,r){let i=Pe(null);try{let o=e.tView,u=n[Ce]&4096?4096:16,d=ME(n,o,t,u,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),f=n[e.index];d[Da]=f;let g=n[Aa];return g!==null&&(d[Aa]=g.createEmbeddedView(o)),HE(o,d,t),d}finally{Pe(i)}}function bA(n,e){return!e||e.firstChild===null||XA(n)}function zd(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Sr(o)),Hr(o)&&VR(o,r);let a=t.type;if(a&8)zd(n,e,t.child,r);else if(a&32){let u=NE(t,e),d;for(;d=u();)r.push(d)}else if(a&16){let u=MR(e,t);if(Array.isArray(u))r.push(...u);else{let d=is(e[Dr]);zd(d[Me],d,u,r,!0)}}t=i?t.projectionNext:t.next}return r}function VR(n,e){for(let t=Gn;t<n.length;t++){let r=n[t],i=r[Me].firstChild;i!==null&&zd(r[Me],r,i,e)}n[cs]!==n[$r]&&e.push(n[cs])}function UR(n){if(n[Ra]!==null){for(let e of n[Ra])e.impl.addSequence(e);n[Ra].length=0}}var jR=[];function W2(n){return n[hr]??G2(n)}function G2(n){let e=jR.pop()??Object.create(Z2);return e.lView=n,e}function K2(n){n.lView[hr]!==n&&(n.lView=null,jR.push(n))}var Z2=we(Q({},Zc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{yu(n.lView)},consumerOnSignalRead(){this.lView[hr]=this}});function Q2(n){let e=n[hr]??Object.create(Y2);return e.lView=n,e}var Y2=we(Q({},Zc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=is(n.lView);for(;e&&!BR(e[Me]);)e=is(e);e&&Rw(e)},consumerOnSignalRead(){this.lView[hr]=this}});function BR(n){return n.type!==2}function $R(n){if(n[kd]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[kd])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Ce]&8192)}}var J2=100;function HR(n,e=0){let r=n[vi].rendererFactory,i=!1;i||r.begin?.();try{X2(n,e)}finally{i||r.end?.()}}function X2(n,e){let t=Fw();try{Vw(!0),fE(n,e);let r=0;for(;Ud(n);){if(r===J2)throw new te(103,!1);r++,fE(n,1)}}finally{Vw(t)}}function eU(n,e,t,r){if(xa(e))return;let i=e[Ce],o=!1,a=!1;hm(e);let u=!0,d=null,f=null;o||(BR(n)?(f=W2(e),d=Yc(f)):wp()===null?(u=!1,f=Q2(e),d=Yc(f)):e[hr]&&(vd(e[hr]),e[hr]=null));try{Aw(e),WS(n.bindingStartIndex),t!==null&&PR(n,e,t,2,r);let g=(i&3)===3;if(!o)if(g){let b=n.preOrderCheckHooks;b!==null&&Em(e,b,null)}else{let b=n.preOrderHooks;b!==null&&Im(e,b,0,null),Kw(e,0)}if(a||tU(e),$R(e),zR(e,0),n.contentQueries!==null&&cR(n,e),!o)if(g){let b=n.contentCheckHooks;b!==null&&Em(e,b)}else{let b=n.contentHooks;b!==null&&Im(e,b,1),Kw(e,1)}rU(n,e);let y=n.components;y!==null&&WR(e,y,0);let E=n.viewQuery;if(E!==null&&cE(2,E,r),!o)if(g){let b=n.viewCheckHooks;b!==null&&Em(e,b)}else{let b=n.viewHooks;b!==null&&Im(e,b,2),Kw(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[am]){for(let b of e[am])b();e[am]=null}o||(UR(e),e[Ce]&=-73)}catch(g){throw o||yu(e),g}finally{f!==null&&(gd(f,d),u&&K2(f)),fm()}}function zR(n,e){for(let t=tR(n);t!==null;t=nR(t))for(let r=Gn;r<t.length;r++){let i=t[r];qR(i,e)}}function tU(n){for(let e=tR(n);e!==null;e=nR(e)){if(!(e[Ce]&2))continue;let t=e[Fd];for(let r=0;r<t.length;r++){let i=t[r];Rw(i)}}}function nU(n,e,t){nt(18);let r=Ar(e,n);qR(r,t),nt(19,r[Tn])}function qR(n,e){um(n)&&fE(n,e)}function fE(n,e){let r=n[Me],i=n[Ce],o=n[hr],a=!!(e===0&&i&16);if(a||=!!(i&64&&e===0),a||=!!(i&1024),a||=!!(o?.dirty&&_d(o)),a||=!1,o&&(o.dirty=!1),n[Ce]&=-9217,a)eU(r,n,r.template,n[Tn]);else if(i&8192){let u=Pe(null);try{$R(n),zR(n,1);let d=r.components;d!==null&&WR(n,d,1),UR(n)}finally{Pe(u)}}}function WR(n,e,t){for(let r=0;r<e.length;r++)nU(n,e[r],t)}function rU(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ls(~i);else{let o=i,a=t[++r],u=t[++r];ZS(a,o);let d=e[o];nt(24,d),u(2,d),nt(25,d)}}}finally{ls(-1)}}function zE(n,e){let t=Fw()?64:1088;for(n[vi].changeDetectionScheduler?.notify(e);n;){n[Ce]|=t;let r=is(n);if(vu(n)&&!r)return n;n=r}return null}function GR(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function iU(n,e,t,r=!0){let i=e[Me];if(oU(i,e,n,t),r){let a=hE(t,n),u=e[vt],d=u.parentNode(n[cs]);d!==null&&_2(i,n[Cr],u,e,d,a)}let o=e[Pd];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function pE(n,e){if(n.length<=Gn)return;let t=Gn+e,r=n[t];if(r){let i=r[Da];i!==null&&i!==n&&FE(i,r),e>0&&(n[t-1][Tr]=r[Tr]);let o=Rd(n,Gn+e);g2(r[Me],r);let a=o[Aa];a!==null&&a.detachView(o[Me]),r[_n]=null,r[Tr]=null,r[Ce]&=-129}return r}function oU(n,e,t,r){let i=Gn+r,o=t.length;r>0&&(t[i-1][Tr]=e),r<o-Gn?(e[Tr]=t[i],gw(t,Gn+r,e)):(t.push(e),e[Tr]=null),e[_n]=t;let a=e[Da];a!==null&&t!==a&&KR(a,e);let u=e[Aa];u!==null&&u.insertView(n),lm(e),e[Ce]|=128}function KR(n,e){let t=n[Fd],r=e[_n];if(yi(r))n[Ce]|=2;else{let i=r[_n][Dr];e[Dr]!==i&&(n[Ce]|=2)}t===null?n[Fd]=[e]:t.push(e)}var ds=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Me];return zd(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Tn]}set context(e){this._lView[Tn]=e}get destroyed(){return xa(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[_n];if(Hr(e)){let t=e[Ld],r=t?t.indexOf(this):-1;r>-1&&(pE(e,r),Rd(t,r))}this._attachedToViewContainer=!1}xR(this._lView[Me],this._lView)}onDestroy(e){xw(this._lView,e)}markForCheck(){zE(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ce]&=-129}reattach(){lm(this._lView),this._lView[Ce]|=128}detectChanges(){this._lView[Ce]|=1024,HR(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=vu(this._lView),t=this._lView[Da];t!==null&&!e&&FE(t,this._lView),RR(this._lView[Me],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new te(902,!1);this._appRef=e;let t=vu(this._lView),r=this._lView[Da];r!==null&&!t&&KR(r,this._lView),lm(this._lView)}};var Zd=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=sU;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=q2(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new ds(o)}}return n})();function sU(){return aU(rn(),Je())}function aU(n,e){return n.type&4?new Zd(e,n,$m(n,e)):null}function Ym(n,e,t,r,i){let o=n.data[e];if(o===null)o=cU(n,e,t,r,i),KS()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let a=zS();o.injectorIndex=a===null?-1:a.injectorIndex}return wu(o,!0),o}function cU(n,e,t,r,i){let o=Ow(),a=Lw(),u=a?o:o&&o.parent,d=n.data[e]=lU(n,u,t,e,r,i);return uU(n,d,o,a),d}function uU(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function lU(n,e,t,r,i,o){let a=e?e.injectorIndex:-1,u=0;return HS()&&(u|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:u,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var uX=new RegExp(`^(\\d+)*(${NV}|${PV})*(.*)`);var dU=()=>null;function TA(n,e){return dU(n,e)}var ZR=class{},Jm=class{},mE=class{resolveComponentFactory(e){throw new te(917,!1)}},Qd=class{static NULL=new mE},Oa=class{},fs=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>hU()}return n})();function hU(){let n=Je(),e=rn(),t=Ar(e.index,n);return(yi(t)?t:n)[vt]}var QR=(()=>{class n{static \u0275prov=re({token:n,providedIn:"root",factory:()=>null})}return n})();var bm={},gE=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,bm,r);return i!==bm||t===bm?i:this.parentInjector.get(e,t,r)}};function Om(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number")o=u;else if(o==1)i=sw(i,u);else if(o==2){let d=u,f=e[++a];r=sw(r,d+": "+f+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function ue(n,e=0){let t=Je();if(t===null)return le(n,e);let r=rn();return QA(r,t,gn(n),e)}function qE(){let n="invalid";throw new Error(n)}function YR(n,e,t,r,i){let o=r===null?null:{"":-1},a=i(n,t);if(a!==null){let u=a,d=null,f=null;for(let g of a)if(g.resolveHostDirectives!==null){[u,d,f]=g.resolveHostDirectives(a);break}mU(n,e,t,u,o,d,f)}o!==null&&r!==null&&fU(t,r,o)}function fU(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new te(-301,!1);r.push(e[i],o)}}function pU(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function mU(n,e,t,r,i,o,a){let u=r.length,d=!1;for(let E=0;E<u;E++){let b=r[E];!d&&wi(b)&&(d=!0,pU(n,t,E)),iE(Am(t,e),n,b.type)}EU(t,n.data.length,u);for(let E=0;E<u;E++){let b=r[E];b.providersResolver&&b.providersResolver(b)}let f=!1,g=!1,y=ER(n,e,u,null);u>0&&(t.directiveToIndex=new Map);for(let E=0;E<u;E++){let b=r[E];if(t.mergedAttrs=Tu(t.mergedAttrs,b.hostAttrs),_U(n,t,e,y,b),wU(y,b,i),a!==null&&a.has(b)){let[$,F]=a.get(b);t.directiveToIndex.set(b.type,[y,$+t.directiveStart,F+t.directiveStart])}else(o===null||!o.has(b))&&t.directiveToIndex.set(b.type,y);b.contentQueries!==null&&(t.flags|=4),(b.hostBindings!==null||b.hostAttrs!==null||b.hostVars!==0)&&(t.flags|=64);let N=b.type.prototype;!f&&(N.ngOnChanges||N.ngOnInit||N.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),f=!0),!g&&(N.ngOnChanges||N.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),g=!0),y++}gU(n,t,o)}function gU(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))CA(0,e,i,r),CA(1,e,i,r),SA(e,r,!1);else{let o=t.get(i);DA(0,e,o,r),DA(1,e,o,r),SA(e,r,!0)}}}function CA(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let a;n===0?a=e.inputs??={}:a=e.outputs??={},a[o]??=[],a[o].push(r),JR(e,o)}}function DA(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let a=i[o],u;n===0?u=e.hostDirectiveInputs??={}:u=e.hostDirectiveOutputs??={},u[a]??=[],u[a].push(r,o),JR(e,a)}}function JR(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function SA(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||RE(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let a=null,u=0;for(;u<r.length;){let d=r[u];if(d===0){u+=4;continue}else if(d===5){u+=2;continue}else if(typeof d=="number")break;if(!t&&i.hasOwnProperty(d)){let f=i[d];for(let g of f)if(g===e){a??=[],a.push(d,r[u+1]);break}}else if(t&&o.hasOwnProperty(d)){let f=o[d];for(let g=0;g<f.length;g+=2)if(f[g]===e){a??=[],a.push(f[g+1],r[u+1]);break}}u+=2}n.initialInputs??=[],n.initialInputs.push(a)}function _U(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Ea(i.type,!0)),a=new ka(o,wi(i),ue,null);n.blueprint[r]=a,t[r]=a,vU(n,e,r,ER(n,t,i.hostVars,hs),i)}function vU(n,e,t,r,i){let o=i.hostBindings;if(o){let a=n.hostBindingOpCodes;a===null&&(a=n.hostBindingOpCodes=[]);let u=~e.index;yU(a)!=u&&a.push(u),a.push(t,r,o)}}function yU(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function wU(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;wi(e)&&(t[""]=n)}}function EU(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function XR(n,e,t,r,i,o,a,u){let d=e[Me],f=d.consts,g=Ma(f,a),y=Ym(d,n,t,r,g);return o&&YR(d,e,y,Ma(f,u),i),y.mergedAttrs=Tu(y.mergedAttrs,y.attrs),y.attrs!==null&&Om(y,y.attrs,!1),y.mergedAttrs!==null&&Om(y,y.mergedAttrs,!0),d.queries!==null&&d.queries.elementStart(d,y),y}function ex(n,e){BA(n,e),Dw(e)&&n.queries.elementEnd(e)}function IU(n,e,t,r,i,o){let a=e.consts,u=Ma(a,i),d=Ym(e,n,t,r,u);if(d.mergedAttrs=Tu(d.mergedAttrs,d.attrs),o!=null){let f=Ma(a,o);d.localNames=[];for(let g=0;g<f.length;g+=2)d.localNames.push(f[g],-1)}return d.attrs!==null&&Om(d,d.attrs,!1),d.mergedAttrs!==null&&Om(d,d.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,d),d}function WE(n){return nx(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function tx(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function nx(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function xu(n,e,t){if(t===hs)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Tm(n,e,t){return function r(i){let o=us(n)?Ar(n.index,e):e;zE(o,5);let a=e[Tn],u=AA(e,a,t,i),d=r.__ngNextListenerFn__;for(;d;)u=AA(e,a,d,i)&&u,d=d.__ngNextListenerFn__;return u}}function AA(n,e,t,r){let i=Pe(null);try{return nt(6,e,t),t(r)!==!1}catch(o){return B2(n,o),!1}finally{nt(7,e,t),Pe(i)}}function rx(n,e,t,r,i,o,a,u){let d=Vd(n),f=!1,g=null;if(!r&&d&&(g=TU(e,t,o,n.index)),g!==null){let y=g.__ngLastListenerFn__||g;y.__ngNextListenerFn__=a,g.__ngLastListenerFn__=a,f=!0}else{let y=zr(n,t),E=r?r(y):y;OV(t,E,o,u);let b=i.listen(E,o,u);if(!bU(o)){let N=r?$=>r(Sr($[n.index])):n.index;ix(N,e,t,o,u,b,!1)}}return f}function bU(n){return n.startsWith("animation")||n.startsWith("transition")}function TU(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let a=i[o];if(a===t&&i[o+1]===r){let u=e[gu],d=i[o+2];return u&&u.length>d?u[d]:null}typeof a=="string"&&(o+=2)}return null}function ix(n,e,t,r,i,o,a){let u=e.firstCreatePass?jS(e):null,d=US(t),f=d.length;d.push(i,o),u&&u.push(r,n,f,(f+1)*(a?-1:1))}function RA(n,e,t,r,i,o){let a=e[t],u=e[Me],f=u.data[t].outputs[r],y=a[f].subscribe(o);ix(n.index,u,e,i,o,y,!0)}var _E=Symbol("BINDING");var Lm=class extends Qd{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=po(e);return new La(t,this.ngModule)}};function CU(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Gm.SignalBased)!==0};return i&&(o.transform=i),o})}function DU(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function SU(n,e,t){let r=e instanceof Tt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new gE(t,r):t}function AU(n){let e=n.get(Oa,null);if(e===null)throw new te(407,!1);let t=n.get(QR,null),r=n.get(ho,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function RU(n,e){let t=ox(n);return _R(e,t,t==="svg"?kS:t==="math"?OS:null)}function ox(n){return(n.selectors[0][0]||"div").toLowerCase()}var La=class extends Jm{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=CU(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=DU(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=ZV(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,a){nt(22);let u=Pe(null);try{let d=this.componentDef,f=xU(r,d,a,o),g=SU(d,i||this.ngModule,e),y=AU(g),E=y.rendererFactory.createRenderer(null,d),b=r?x2(E,r,d.encapsulation,g):RU(d,E),N=a?.some(xA)||o?.some(q=>typeof q!="function"&&q.bindings.some(xA)),$=ME(null,f,null,512|wR(d),null,null,y,E,g,null,aR(b,g,!0));$[Wn]=b,hm($);let F=null;try{let q=XR(Wn,$,2,"#host",()=>f.directiveRegistry,!0,0);yR(E,b,q),Cu(b,$),jE(f,$,q),uR(f,q,$),ex(f,q),t!==void 0&&PU(q,this.ngContentSelectors,t),F=Ar(q.index,$),$[Tn]=F[Tn],HE(f,$,null)}catch(q){throw F!==null&&sE(F),sE($),q}finally{nt(23),fm()}return new Fm(this.componentType,$,!!N)}finally{Pe(u)}}};function xU(n,e,t,r){let i=n?["ng-version","20.3.14"]:QV(e.selectors[0]),o=null,a=null,u=0;if(t)for(let g of t)u+=g[_E].requiredVars,g.create&&(g.targetIdx=0,(o??=[]).push(g)),g.update&&(g.targetIdx=0,(a??=[]).push(g));if(r)for(let g=0;g<r.length;g++){let y=r[g];if(typeof y!="function")for(let E of y.bindings){u+=E[_E].requiredVars;let b=g+1;E.create&&(E.targetIdx=b,(o??=[]).push(E)),E.update&&(E.targetIdx=b,(a??=[]).push(E))}}let d=[e];if(r)for(let g of r){let y=typeof g=="function"?g:g.type,E=ww(y);d.push(E)}return xE(0,null,MU(o,a),1,u,d,null,null,null,[i],null)}function MU(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function xA(n){let e=n[_E].kind;return e==="input"||e==="twoWay"}var Fm=class extends ZR{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=cm(t[Me],Wn),this.location=$m(this._tNode,t),this.instance=Ar(this._tNode.index,t)[Tn],this.hostView=this.changeDetectorRef=new ds(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=$E(r,i[Me],i,e,t);this.previousInputValues.set(e,t);let a=Ar(r.index,i);zE(a,1)}get injector(){return new Na(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function PU(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ba=(()=>{class n{static __NG_ELEMENT_ID__=NU}return n})();function NU(){let n=rn();return OU(n,Je())}var kU=Ba,sx=class extends kU{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return $m(this._hostTNode,this._hostLView)}get injector(){return new Na(this._hostTNode,this._hostLView)}get parentInjector(){let e=IE(this._hostTNode,this._hostLView);if(zA(e)){let t=Sm(e,this._hostLView),r=Dm(e),i=t[Me].data[r+8];return new Na(i,t)}else return new Na(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=MA(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Gn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let a=TA(this._lContainer,e.ssrId),u=e.createEmbeddedViewImpl(t||{},o,a);return this.insertImpl(u,i,bA(this._hostTNode,a)),u}createComponent(e,t,r,i,o,a,u){let d=e&&!aV(e),f;if(d)f=t;else{let F=t||{};f=F.index,r=F.injector,i=F.projectableNodes,o=F.environmentInjector||F.ngModuleRef,a=F.directives,u=F.bindings}let g=d?e:new La(po(e)),y=r||this.parentInjector;if(!o&&g.ngModule==null){let q=(d?y:this.parentInjector).get(Tt,null);q&&(o=q)}let E=po(g.componentType??{}),b=TA(this._lContainer,E?.id??null),N=b?.firstChild??null,$=g.create(y,i,N,o,a,u);return this.insertImpl($.hostView,f,bA(this._hostTNode,b)),$}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(LS(i)){let u=this.indexOf(e);if(u!==-1)this.detach(u);else{let d=i[_n],f=new sx(d,d[Cr],d[_n]);f.detach(f.indexOf(e))}}let o=this._adjustIndex(t),a=this._lContainer;return iU(a,i,o,r),e.attachToViewContainerRef(),gw(Yw(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=MA(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=pE(this._lContainer,t);r&&(Rd(Yw(this._lContainer),t),xR(r[Me],r))}detach(e){let t=this._adjustIndex(e,-1),r=pE(this._lContainer,t);return r&&Rd(Yw(this._lContainer),t)!=null?new ds(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function MA(n){return n[Ld]}function Yw(n){return n[Ld]||(n[Ld]=[])}function OU(n,e){let t,r=e[n.index];return Hr(r)?t=r:(t=GR(r,e,null,n),e[n.index]=t,PE(e,t)),FU(t,e,n,r),new sx(t,n,e)}function LU(n,e){let t=n[vt],r=t.createComment(""),i=zr(e,n),o=t.parentNode(i);return Mm(t,o,r,t.nextSibling(i),!1),r}var FU=jU,VU=()=>!1;function UU(n,e,t){return VU(n,e,t)}function jU(n,e,t,r){if(n[cs])return;let i;t.type&8?i=Sr(r):i=LU(e,t),n[cs]=i}var Fa=class{},Xm=class{};var Vm=class extends Fa{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Lm(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=yw(e);this._bootstrapComponents=mR(o.bootstrap),this._r3Injector=$w(e,t,[{provide:Fa,useValue:this},{provide:Qd,useValue:this.componentFactoryResolver},...r],lo(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Um=class extends Xm{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Vm(this.moduleType,e,[])}};var qd=class extends Fa{injector;componentFactoryResolver=new Lm(this);instance=null;constructor(e){super();let t=new ba([...e.providers,{provide:Fa,useValue:this},{provide:Qd,useValue:this.componentFactoryResolver}],e.parent||Md(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Mu(n,e,t=null){return new qd({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var BU=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Ew(!1,t.type),i=r.length>0?Mu([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=re({token:n,providedIn:"environment",factory:()=>new n(le(Tt))})}return n})();function Lt(n){return Au(()=>{let e=ax(n),t=we(Q({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===bE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(BU).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||go.Emulated,styles:n.styles||ur,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Ru("NgStandalone"),cx(t);let r=n.dependencies;return t.directiveDefs=PA(r,$U),t.pipeDefs=PA(r,SS),t.id=qU(t),t})}function $U(n){return po(n)||ww(n)}function Rr(n){return Au(()=>({type:n.type,bootstrap:n.bootstrap||ur,declarations:n.declarations||ur,imports:n.imports||ur,exports:n.exports||ur,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function HU(n,e){if(n==null)return os;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,a,u,d;Array.isArray(i)?(u=i[0],o=i[1],a=i[2]??o,d=i[3]||null):(o=i,a=i,u=Gm.None,d=null),t[o]=[r,u,d],e[o]=a}return t}function zU(n){if(n==null)return os;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Dt(n){return Au(()=>{let e=ax(n);return cx(e),e})}function ax(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||os,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||ur,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:HU(n.inputs,e),outputs:zU(n.outputs),debugInfo:null}}function cx(n){n.features?.forEach(e=>e(n))}function PA(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function qU(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function WU(n){return Object.getPrototypeOf(n.prototype).constructor}function Zn(n){let e=WU(n.type),t=!0,r=[n];for(;e;){let i;if(wi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new te(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let a=n;a.inputs=Jw(n.inputs),a.declaredInputs=Jw(n.declaredInputs),a.outputs=Jw(n.outputs);let u=i.hostBindings;u&&YU(n,u);let d=i.viewQuery,f=i.contentQueries;if(d&&ZU(n,d),f&&QU(n,f),GU(n,i),yS(n.outputs,i.outputs),wi(i)&&i.data.animation){let g=n.data;g.animation=(g.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let a=0;a<o.length;a++){let u=o[a];u&&u.ngInherit&&u(n),u===Zn&&(t=!1)}}e=Object.getPrototypeOf(e)}KU(r)}function GU(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function KU(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Tu(i.hostAttrs,t=Tu(t,i.hostAttrs))}}function Jw(n){return n===os?{}:n===ur?[]:n}function ZU(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function QU(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function YU(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function JU(n,e,t,r,i,o,a,u){if(t.firstCreatePass){n.mergedAttrs=Tu(n.mergedAttrs,n.attrs);let g=n.tView=xE(2,n,i,o,a,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),g.queries=t.queries.embeddedTView(n))}u&&(n.flags|=u),wu(n,!1);let d=ej(t,e,n,r);pm()&&VE(t,e,d,n),Cu(d,e);let f=GR(d,e,d,n);e[r+Wn]=f,PE(e,f),UU(f,n,e)}function XU(n,e,t,r,i,o,a,u,d,f,g){let y=t+Wn,E;return e.firstCreatePass?(E=Ym(e,y,4,a||null,u||null),Pw()&&YR(e,n,E,Ma(e.consts,f),OR),BA(e,E)):E=e.data[y],JU(E,n,e,t,r,i,o,d),Vd(E)&&jE(e,n,E),f!=null&&BE(n,E,g),E}function On(n,e,t,r,i,o,a,u){let d=Je(),f=kn(),g=Ma(f.consts,o);return XU(d,f,n,e,t,r,i,g,void 0,a,u),On}var ej=tj;function tj(n,e,t,r){return mm(!0),e[vt].createComment("")}var GE=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var KE=new J("");function ps(n){return!!n&&typeof n.then=="function"}function ZE(n){return!!n&&typeof n.subscribe=="function"}var QE=new J("");function eg(n){return Nn([{provide:QE,multi:!0,useValue:n}])}var YE=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=B(QE,{optional:!0})??[];injector=B(_t);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Rt(this.injector,i);if(ps(o))t.push(o);else if(ZE(o)){let a=new Promise((u,d)=>{o.subscribe({complete:u,error:d})});t.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Yd=new J("");function ux(){Ry(()=>{let n="";throw new te(600,n)})}function lx(n){return n.isBoundToModule}var nj=10;var ms=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=B(Kn);afterRenderManager=B(LE);zonelessEnabled=B(_m);rootEffectScheduler=B(Gw);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Bt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=B(Ei);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Te(t=>!t))}constructor(){B(ja,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=B(Tt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=_t.NULL){return this._injector.get(Ge).run(()=>{nt(10);let a=t instanceof Jm;if(!this._injector.get(YE).done){let N="";throw new te(405,N)}let d;a?d=t:d=this._injector.get(Qd).resolveComponentFactory(t),this.componentTypes.push(d.componentType);let f=lx(d)?void 0:this._injector.get(Fa),g=r||d.selector,y=d.create(i,[],g,f),E=y.location.nativeElement,b=y.injector.get(KE,null);return b?.registerApplication(E),y.onDestroy(()=>{this.detachView(y.hostView),Hd(this.components,y),b?.unregisterApplication(E)}),this._loadComponent(y),nt(11,y),y})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){nt(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Km.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new te(101,!1);let t=Pe(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Pe(t),this.afterTick.next(),nt(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Oa,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<nj;)nt(14),this.synchronizeOnce(),nt(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Ud(i))continue;let o=r&&!this.zonelessEnabled?0:1;HR(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Ud(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Hd(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Yd,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Hd(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new te(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Hd(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function gs(n,e,t,r){let i=Je(),o=Eu();if(xu(i,o,e)){let a=kn(),u=jd();V2(u,i,n,e,t,r)}return gs}var gX=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function Ft(n,e,t){let r=Je(),i=Eu();if(xu(r,i,e)){let o=kn(),a=jd();NR(a,r,n,e,r[vt],t)}return Ft}function NA(n,e,t,r,i){$E(e,n,t,i?"class":"style",r)}function z(n,e,t,r){let i=Je(),o=i[Me],a=n+Wn,u=o.firstCreatePass?XR(a,i,2,e,OR,Pw(),t,r):o.data[a];if(LR(u,i,n,e,dx),Vd(u)){let d=i[Me];jE(d,i,u),uR(d,u,i)}return r!=null&&BE(i,u),z}function H(){let n=kn(),e=rn(),t=FR(e);return n.firstCreatePass&&ex(n,t),Nw(t)&&kw(),Mw(),t.classesWithoutHost!=null&&fV(t)&&NA(n,t,Je(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&pV(t)&&NA(n,t,Je(),t.stylesWithoutHost,!1),H}function vn(n,e,t,r){return z(n,e,t,r),H(),vn}function Kr(n,e,t,r){let i=Je(),o=i[Me],a=n+Wn,u=o.firstCreatePass?IU(a,o,2,e,t,r):o.data[a];return LR(u,i,n,e,dx),r!=null&&BE(i,u),Kr}function Ti(){let n=rn(),e=FR(n);return Nw(e)&&kw(),Mw(),Ti}function tg(n,e,t,r){return Kr(n,e,t,r),Ti(),tg}var dx=(n,e,t,r,i)=>(mm(!0),_R(e[vt],r,nA()));function _s(){return Je()}function Pu(n,e,t){let r=Je(),i=Eu();if(xu(r,i,e)){let o=kn(),a=jd();kR(a,r,n,e,r[vt],t)}return Pu}var Jd="en-US";var rj=Jd;function hx(n){typeof n=="string"&&(rj=n.toLowerCase().replace(/_/g,"-"))}function _e(n,e,t){let r=Je(),i=kn(),o=rn();return fx(i,r,r[vt],o,n,e,t),_e}function $a(n,e,t){let r=Je(),i=kn(),o=rn();return(o.type&3||t)&&rx(o,i,r,t,r[vt],n,e,Tm(o,r,e)),$a}function fx(n,e,t,r,i,o,a){let u=!0,d=null;if((r.type&3||a)&&(d??=Tm(r,e,o),rx(r,n,e,a,t,i,o,d)&&(u=!1)),u){let f=r.outputs?.[i],g=r.hostDirectiveOutputs?.[i];if(g&&g.length)for(let y=0;y<g.length;y+=2){let E=g[y],b=g[y+1];d??=Tm(r,e,o),RA(r,e,E,b,i,d)}if(f&&f.length)for(let y of f)d??=Tm(r,e,o),RA(r,e,y,i,i,d)}}function Be(n=1){return tA(n)}function wm(n,e){return n<<17|e<<2}function Va(n){return n>>17&32767}function ij(n){return(n&2)==2}function oj(n,e){return n&131071|e<<17}function vE(n){return n|2}function Su(n){return(n&131068)>>2}function Xw(n,e){return n&-131069|e<<2}function sj(n){return(n&1)===1}function yE(n){return n|1}function aj(n,e,t,r,i,o){let a=o?e.classBindings:e.styleBindings,u=Va(a),d=Su(a);n[r]=t;let f=!1,g;if(Array.isArray(t)){let y=t;g=y[1],(g===null||mu(y,g)>0)&&(f=!0)}else g=t;if(i)if(d!==0){let E=Va(n[u+1]);n[r+1]=wm(E,u),E!==0&&(n[E+1]=Xw(n[E+1],r)),n[u+1]=oj(n[u+1],r)}else n[r+1]=wm(u,0),u!==0&&(n[u+1]=Xw(n[u+1],r)),u=r;else n[r+1]=wm(d,0),u===0?u=r:n[d+1]=Xw(n[d+1],r),d=r;f&&(n[r+1]=vE(n[r+1])),kA(n,g,r,!0),kA(n,g,r,!1),cj(e,g,n,r,o),a=wm(u,d),o?e.classBindings=a:e.styleBindings=a}function cj(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&mu(o,e)>=0&&(t[r+1]=yE(t[r+1]))}function kA(n,e,t,r){let i=n[t+1],o=e===null,a=r?Va(i):Su(i),u=!1;for(;a!==0&&(u===!1||o);){let d=n[a],f=n[a+1];uj(d,e)&&(u=!0,n[a+1]=r?yE(f):vE(f)),a=r?Va(f):Su(f)}u&&(n[t+1]=r?vE(i):yE(i))}function uj(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?mu(n,e)>=0:!1}function fr(n,e){return lj(n,e,null,!0),fr}function lj(n,e,t,r){let i=Je(),o=kn(),a=GS(2);if(o.firstUpdatePass&&hj(o,n,a,r),e!==hs&&xu(i,a,e)){let u=o.data[Pa()];_j(o,u,i,i[vt],n,i[a+1]=vj(e,t),r,a)}}function dj(n,e){return e>=n.expandoStartIndex}function hj(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Pa()],a=dj(n,t);yj(o,r)&&e===null&&!a&&(e=!1),e=fj(i,o,e,r),aj(i,o,e,t,a,r)}}function fj(n,e,t,r){let i=YS(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=eE(null,n,e,t,r),t=Wd(t,e.attrs,r),o=null);else{let a=e.directiveStylingLast;if(a===-1||n[a]!==i)if(t=eE(i,n,e,t,r),o===null){let d=pj(n,e,r);d!==void 0&&Array.isArray(d)&&(d=eE(null,n,e,d[1],r),d=Wd(d,e.attrs,r),mj(n,e,r,d))}else o=gj(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function pj(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Su(r)!==0)return n[Va(r)]}function mj(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Va(i)]=r}function gj(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let a=n[o].hostAttrs;r=Wd(r,a,t)}return Wd(r,e.attrs,t)}function eE(n,e,t,r,i){let o=null,a=t.directiveEnd,u=t.directiveStylingLast;for(u===-1?u=t.directiveStart:u++;u<a&&(o=e[u],r=Wd(r,o.hostAttrs,i),o!==n);)u++;return n!==null&&(t.directiveStylingLast=u),r}function Wd(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];typeof a=="number"?i=a:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),DS(n,a,t?!0:e[++o]))}return n===void 0?null:n}function _j(n,e,t,r,i,o,a,u){if(!(e.type&3))return;let d=n.data,f=d[u+1],g=sj(f)?OA(d,e,t,i,Su(f),a):void 0;if(!jm(g)){jm(o)||ij(f)&&(o=OA(d,null,t,i,u,a));let y=Sw(Pa(),t);R2(r,a,y,i,o)}}function OA(n,e,t,r,i,o){let a=e===null,u;for(;i>0;){let d=n[i],f=Array.isArray(d),g=f?d[1]:d,y=g===null,E=t[i+1];E===hs&&(E=y?ur:void 0);let b=y?sm(E,r):g===r?E:void 0;if(f&&!jm(b)&&(b=sm(d,r)),jm(b)&&(u=b,a))return u;let N=n[i+1];i=a?Va(N):Su(N)}if(e!==null){let d=o?e.residualClasses:e.residualStyles;d!=null&&(u=sm(d,r))}return u}function jm(n){return n!==void 0}function vj(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=lo(Kd(n)))),n}function yj(n,e){return(n.flags&(e?8:16))!==0}function K(n,e=""){let t=Je(),r=kn(),i=n+Wn,o=r.firstCreatePass?Ym(r,i,1,e,null):r.data[i],a=wj(r,t,o,e,n);t[i]=a,pm()&&VE(r,t,a,o),wu(o,!1)}var wj=(n,e,t,r,i)=>(mm(!0),YV(e[vt],r));function Ej(n,e,t,r=""){return xu(n,Eu(),t)?e+Ad(t)+r:hs}function Ln(n){return St("",n),Ln}function St(n,e,t){let r=Je(),i=Ej(r,n,e,t);return i!==hs&&Ij(r,Pa(),i),St}function Ij(n,e,t){let r=Sw(e,n);JV(n[vt],r,t)}function rt(n,e,t){zw(e)&&(e=e());let r=Je(),i=Eu();if(xu(r,i,e)){let o=kn(),a=jd();NR(a,r,n,e,r[vt],t)}return rt}function st(n,e){let t=zw(n);return t&&n.set(e),t}function it(n,e){let t=Je(),r=kn(),i=rn();return fx(r,t,t[vt],i,n,e),it}function bj(n,e,t){let r=kn();if(r.firstCreatePass){let i=wi(n);wE(t,r.data,r.blueprint,i,!0),wE(e,r.data,r.blueprint,i,!1)}}function wE(n,e,t,r,i){if(n=gn(n),Array.isArray(n))for(let o=0;o<n.length;o++)wE(n[o],e,t,r,i);else{let o=kn(),a=Je(),u=rn(),d=Ia(n)?n:gn(n.provide),f=bw(n),g=u.providerIndexes&1048575,y=u.directiveStart,E=u.providerIndexes>>20;if(Ia(n)||!n.multi){let b=new ka(f,i,ue,null),N=nE(d,e,i?g:g+E,y);N===-1?(iE(Am(u,a),o,d),tE(o,n,e.length),e.push(d),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),t.push(b),a.push(b)):(t[N]=b,a[N]=b)}else{let b=nE(d,e,g+E,y),N=nE(d,e,g,g+E),$=b>=0&&t[b],F=N>=0&&t[N];if(i&&!F||!i&&!$){iE(Am(u,a),o,d);let q=Dj(i?Cj:Tj,t.length,i,r,f,n);!i&&F&&(t[N].providerFactory=q),tE(o,n,e.length,0),e.push(d),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),t.push(q),a.push(q)}else{let q=px(t[i?N:b],f,!i&&r);tE(o,n,b>-1?b:N,q)}!i&&r&&F&&t[N].componentProviders++}}}function tE(n,e,t,r){let i=Ia(e),o=MS(e);if(i||o){let d=(o?gn(e.useClass):e).prototype.ngOnDestroy;if(d){let f=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let g=f.indexOf(t);g===-1?f.push(t,[r,d]):f[g+1].push(r,d)}else f.push(t,d)}}}function px(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function nE(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Tj(n,e,t,r,i){return EE(this.multi,[])}function Cj(n,e,t,r,i){let o=this.multi,a;if(this.providerFactory){let u=this.providerFactory.componentProviders,d=Rm(r,r[Me],this.providerFactory.index,i);a=d.slice(0,u),EE(o,a);for(let f=u;f<d.length;f++)a.push(d[f])}else a=[],EE(o,a);return a}function EE(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function Dj(n,e,t,r,i,o){let a=new ka(n,t,ue,null);return a.multi=[],a.index=e,a.componentProviders=0,px(a,i,r&&!t),a}function Ci(n,e=[]){return t=>{t.providersResolver=(r,i)=>bj(r,i?i(n):n,e)}}var Bm=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},JE=(()=>{class n{compileModuleSync(t){return new Um(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=yw(t),o=mR(i.declarations).reduce((a,u)=>{let d=po(u);return d&&a.push(new La(d)),a},[]);return new Bm(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Sj=(()=>{class n{zone=B(Ge);changeDetectionScheduler=B(ho);applicationRef=B(ms);applicationErrorHandler=B(Kn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mx({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ge(we(Q({},gx()),{scheduleInRootZone:t})),[{provide:Ge,useFactory:n},{provide:ss,multi:!0,useFactory:()=>{let r=B(Sj,{optional:!0});return()=>r.initialize()}},{provide:ss,multi:!0,useFactory:()=>{let r=B(Aj);return()=>{r.initialize()}}},e===!0?{provide:qw,useValue:!0}:[],{provide:Ww,useValue:t??bR},{provide:Kn,useFactory:()=>{let r=B(Ge),i=B(Tt),o;return a=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw a}):(o??=i.get(Br),o.handleError(a))})}}}]}function gx(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var Aj=(()=>{class n{subscription=new At;initialized=!1;zone=B(Ge);pendingTasks=B(Ei);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ge.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ge.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var _x=(()=>{class n{applicationErrorHandler=B(Kn);appRef=B(ms);taskService=B(Ei);ngZone=B(Ge);zonelessEnabled=B(_m);tracing=B(ja,{optional:!0});disableScheduling=B(qw,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new At;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Pm):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(B(Ww,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Nm||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?_A:TR;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Pm+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,_A(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Rj(){return typeof $localize<"u"&&$localize.locale||Jd}var ng=new J("",{providedIn:"root",factory:()=>B(ng,{optional:!0,skipSelf:!0})||Rj()});function sn(n){return gS(n)}function Nu(n,e){return Tp(n,e?.equal)}var vx=class{[bn];constructor(e){this[bn]=e}destroy(){this[bn].destroy()}};var bx=Symbol("InputSignalNode#UNSET"),Gj=we(Q({},Cp),{transformFn:void 0,applyValueToInputSignal(n,e){Xc(n,e)}});function Tx(n,e){let t=Object.create(Gj);t.value=n,t.transformFn=e?.transform;function r(){if(Qc(t),t.value===bx){let i=null;throw new te(-950,i)}return t.value}return r[bn]=t,r}var ig=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Gd(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},Kj=new J("");Kj.__NG_ELEMENT_ID__=n=>{let e=rn();if(e===null)throw new te(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new te(204,!1)};function yx(n,e){return Tx(n,e)}function Zj(n){return Tx(bx,n)}var Cx=(yx.required=Zj,yx);var XE=new J(""),Qj=new J("");function Xd(n){return!n.moduleRef}function Yj(n){let e=Xd(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ge);return t.run(()=>{Xd(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Kn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Xd(n)){let o=()=>e.destroy(),a=n.platformInjector.get(XE);a.add(o),e.onDestroy(()=>{i.unsubscribe(),a.delete(o)})}else{let o=()=>n.moduleRef.destroy(),a=n.platformInjector.get(XE);a.add(o),n.moduleRef.onDestroy(()=>{Hd(n.allPlatformModules,n.moduleRef),i.unsubscribe(),a.delete(o)})}return Xj(r,t,()=>{let o=e.get(Ei),a=o.add(),u=e.get(YE);return u.runInitializers(),u.donePromise.then(()=>{let d=e.get(ng,Jd);if(hx(d||Jd),!e.get(Qj,!0))return Xd(n)?e.get(ms):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Xd(n)){let g=e.get(ms);return n.rootComponent!==void 0&&g.bootstrap(n.rootComponent),g}else return Jj?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(a))})})}var Jj;function Xj(n,e,t){try{let r=t();return ps(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var rg=null;function eB(n=[],e){return _t.create({name:e,providers:[{provide:xd,useValue:"platform"},{provide:XE,useValue:new Set([()=>rg=null])},...n]})}function tB(n=[]){if(rg)return rg;let e=eB(n);return rg=e,ux(),nB(e),e}function nB(n){let e=n.get(zm,null);Rt(n,()=>{e?.forEach(t=>t())})}function iI(){return!1}var Ha=(()=>{class n{static __NG_ELEMENT_ID__=rB}return n})();function rB(n){return iB(rn(),Je(),(n&16)===16)}function iB(n,e,t){if(us(n)&&!t){let r=Ar(n.index,e);return new ds(r,r)}else if(n.type&175){let r=e[Dr];return new ds(r,e)}return null}var eI=class{constructor(){}supports(e){return WE(e)}create(e){return new tI(e)}},oB=(n,e)=>e,tI=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||oB}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let a=!r||t&&t.currentIndex<wx(r,i,o)?t:r,u=wx(a,i,o),d=a.currentIndex;if(a===r)i--,r=r._nextRemoved;else if(t=t._next,a.previousIndex==null)i++;else{o||(o=[]);let f=u-i,g=d-i;if(f!=g){for(let E=0;E<f;E++){let b=E<o.length?o[E]:o[E]=0,N=b+E;g<=N&&N<f&&(o[E]=b+1)}let y=a.previousIndex;o[y]=g-f}}u!==d&&e(a,u,d)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!WE(e))throw new te(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,a;if(Array.isArray(e)){this.length=e.length;for(let u=0;u<this.length;u++)o=e[u],a=this._trackByFn(u,o),t===null||!Object.is(t.trackById,a)?(t=this._mismatch(t,o,a,u),r=!0):(r&&(t=this._verifyReinsertion(t,o,a,u)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,tx(e,u=>{a=this._trackByFn(i,u),t===null||!Object.is(t.trackById,a)?(t=this._mismatch(t,u,a,i),r=!0):(r&&(t=this._verifyReinsertion(t,u,a,i)),Object.is(t.item,u)||this._addIdentityChange(t,u)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new nI(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new og),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new og),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},nI=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},rI=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},og=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new rI,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function wx(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function Ex(){return new oI([new eI])}var oI=(()=>{class n{factories;static \u0275prov=re({token:n,providedIn:"root",factory:Ex});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=B(n,{optional:!0,skipSelf:!0});return n.create(t,r||Ex())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new te(901,!1)}}return n})();function Dx(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;nt(8);try{let o=i?.injector??tB(r),a=[mx({}),{provide:ho,useExisting:_x},iA,...t||[]],u=new qd({providers:a,parent:o,debugName:"",runEnvironmentInitializers:!1});return Yj({r3Injector:u.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{nt(9)}}function vs(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Sx(n){let e=po(n);if(!e)return null;let t=new La(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var xx=null;function xr(){return xx}function sI(n){xx??=n}var eh=class{},th=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>B(Mx),providedIn:"platform"})}return n})(),aI=new J(""),Mx=(()=>{class n extends th{_location;_history;_doc=B(xt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return xr().getBaseHref(this._doc)}onPopState(t){let r=xr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=xr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function sg(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function Ax(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Zr(n){return n&&n[0]!=="?"?`?${n}`:n}var Qr=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>B(cg),providedIn:"root"})}return n})(),ag=new J(""),cg=(()=>{class n extends Qr{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??B(xt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return sg(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Zr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let a=this.prepareExternalUrl(i+Zr(o));this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,o){let a=this.prepareExternalUrl(i+Zr(o));this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(le(th),le(ag,8))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ys=(()=>{class n{_subject=new Bt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=cB(Ax(Rx(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Zr(r))}normalize(t){return n.stripTrailingSlash(aB(this._basePath,Rx(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Zr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Zr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Zr;static joinWithSlash=sg;static stripTrailingSlash=Ax;static \u0275fac=function(r){return new(r||n)(le(Qr))};static \u0275prov=re({token:n,factory:()=>sB(),providedIn:"root"})}return n})();function sB(){return new ys(le(Qr))}function aB(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function Rx(n){return n.replace(/\/index.html$/,"")}function cB(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var cI=(()=>{class n extends Qr{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=sg(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let a=this.prepareExternalUrl(i+Zr(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,o){let a=this.prepareExternalUrl(i+Zr(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(le(th),le(ag,8))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();var ug=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ws=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,a)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new ug(i.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)r.remove(o===null?void 0:o);else if(o!==null){let u=r.get(o);r.move(u,a),Px(u,i)}});for(let i=0,o=r.length;i<o;i++){let u=r.get(i).context;u.index=i,u.count=o,u.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Px(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ue(Ba),ue(Zd),ue(oI))};static \u0275dir=Dt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function Px(n,e){n.context.$implicit=e.item}var za=(()=>{class n{_viewContainer;_context=new lg;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Nx(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Nx(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ue(Ba),ue(Zd))};static \u0275dir=Dt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),lg=class{$implicit=null;ngIf=null};function Nx(n,e){if(n&&!n.createEmbeddedView)throw new te(2020,!1)}var Cn=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Rr({type:n});static \u0275inj=dr({})}return n})();function nh(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var qa=class{};var kx="browser";var Ox=(()=>{class n{static \u0275prov=re({token:n,providedIn:"root",factory:()=>new uI(B(xt),window)})}return n})(),uI=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(we(Q({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=uB(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(fo(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(we(Q({},t),{left:i-a[0],top:o-a[1]}))}};function uB(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let a=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(a)return a}i=r.nextNode()}}return null}var ih=class{_doc;constructor(e){this._doc=e}manager},dg=(()=>{class n extends ih{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(le(xt))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),fg=new J(""),pI=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(a=>{a.manager=this});let i=t.filter(a=>!(a instanceof dg));this._plugins=i.slice().reverse();let o=t.find(a=>a instanceof dg);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new te(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(le(fg),le(Ge))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),lI="ng-app-id";function Lx(n){for(let e of n)e.remove()}function Fx(n,e){let t=e.createElement("style");return t.textContent=n,t}function lB(n,e,t,r){let i=n.head?.querySelectorAll(`style[${lI}="${e}"],link[${lI}="${e}"]`);if(i)for(let o of i)o.removeAttribute(lI),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function hI(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var mI=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,lB(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,Fx);r?.forEach(i=>this.addUsage(i,this.external,hI))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(a=>this.addElement(a,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(Lx(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])Lx(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,Fx(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,hI(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(le(xt),le(Hm),le(qm,8),le(Ua))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),dI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},gI=/%COMP%/g;var Ux="%COMP%",dB=`_nghost-${Ux}`,hB=`_ngcontent-${Ux}`,fB=!0,pB=new J("",{providedIn:"root",factory:()=>fB});function mB(n){return hB.replace(gI,n)}function gB(n){return dB.replace(gI,n)}function jx(n,e){return e.map(t=>t.replace(gI,n))}var _I=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,a,u,d=null,f=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=a,this.ngZone=u,this.nonce=d,this.tracingService=f,this.platformIsServer=!1,this.defaultRenderer=new oh(t,a,u,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof hg?i.applyToHost(t):i instanceof sh&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let a=this.doc,u=this.ngZone,d=this.eventManager,f=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,y=this.platformIsServer,E=this.tracingService;switch(r.encapsulation){case go.Emulated:o=new hg(d,f,r,this.appId,g,a,u,y,E);break;case go.ShadowDom:return new fI(d,f,t,r,a,u,this.nonce,y,E);default:o=new sh(d,f,r,g,a,u,y,E);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(le(pI),le(mI),le(Hm),le(pB),le(xt),le(Ge),le(qm),le(ja,8))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),oh=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(dI[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Vx(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Vx(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new te(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=dI[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=dI[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(bi.DashCase|bi.Important)?e.style.setProperty(t,r,i&bi.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&bi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=xr().getGlobalEventTarget(this.doc,e),!e))throw new te(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function Vx(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var fI=class extends oh{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,a,u,d,f){super(e,o,a,d,f),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let g=i.styles;g=jx(i.id,g);for(let E of g){let b=document.createElement("style");u&&b.setAttribute("nonce",u),b.textContent=E,this.shadowRoot.appendChild(b)}let y=i.getExternalStyles?.();if(y)for(let E of y){let b=hI(E,o);u&&b.setAttribute("nonce",u),this.shadowRoot.appendChild(b)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},sh=class extends oh{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,a,u,d,f){super(e,o,a,u,d),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let g=r.styles;this.styles=f?jx(f,g):g,this.styleUrls=r.getExternalStyles?.(f)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Du.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},hg=class extends sh{contentAttr;hostAttr;constructor(e,t,r,i,o,a,u,d,f){let g=i+"-"+r.id;super(e,t,r,o,a,u,d,f,g),this.contentAttr=mB(g),this.hostAttr=gB(g)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var pg=class n extends eh{supportsDOMEvents=!0;static makeCurrent(){sI(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=_B();return t==null?null:vB(t)}resetBaseElement(){ah=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return nh(document.cookie,e)}},ah=null;function _B(){return ah=ah||document.head.querySelector("base"),ah?ah.getAttribute("href"):null}function vB(n){return new URL(n,document.baseURI).pathname}var yB=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),Bx=["alt","control","meta","shift"],wB={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},EB={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},$x=(()=>{class n extends ih{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let a=n.parseEventName(r),u=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xr().onAndCancel(t,a.domEventName,u,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),a="",u=r.indexOf("code");if(u>-1&&(r.splice(u,1),a="code."),Bx.forEach(f=>{let g=r.indexOf(f);g>-1&&(r.splice(g,1),a+=f+".")}),a+=o,r.length!=0||o.length===0)return null;let d={};return d.domEventName=i,d.fullKey=a,d}static matchEventFullKeyCode(t,r){let i=wB[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Bx.forEach(a=>{if(a!==i){let u=EB[a];u(t)&&(o+=a+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(le(xt))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();function vI(n,e,t){let r=Q({rootComponent:n,platformRef:t?.platformRef},IB(e));return Dx(r)}function IB(n){return{appProviders:[...SB,...n?.providers??[]],platformProviders:DB}}function bB(){pg.makeCurrent()}function TB(){return new Br}function CB(){return TE(document),document}var DB=[{provide:Ua,useValue:kx},{provide:zm,useValue:bB,multi:!0},{provide:xt,useFactory:CB}];var SB=[{provide:xd,useValue:"root"},{provide:Br,useFactory:TB},{provide:fg,useClass:dg,multi:!0,deps:[xt]},{provide:fg,useClass:$x,multi:!0,deps:[xt]},_I,mI,pI,{provide:Oa,useExisting:_I},{provide:qa,useClass:yB},[]];var Lu=class{},ch=class{},Es=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let a=this.headers.get(t);if(!a)return;a=a.filter(u=>o.indexOf(u)===-1),a.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var gg=class{encodeKey(e){return Hx(e)}encodeValue(e){return Hx(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function AB(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[a,u]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],d=t.get(a)||[];d.push(u),t.set(a,d)}),t}var RB=/%(\d[a-f0-9])/gi,xB={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Hx(n){return encodeURIComponent(n).replace(RB,(e,t)=>xB[t]??e)}function mg(n){return`${n}`}var wo=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new gg,e.fromString){if(e.fromObject)throw new te(2805,!1);this.map=AB(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(mg):[mg(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(mg(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(mg(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var _g=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function MB(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function zx(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function qx(n){return typeof Blob<"u"&&n instanceof Blob}function Wx(n){return typeof FormData<"u"&&n instanceof FormData}function PB(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Gx="Content-Type",Kx="Accept",Qx="X-Request-URL",Yx="text/plain",Jx="application/json",NB=`${Jx}, ${Yx}, */*`,ku=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(MB(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new te(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),this.transferCache=o.transferCache}if(this.headers??=new Es,this.context??=new _g,!this.params)this.params=new wo,this.urlWithParams=t;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=t;else{let u=t.indexOf("?"),d=u===-1?"?":u<t.length-1?"&":"";this.urlWithParams=t+d+a}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||zx(this.body)||qx(this.body)||Wx(this.body)||PB(this.body)?this.body:this.body instanceof wo?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Wx(this.body)?null:qx(this.body)?this.body.type||null:zx(this.body)?null:typeof this.body=="string"?Yx:this.body instanceof wo?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?Jx:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.keepalive??this.keepalive,a=e.priority||this.priority,u=e.cache||this.cache,d=e.mode||this.mode,f=e.redirect||this.redirect,g=e.credentials||this.credentials,y=e.referrer||this.referrer,E=e.integrity||this.integrity,b=e.transferCache??this.transferCache,N=e.timeout??this.timeout,$=e.body!==void 0?e.body:this.body,F=e.withCredentials??this.withCredentials,q=e.reportProgress??this.reportProgress,oe=e.headers||this.headers,se=e.params||this.params,ce=e.context??this.context;return e.setHeaders!==void 0&&(oe=Object.keys(e.setHeaders).reduce((Ke,Ee)=>Ke.set(Ee,e.setHeaders[Ee]),oe)),e.setParams&&(se=Object.keys(e.setParams).reduce((Ke,Ee)=>Ke.set(Ee,e.setParams[Ee]),se)),new n(t,r,$,{params:se,headers:oe,context:ce,reportProgress:q,responseType:i,withCredentials:F,transferCache:b,keepalive:o,cache:u,priority:a,timeout:N,mode:d,redirect:f,credentials:g,referrer:y,integrity:E})}},Wa=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(Wa||{}),Fu=class{headers;status;statusText;url;ok;type;redirected;constructor(e,t=200,r="OK"){this.headers=e.headers||new Es,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.ok=this.status>=200&&this.status<300}},vg=class n extends Fu{constructor(e={}){super(e)}type=Wa.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},uh=class n extends Fu{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Wa.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected})}},Ou=class extends Fu{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},kB=200,OB=204;function yI(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer}}var wg=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof ku)o=t;else{let d;i.headers instanceof Es?d=i.headers:d=new Es(i.headers);let f;i.params&&(i.params instanceof wo?f=i.params:f=new wo({fromObject:i.params})),o=new ku(t,r,i.body!==void 0?i.body:null,{headers:d,context:i.context,params:f,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials,referrer:i.referrer,integrity:i.integrity,timeout:i.timeout})}let a=he(o).pipe(_i(d=>this.handler.handle(d)));if(t instanceof ku||i.observe==="events")return a;let u=a.pipe(pn(d=>d instanceof uh));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return u.pipe(Te(d=>{if(d.body!==null&&!(d.body instanceof ArrayBuffer))throw new te(2806,!1);return d.body}));case"blob":return u.pipe(Te(d=>{if(d.body!==null&&!(d.body instanceof Blob))throw new te(2807,!1);return d.body}));case"text":return u.pipe(Te(d=>{if(d.body!==null&&typeof d.body!="string")throw new te(2808,!1);return d.body}));case"json":default:return u.pipe(Te(d=>d.body))}case"response":return u;default:throw new te(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new wo().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,yI(i,r))}post(t,r,i={}){return this.request("POST",t,yI(i,r))}put(t,r,i={}){return this.request("PUT",t,yI(i,r))}static \u0275fac=function(r){return new(r||n)(le(Lu))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();var LB=new J("");function Xx(n,e){return e(n)}function FB(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}function VB(n,e,t){return(r,i)=>Rt(t,()=>e(r,o=>n(o,i)))}var eM=new J(""),EI=new J(""),tM=new J(""),II=new J("",{providedIn:"root",factory:()=>!0});function UB(){let n=null;return(e,t)=>{n===null&&(n=(B(eM,{optional:!0})??[]).reduceRight(FB,Xx));let r=B(mo);if(B(II)){let o=r.add();return n(e,t).pipe(ns(o))}else return n(e,t)}}var yg=(()=>{class n extends Lu{backend;injector;chain=null;pendingTasks=B(mo);contributeToStability=B(II);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(EI),...this.injector.get(tM,[])]));this.chain=r.reduceRight((i,o)=>VB(i,o,this.injector),Xx)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(ns(r))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(le(ch),le(Tt))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();var jB=/^\)\]\}',?\n/,BB=RegExp(`^${Qx}:`,"m");function $B(n){return"responseURL"in n&&n.responseURL?n.responseURL:BB.test(n.getAllResponseHeaders())?n.getResponseHeader(Qx):null}var wI=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new te(-2800,!1);let r=this.xhrFactory;return he(null).pipe(mn(()=>new be(o=>{let a=r.build();if(a.open(t.method,t.urlWithParams),t.withCredentials&&(a.withCredentials=!0),t.headers.forEach((F,q)=>a.setRequestHeader(F,q.join(","))),t.headers.has(Kx)||a.setRequestHeader(Kx,NB),!t.headers.has(Gx)){let F=t.detectContentTypeHeader();F!==null&&a.setRequestHeader(Gx,F)}if(t.timeout&&(a.timeout=t.timeout),t.responseType){let F=t.responseType.toLowerCase();a.responseType=F!=="json"?F:"text"}let u=t.serializeBody(),d=null,f=()=>{if(d!==null)return d;let F=a.statusText||"OK",q=new Es(a.getAllResponseHeaders()),oe=$B(a)||t.url;return d=new vg({headers:q,status:a.status,statusText:F,url:oe}),d},g=()=>{let{headers:F,status:q,statusText:oe,url:se}=f(),ce=null;q!==OB&&(ce=typeof a.response>"u"?a.responseText:a.response),q===0&&(q=ce?kB:0);let Ke=q>=200&&q<300;if(t.responseType==="json"&&typeof ce=="string"){let Ee=ce;ce=ce.replace(jB,"");try{ce=ce!==""?JSON.parse(ce):null}catch(x){ce=Ee,Ke&&(Ke=!1,ce={error:x,text:ce})}}Ke?(o.next(new uh({body:ce,headers:F,status:q,statusText:oe,url:se||void 0})),o.complete()):o.error(new Ou({error:ce,headers:F,status:q,statusText:oe,url:se||void 0}))},y=F=>{let{url:q}=f(),oe=new Ou({error:F,status:a.status||0,statusText:a.statusText||"Unknown Error",url:q||void 0});o.error(oe)},E=y;t.timeout&&(E=F=>{let{url:q}=f(),oe=new Ou({error:new DOMException("Request timed out","TimeoutError"),status:a.status||0,statusText:a.statusText||"Request timeout",url:q||void 0});o.error(oe)});let b=!1,N=F=>{b||(o.next(f()),b=!0);let q={type:Wa.DownloadProgress,loaded:F.loaded};F.lengthComputable&&(q.total=F.total),t.responseType==="text"&&a.responseText&&(q.partialText=a.responseText),o.next(q)},$=F=>{let q={type:Wa.UploadProgress,loaded:F.loaded};F.lengthComputable&&(q.total=F.total),o.next(q)};return a.addEventListener("load",g),a.addEventListener("error",y),a.addEventListener("timeout",E),a.addEventListener("abort",y),t.reportProgress&&(a.addEventListener("progress",N),u!==null&&a.upload&&a.upload.addEventListener("progress",$)),a.send(u),o.next({type:Wa.Sent}),()=>{a.removeEventListener("error",y),a.removeEventListener("abort",y),a.removeEventListener("load",g),a.removeEventListener("timeout",E),t.reportProgress&&(a.removeEventListener("progress",N),u!==null&&a.upload&&a.upload.removeEventListener("progress",$)),a.readyState!==a.DONE&&a.abort()}})))}static \u0275fac=function(r){return new(r||n)(le(qa))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),nM=new J(""),HB="XSRF-TOKEN",zB=new J("",{providedIn:"root",factory:()=>HB}),qB="X-XSRF-TOKEN",WB=new J("",{providedIn:"root",factory:()=>qB}),lh=class{},GB=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=nh(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(le(xt),le(zB))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),KB=/^(?:https?:)?\/\//i;function ZB(n,e){if(!B(nM)||n.method==="GET"||n.method==="HEAD"||KB.test(n.url))return e(n);let t=B(lh).getToken(),r=B(WB);return t!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,t)})),e(n)}var bI=(function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n})(bI||{});function QB(n,e){return{\u0275kind:n,\u0275providers:e}}function rM(...n){let e=[wg,wI,yg,{provide:Lu,useExisting:yg},{provide:ch,useFactory:()=>B(LB,{optional:!0})??B(wI)},{provide:EI,useValue:ZB,multi:!0},{provide:nM,useValue:!0},{provide:lh,useClass:GB}];for(let t of n)e.push(...t.\u0275providers);return Nn(e)}var Zx=new J("");function iM(){return QB(bI.LegacyInterceptors,[{provide:Zx,useFactory:UB},{provide:EI,useExisting:Zx,multi:!0}])}var TI=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Rr({type:n});static \u0275inj=dr({providers:[rM(iM())]})}return n})();var oM=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(le(xt))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var De="primary",bh=Symbol("RouteTitle"),RI=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Za(n){return new RI(n)}function fM(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let a=r[o],u=n[o];if(a[0]===":")i[a.substring(1)]=u;else if(a!==u.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function XB(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Di(n[t],e[t]))return!1;return!0}function Di(n,e){let t=n?xI(n):void 0,r=e?xI(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!pM(n[i],e[i]))return!1;return!0}function xI(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function pM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function mM(n){return n.length>0?n[n.length-1]:null}function Eo(n){return zy(n)?n:ps(n)?ft(Promise.resolve(n)):he(n)}var e$={exact:_M,subset:vM},gM={exact:t$,subset:n$,ignored:()=>!0};function sM(n,e,t){return e$[t.paths](n.root,e.root,t.matrixParams)&&gM[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function t$(n,e){return Di(n,e)}function _M(n,e,t){if(!Ga(n.segments,e.segments)||!bg(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!_M(n.children[r],e.children[r],t))return!1;return!0}function n$(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>pM(n[t],e[t]))}function vM(n,e,t){return yM(n,e,e.segments,t)}function yM(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ga(i,t)||e.hasChildren()||!bg(i,t,r))}else if(n.segments.length===t.length){if(!Ga(n.segments,t)||!bg(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!vM(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ga(n.segments,i)||!bg(n.segments,i,r)||!n.children[De]?!1:yM(n.children[De],e,o,r)}}function bg(n,e,t){return e.every((r,i)=>gM[t](n[i].parameters,r.parameters))}var Ai=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Qe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Za(this.queryParams),this._queryParamMap}toString(){return o$.serialize(this)}},Qe=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Tg(this)}},Is=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Za(this.parameters),this._parameterMap}toString(){return EM(this)}};function r$(n,e){return Ga(n,e)&&n.every((t,r)=>Di(t.parameters,e[r].parameters))}function Ga(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function i$(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===De&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==De&&(t=t.concat(e(i,r)))}),t}var Qa=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>new bs,providedIn:"root"})}return n})(),bs=class{parse(e){let t=new PI(e);return new Ai(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${dh(e.root,!0)}`,r=c$(e.queryParams),i=typeof e.fragment=="string"?`#${s$(e.fragment)}`:"";return`${t}${r}${i}`}},o$=new bs;function Tg(n){return n.segments.map(e=>EM(e)).join("/")}function dh(n,e){if(!n.hasChildren())return Tg(n);if(e){let t=n.children[De]?dh(n.children[De],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==De&&r.push(`${i}:${dh(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=i$(n,(r,i)=>i===De?[dh(n.children[De],!1)]:[`${i}:${dh(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[De]!=null?`${Tg(n)}/${t[0]}`:`${Tg(n)}/(${t.join("//")})`}}function wM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Eg(n){return wM(n).replace(/%3B/gi,";")}function s$(n){return encodeURI(n)}function MI(n){return wM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Cg(n){return decodeURIComponent(n)}function aM(n){return Cg(n.replace(/\+/g,"%20"))}function EM(n){return`${MI(n.path)}${a$(n.parameters)}`}function a$(n){return Object.entries(n).map(([e,t])=>`;${MI(e)}=${MI(t)}`).join("")}function c$(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Eg(t)}=${Eg(i)}`).join("&"):`${Eg(t)}=${Eg(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var u$=/^[^\/()?;#]+/;function CI(n){let e=n.match(u$);return e?e[0]:""}var l$=/^[^\/()?;=#]+/;function d$(n){let e=n.match(l$);return e?e[0]:""}var h$=/^[^=?&#]+/;function f$(n){let e=n.match(h$);return e?e[0]:""}var p$=/^[^&#]+/;function m$(n){let e=n.match(p$);return e?e[0]:""}var PI=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qe([],{}):new Qe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[De]=new Qe(e,t)),r}parseSegment(){let e=CI(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new te(4009,!1);return this.capture(e),new Is(Cg(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=d$(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=CI(this.remaining);i&&(r=i,this.capture(r))}e[Cg(t)]=Cg(r)}parseQueryParam(e){let t=f$(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let a=m$(this.remaining);a&&(r=a,this.capture(r))}let i=aM(t),o=aM(r);if(e.hasOwnProperty(i)){let a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=CI(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new te(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=De);let a=this.parseChildren();t[o??De]=Object.keys(a).length===1&&a[De]?a[De]:new Qe([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new te(4011,!1)}};function IM(n){return n.segments.length>0?new Qe([],{[De]:n}):n}function bM(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=bM(i);if(r===De&&o.segments.length===0&&o.hasChildren())for(let[a,u]of Object.entries(o.children))e[a]=u;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Qe(n.segments,e);return g$(t)}function g$(n){if(n.numberOfChildren===1&&n.children[De]){let e=n.children[De];return new Qe(n.segments.concat(e.segments),e.children)}return n}function Ts(n){return n instanceof Ai}function TM(n,e,t=null,r=null){let i=CM(n);return DM(i,e,t,r)}function CM(n){let e;function t(o){let a={};for(let d of o.children){let f=t(d);a[d.outlet]=f}let u=new Qe(o.url,a);return o===n&&(e=u),u}let r=t(n.root),i=IM(r);return e??i}function DM(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return DI(i,i,i,t,r);let o=_$(e);if(o.toRoot())return DI(i,i,new Qe([],{}),t,r);let a=v$(o,i,n),u=a.processChildren?fh(a.segmentGroup,a.index,o.commands):AM(a.segmentGroup,a.index,o.commands);return DI(i,a.segmentGroup,u,t,r)}function Dg(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function mh(n){return typeof n=="object"&&n!=null&&n.outlets}function DI(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([d,f])=>{o[d]=Array.isArray(f)?f.map(g=>`${g}`):`${f}`});let a;n===e?a=t:a=SM(n,e,t);let u=IM(bM(a));return new Ai(u,o,i)}function SM(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=SM(o,e,t)}),new Qe(n.segments,r)}var Sg=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Dg(r[0]))throw new te(4003,!1);let i=r.find(mh);if(i&&i!==mM(r))throw new te(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function _$(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Sg(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let u={};return Object.entries(o.outlets).forEach(([d,f])=>{u[d]=typeof f=="string"?f.split("/"):f}),[...i,{outlets:u}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:a===0?(o.split("/").forEach((u,d)=>{d==0&&u==="."||(d==0&&u===""?t=!0:u===".."?e++:u!=""&&i.push(u))}),i):[...i,o]},[]);return new Sg(t,e,r)}var ju=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function v$(n,e,t){if(n.isAbsolute)return new ju(e,!0,0);if(!t)return new ju(e,!1,NaN);if(t.parent===null)return new ju(t,!0,0);let r=Dg(n.commands[0])?0:1,i=t.segments.length-1+r;return y$(t,i,n.numberOfDoubleDots)}function y$(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new te(4005,!1);i=r.segments.length}return new ju(r,!1,i-o)}function w$(n){return mh(n[0])?n[0].outlets:{[De]:n}}function AM(n,e,t){if(n??=new Qe([],{}),n.segments.length===0&&n.hasChildren())return fh(n,e,t);let r=E$(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Qe(n.segments.slice(0,r.pathIndex),{});return o.children[De]=new Qe(n.segments.slice(r.pathIndex),n.children),fh(o,0,i)}else return r.match&&i.length===0?new Qe(n.segments,{}):r.match&&!n.hasChildren()?NI(n,e,t):r.match?fh(n,0,i):NI(n,e,t)}function fh(n,e,t){if(t.length===0)return new Qe(n.segments,{});{let r=w$(t),i={};if(Object.keys(r).some(o=>o!==De)&&n.children[De]&&n.numberOfChildren===1&&n.children[De].segments.length===0){let o=fh(n.children[De],e,t);return new Qe(n.segments,o.children)}return Object.entries(r).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[o]=AM(n.children[o],e,a))}),Object.entries(n.children).forEach(([o,a])=>{r[o]===void 0&&(i[o]=a)}),new Qe(n.segments,i)}}function E$(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let a=n.segments[i],u=t[r];if(mh(u))break;let d=`${u}`,f=r<t.length-1?t[r+1]:null;if(i>0&&d===void 0)break;if(d&&f&&typeof f=="object"&&f.outlets===void 0){if(!uM(d,f,a))return o;r+=2}else{if(!uM(d,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function NI(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(mh(o)){let d=I$(o.outlets);return new Qe(r,d)}if(i===0&&Dg(t[0])){let d=n.segments[e];r.push(new Is(d.path,cM(t[0]))),i++;continue}let a=mh(o)?o.outlets[De]:`${o}`,u=i<t.length-1?t[i+1]:null;a&&u&&Dg(u)?(r.push(new Is(a,cM(u))),i+=2):(r.push(new Is(a,{})),i++)}return new Qe(r,{})}function I$(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=NI(new Qe([],{}),0,r))}),e}function cM(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function uM(n,e,t){return n==t.path&&Di(e,t.parameters)}var Bu="imperative",Qt=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Qt||{}),mr=class{id;url;constructor(e,t){this.id=e,this.url=t}},Cs=class extends mr{type=Qt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Mr=class extends mr{urlAfterRedirects;type=Qt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Fn=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Fn||{}),Hu=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Hu||{}),Si=class extends mr{reason;code;type=Qt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ri=class extends mr{reason;code;type=Qt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},zu=class extends mr{error;target;type=Qt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},gh=class extends mr{urlAfterRedirects;state;type=Qt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ag=class extends mr{urlAfterRedirects;state;type=Qt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rg=class extends mr{urlAfterRedirects;state;shouldActivate;type=Qt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},xg=class extends mr{urlAfterRedirects;state;type=Qt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Mg=class extends mr{urlAfterRedirects;state;type=Qt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pg=class{route;type=Qt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ng=class{route;type=Qt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},kg=class{snapshot;type=Qt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Og=class{snapshot;type=Qt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Lg=class{snapshot;type=Qt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fg=class{snapshot;type=Qt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qu=class{routerEvent;position;anchor;type=Qt.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},_h=class{},Wu=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function b$(n){return!(n instanceof _h)&&!(n instanceof Wu)}function T$(n,e){return n.providers&&!n._injector&&(n._injector=Mu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Yr(n){return n.outlet||De}function C$(n,e){let t=n.filter(r=>Yr(r)===e);return t.push(...n.filter(r=>Yr(r)!==e)),t}function Zu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Vg=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Zu(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Ya(this.rootInjector)}},Ya=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Vg(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(le(Tt))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ug=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=kI(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=kI(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=OI(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return OI(e,this._root).map(t=>t.value)}};function kI(n,e){if(n===e.value)return e;for(let t of e.children){let r=kI(n,t);if(r)return r}return null}function OI(n,e){if(n===e.value)return[e];for(let t of e.children){let r=OI(n,t);if(r.length)return r.unshift(e),r}return[]}var pr=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Uu(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var vh=class extends Ug{snapshot;constructor(e,t){super(e),this.snapshot=t,HI(this,e)}toString(){return this.snapshot.toString()}};function RM(n){let e=D$(n),t=new fn([new Is("",{})]),r=new fn({}),i=new fn({}),o=new fn({}),a=new fn(""),u=new xi(t,r,o,a,i,De,n,e.root);return u.snapshot=e.root,new vh(new pr(u,[]),e)}function D$(n){let e={},t={},r={},o=new Ka([],e,r,"",t,De,n,null,{});return new yh("",new pr(o,[]))}var xi=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,a,u,d){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=a,this.component=u,this._futureSnapshot=d,this.title=this.dataSubject?.pipe(Te(f=>f[bh]))??he(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Te(e=>Za(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Te(e=>Za(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function jg(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:Q(Q({},e.params),n.params),data:Q(Q({},e.data),n.data),resolve:Q(Q(Q(Q({},n.data),e.data),i?.data),n._resolvedData)}:r={params:Q({},n.params),data:Q({},n.data),resolve:Q(Q({},n.data),n._resolvedData??{})},i&&MM(i)&&(r.resolve[bh]=i.title),r}var Ka=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[bh]}constructor(e,t,r,i,o,a,u,d,f){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=u,this.routeConfig=d,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Za(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Za(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},yh=class extends Ug{url;constructor(e,t){super(t),this.url=e,HI(this,t)}toString(){return xM(this._root)}};function HI(n,e){e.value._routerState=n,e.children.forEach(t=>HI(n,t))}function xM(n){let e=n.children.length>0?` { ${n.children.map(xM).join(", ")} } `:"";return`${n.value}${e}`}function SI(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Di(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Di(e.params,t.params)||n.paramsSubject.next(t.params),XB(e.url,t.url)||n.urlSubject.next(t.url),Di(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function LI(n,e){let t=Di(n.params,e.params)&&r$(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||LI(n.parent,e.parent))}function MM(n){return typeof n.title=="string"||n.title===null}var PM=new J(""),Th=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=De;activateEvents=new Ht;deactivateEvents=new Ht;attachEvents=new Ht;detachEvents=new Ht;routerOutletData=Cx();parentContexts=B(Ya);location=B(Ba);changeDetector=B(Ha);inputBinder=B(Ch,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new te(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new te(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new te(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new te(4013,!1);this._activatedRoute=t;let i=this.location,a=t.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,d=new FI(t,u,i.injector,this.routerOutletData);this.activated=i.createComponent(a,{index:i.length,injector:d,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Dt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[_o]})}return n})(),FI=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===xi?this.route:e===Ya?this.childContexts:e===PM?this.outletData:this.parent.get(e,t)}},Ch=new J(""),zI=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Ed([r.queryParams,r.params,r.data]).pipe(mn(([o,a,u],d)=>(u=Q(Q(Q({},o),a),u),d===0?he(u):Promise.resolve(u)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let a=Sx(r.component);if(!a){this.unsubscribeFromRouteData(t);return}for(let{templateName:u}of a.inputs)t.activatedComponentRef.setInput(u,o[u])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),qI=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Lt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&vn(0,"router-outlet")},dependencies:[Th],encapsulation:2})}return n})();function WI(n){let e=n.children&&n.children.map(WI),t=e?we(Q({},n),{children:e}):Q({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==De&&(t.component=qI),t}function S$(n,e,t){let r=wh(n,e._root,t?t._root:void 0);return new vh(r,e)}function wh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=A$(n,e,t);return new pr(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(u=>wh(n,u)),a}}let r=R$(e.value),i=e.children.map(o=>wh(n,o));return new pr(r,i)}}function A$(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return wh(n,r,i);return wh(n,r)})}function R$(n){return new xi(new fn(n.url),new fn(n.params),new fn(n.queryParams),new fn(n.fragment),new fn(n.data),n.outlet,n.component,n)}var Gu=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},NM="ngNavigationCancelingError";function Bg(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ts(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=kM(!1,Fn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function kM(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[NM]=!0,t.cancellationCode=e,t}function x$(n){return OM(n)&&Ts(n.url)}function OM(n){return!!n&&n[NM]}var M$=(n,e,t,r)=>Te(i=>(new VI(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),VI=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),SI(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Uu(t);e.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,i[a],r),delete i[a]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Uu(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);if(r&&r.outlet){let a=r.outlet.detach(),u=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:u})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Uu(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Uu(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Fg(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Og(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(SI(i),i===o)if(i.component){let a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let u=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(u.contexts),a.attachRef=u.componentRef,a.route=u.route.value,a.outlet&&a.outlet.attach(u.componentRef,u.route.value),SI(u.route.value),this.activateChildRoutes(e,null,a.children)}else a.attachRef=null,a.route=i,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(e,null,a.children)}else this.activateChildRoutes(e,null,r)}},$g=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},$u=class{component;route;constructor(e,t){this.component=e,this.route=t}};function P$(n,e,t){let r=n._root,i=e?e._root:null;return hh(r,i,t,[r.value])}function N$(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Qu(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!cw(n)?n:e.get(n):r}function hh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Uu(e);return n.children.forEach(a=>{k$(a,o[a.value.outlet],t,r.concat([a.value]),i),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,u])=>ph(u,t.getContext(a),i)),i}function k$(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,a=e?e.value:null,u=t?t.getContext(n.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let d=O$(a,o,o.routeConfig.runGuardsAndResolvers);d?i.canActivateChecks.push(new $g(r)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?hh(n,e,u?u.children:null,r,i):hh(n,e,t,r,i),d&&u&&u.outlet&&u.outlet.isActivated&&i.canDeactivateChecks.push(new $u(u.outlet.component,a))}else a&&ph(e,u,i),i.canActivateChecks.push(new $g(r)),o.component?hh(n,null,u?u.children:null,r,i):hh(n,null,t,r,i);return i}function O$(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ga(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ga(n.url,e.url)||!Di(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!LI(n,e)||!Di(n.queryParams,e.queryParams);case"paramsChange":default:return!LI(n,e)}}function ph(n,e,t){let r=Uu(n),i=n.value;Object.entries(r).forEach(([o,a])=>{i.component?e?ph(a,e.children.getContext(o),t):ph(a,null,t):ph(a,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new $u(e.outlet.component,i)):t.canDeactivateChecks.push(new $u(null,i)):t.canDeactivateChecks.push(new $u(null,i))}function Dh(n){return typeof n=="function"}function L$(n){return typeof n=="boolean"}function F$(n){return n&&Dh(n.canLoad)}function V$(n){return n&&Dh(n.canActivate)}function U$(n){return n&&Dh(n.canActivateChild)}function j$(n){return n&&Dh(n.canDeactivate)}function B$(n){return n&&Dh(n.canMatch)}function LM(n){return n instanceof oo||n?.name==="EmptyError"}var Ig=Symbol("INITIAL_VALUE");function Ku(){return mn(n=>Ed(n.map(e=>e.pipe(ao(1),Yp(Ig)))).pipe(Te(e=>{for(let t of e)if(t!==!0){if(t===Ig)return Ig;if(t===!1||$$(t))return t}return!0}),pn(e=>e!==Ig),ao(1)))}function $$(n){return Ts(n)||n instanceof Gu}function H$(n,e){return Nt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:a}}=t;return a.length===0&&o.length===0?he(we(Q({},t),{guardsResult:!0})):z$(a,r,i,n).pipe(Nt(u=>u&&L$(u)?q$(r,o,n,e):he(u)),Te(u=>we(Q({},t),{guardsResult:u})))})}function z$(n,e,t,r){return ft(n).pipe(Nt(i=>Q$(i.component,i.route,t,e,r)),co(i=>i!==!0,!0))}function q$(n,e,t,r){return ft(e).pipe(_i(i=>hu(G$(i.route.parent,r),W$(i.route,r),Z$(n,i.path,t),K$(n,i.route,t))),co(i=>i!==!0,!0))}function W$(n,e){return n!==null&&e&&e(new Lg(n)),he(!0)}function G$(n,e){return n!==null&&e&&e(new kg(n)),he(!0)}function K$(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return he(!0);let i=r.map(o=>Id(()=>{let a=Zu(e)??t,u=Qu(o,a),d=V$(u)?u.canActivate(e,n):Rt(a,()=>u(e,n));return Eo(d).pipe(co())}));return he(i).pipe(Ku())}function Z$(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(a=>N$(a)).filter(a=>a!==null).map(a=>Id(()=>{let u=a.guards.map(d=>{let f=Zu(a.node)??t,g=Qu(d,f),y=U$(g)?g.canActivateChild(r,n):Rt(f,()=>g(r,n));return Eo(y).pipe(co())});return he(u).pipe(Ku())}));return he(o).pipe(Ku())}function Q$(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return he(!0);let a=o.map(u=>{let d=Zu(e)??i,f=Qu(u,d),g=j$(f)?f.canDeactivate(n,e,t,r):Rt(d,()=>f(n,e,t,r));return Eo(g).pipe(co())});return he(a).pipe(Ku())}function Y$(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return he(!0);let o=i.map(a=>{let u=Qu(a,n),d=F$(u)?u.canLoad(e,t):Rt(n,()=>u(e,t));return Eo(d)});return he(o).pipe(Ku(),FM(r))}function FM(n){return xp(nn(e=>{if(typeof e!="boolean")throw Bg(n,e)}),Te(e=>e===!0))}function J$(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return he(!0);let o=i.map(a=>{let u=Qu(a,n),d=B$(u)?u.canMatch(e,t):Rt(n,()=>u(e,t));return Eo(d)});return he(o).pipe(Ku(),FM(r))}var Eh=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Ih=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Vu(n){return lu(new Eh(n))}function X$(n){return lu(new te(4e3,!1))}function eH(n){return lu(kM(!1,Fn.GuardRejected))}var UI=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return he(r);if(i.numberOfChildren>1||!i.children[De])return X$(`${e.redirectTo}`);i=i.children[De]}}applyRedirectCommands(e,t,r,i,o){return tH(t,i,o).pipe(Te(a=>{if(a instanceof Ai)throw new Ih(a);let u=this.applyRedirectCreateUrlTree(a,this.urlSerializer.parse(a),e,r);if(a[0]==="/")throw new Ih(u);return u}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Ai(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let u=o.substring(1);r[i]=t[u]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),a={};return Object.entries(t.children).forEach(([u,d])=>{a[u]=this.createSegmentGroup(e,d,r,i)}),new Qe(o,a)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new te(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function tH(n,e,t){if(typeof n=="string")return he(n);let r=n,{queryParams:i,fragment:o,routeConfig:a,url:u,outlet:d,params:f,data:g,title:y}=e;return Eo(Rt(t,()=>r({params:f,data:g,queryParams:i,fragment:o,routeConfig:a,url:u,outlet:d,title:y})))}var jI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function nH(n,e,t,r,i){let o=VM(n,e,t);return o.matched?(r=T$(e,r),J$(r,e,t,i).pipe(Te(a=>a===!0?o:Q({},jI)))):he(o)}function VM(n,e,t){if(e.path==="**")return rH(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?Q({},jI):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||fM)(t,n,e);if(!i)return Q({},jI);let o={};Object.entries(i.posParams??{}).forEach(([u,d])=>{o[u]=d.path});let a=i.consumed.length>0?Q(Q({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function rH(n){return{matched:!0,parameters:n.length>0?mM(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function lM(n,e,t,r){return t.length>0&&sH(n,t,r)?{segmentGroup:new Qe(e,oH(r,new Qe(t,n.children))),slicedSegments:[]}:t.length===0&&aH(n,t,r)?{segmentGroup:new Qe(n.segments,iH(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Qe(n.segments,n.children),slicedSegments:t}}function iH(n,e,t,r){let i={};for(let o of t)if(zg(n,e,o)&&!r[Yr(o)]){let a=new Qe([],{});i[Yr(o)]=a}return Q(Q({},r),i)}function oH(n,e){let t={};t[De]=e;for(let r of n)if(r.path===""&&Yr(r)!==De){let i=new Qe([],{});t[Yr(r)]=i}return t}function sH(n,e,t){return t.some(r=>zg(n,e,r)&&Yr(r)!==De)}function aH(n,e,t){return t.some(r=>zg(n,e,r))}function zg(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function cH(n,e,t){return e.length===0&&!n.children[t]}var BI=class{};function uH(n,e,t,r,i,o,a="emptyOnly"){return new $I(n,e,t,r,i,a,o).recognize()}var lH=31,$I=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,a,u){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=u,this.applyRedirects=new UI(this.urlSerializer,this.urlTree)}noMatchError(e){return new te(4002,`'${e.segmentGroup}'`)}recognize(){let e=lM(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Te(({children:t,rootSnapshot:r})=>{let i=new pr(r,t),o=new yh("",i),a=TM(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),{state:o,tree:a}}))}match(e){let t=new Ka([],Object.freeze({}),Object.freeze(Q({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),De,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,De,t).pipe(Te(r=>({children:r,rootSnapshot:t})),so(r=>{if(r instanceof Ih)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Eh?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Te(a=>a instanceof pr?[a]:[]))}processChildren(e,t,r,i){let o=[];for(let a of Object.keys(r.children))a==="primary"?o.unshift(a):o.push(a);return ft(o).pipe(_i(a=>{let u=r.children[a],d=C$(t,a);return this.processSegmentGroup(e,d,u,a,i)}),Qp((a,u)=>(a.push(...u),a)),ts(null),Wy(),Nt(a=>{if(a===null)return Vu(r);let u=UM(a);return dH(u),he(u)}))}processSegment(e,t,r,i,o,a,u){return ft(t).pipe(_i(d=>this.processSegmentAgainstRoute(d._injector??e,t,d,r,i,o,a,u).pipe(so(f=>{if(f instanceof Eh)return he(null);throw f}))),co(d=>!!d),so(d=>{if(LM(d))return cH(r,i,o)?he(new BI):Vu(r);throw d}))}processSegmentAgainstRoute(e,t,r,i,o,a,u,d){return Yr(r)!==a&&(a===De||!zg(i,o,r))?Vu(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,a,d):this.allowRedirects&&u?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,a,d):Vu(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,a,u){let{matched:d,parameters:f,consumedSegments:g,positionalParamSegments:y,remainingSegments:E}=VM(t,i,o);if(!d)return Vu(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>lH&&(this.allowRedirects=!1));let b=new Ka(o,f,Object.freeze(Q({},this.urlTree.queryParams)),this.urlTree.fragment,dM(i),Yr(i),i.component??i._loadedComponent??null,i,hM(i)),N=jg(b,u,this.paramsInheritanceStrategy);return b.params=Object.freeze(N.params),b.data=Object.freeze(N.data),this.applyRedirects.applyRedirectCommands(g,i.redirectTo,y,b,e).pipe(mn(F=>this.applyRedirects.lineralizeSegments(i,F)),Nt(F=>this.processSegment(e,r,t,F.concat(E),a,!1,u)))}matchSegmentAgainstRoute(e,t,r,i,o,a){let u=nH(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),u.pipe(mn(d=>d.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(mn(({routes:f})=>{let g=r._loadedInjector??e,{parameters:y,consumedSegments:E,remainingSegments:b}=d,N=new Ka(E,y,Object.freeze(Q({},this.urlTree.queryParams)),this.urlTree.fragment,dM(r),Yr(r),r.component??r._loadedComponent??null,r,hM(r)),$=jg(N,a,this.paramsInheritanceStrategy);N.params=Object.freeze($.params),N.data=Object.freeze($.data);let{segmentGroup:F,slicedSegments:q}=lM(t,E,b,f);if(q.length===0&&F.hasChildren())return this.processChildren(g,f,F,N).pipe(Te(se=>new pr(N,se)));if(f.length===0&&q.length===0)return he(new pr(N,[]));let oe=Yr(r)===o;return this.processSegment(g,f,F,q,oe?De:o,!0,N).pipe(Te(se=>new pr(N,se instanceof pr?[se]:[])))}))):Vu(t)))}getChildConfig(e,t,r){return t.children?he({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?he({routes:t._loadedRoutes,injector:t._loadedInjector}):Y$(e,t,r,this.urlSerializer).pipe(Nt(i=>i?this.configLoader.loadChildren(e,t).pipe(nn(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):eH(t))):he({routes:[],injector:e})}};function dH(n){n.sort((e,t)=>e.value.outlet===De?-1:t.value.outlet===De?1:e.value.outlet.localeCompare(t.value.outlet))}function hH(n){let e=n.value.routeConfig;return e&&e.path===""}function UM(n){let e=[],t=new Set;for(let r of n){if(!hH(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=UM(r.children);e.push(new pr(r.value,i))}return e.filter(r=>!t.has(r))}function dM(n){return n.data||{}}function hM(n){return n.resolve||{}}function fH(n,e,t,r,i,o){return Nt(a=>uH(n,e,t,r,a.extractedUrl,i,o).pipe(Te(({state:u,tree:d})=>we(Q({},a),{targetSnapshot:u,urlAfterRedirects:d}))))}function pH(n,e){return Nt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return he(t);let o=new Set(i.map(d=>d.route)),a=new Set;for(let d of o)if(!a.has(d))for(let f of jM(d))a.add(f);let u=0;return ft(a).pipe(_i(d=>o.has(d)?mH(d,r,n,e):(d.data=jg(d,d.parent,n).resolve,he(void 0))),nn(()=>u++),fu(1),Nt(d=>u===a.size?he(t):zn))})}function jM(n){let e=n.children.map(t=>jM(t)).flat();return[n,...e]}function mH(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!MM(i)&&(o[bh]=i.title),Id(()=>(n.data=jg(n,n.parent,t).resolve,gH(o,n,e,r).pipe(Te(a=>(n._resolvedData=a,n.data=Q(Q({},n.data),a),null)))))}function gH(n,e,t,r){let i=xI(n);if(i.length===0)return he({});let o={};return ft(i).pipe(Nt(a=>_H(n[a],e,t,r).pipe(co(),nn(u=>{if(u instanceof Gu)throw Bg(new bs,u);o[a]=u}))),fu(1),Te(()=>o),so(a=>LM(a)?zn:lu(a)))}function _H(n,e,t,r){let i=Zu(e)??r,o=Qu(n,i),a=o.resolve?o.resolve(e,t):Rt(i,()=>o(e,t));return Eo(a)}function AI(n){return mn(e=>{let t=n(e);return t?ft(t).pipe(Te(()=>e)):he(e)})}var GI=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===De);return r}getResolvedTitleForRoute(t){return t.data[bh]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>B(BM),providedIn:"root"})}return n})(),BM=(()=>{class n extends GI{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(le(oM))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ds=new J("",{providedIn:"root",factory:()=>({})}),Ja=new J(""),qg=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=B(JE);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return he(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Eo(Rt(t,()=>r.loadComponent())).pipe(Te(HM),mn(zM),nn(a=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=a}),ns(()=>{this.componentLoaders.delete(r)})),o=new su(i,()=>new Bt).pipe(ou());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return he({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=$M(r,this.compiler,t,this.onLoadEndListener).pipe(ns(()=>{this.childrenLoaders.delete(r)})),a=new su(o,()=>new Bt).pipe(ou());return this.childrenLoaders.set(r,a),a}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $M(n,e,t,r){return Eo(Rt(t,()=>n.loadChildren())).pipe(Te(HM),mn(zM),Nt(i=>i instanceof Xm||Array.isArray(i)?he(i):ft(e.compileModuleAsync(i))),Te(i=>{r&&r(n);let o,a,u=!1;return Array.isArray(i)?(a=i,u=!0):(o=i.create(t).injector,a=o.get(Ja,[],{optional:!0,self:!0}).flat()),{routes:a.map(WI),injector:o}}))}function vH(n){return n&&typeof n=="object"&&"default"in n}function HM(n){return vH(n)?n.default:n}function zM(n){return he(n)}var Wg=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>B(yH),providedIn:"root"})}return n})(),yH=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),KI=new J(""),ZI=new J("");function qM(n,e,t){let r=n.get(ZI),i=n.get(xt);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(f=>setTimeout(f));let o,a=new Promise(f=>{o=f}),u=i.startViewTransition(()=>(o(),wH(n)));u.ready.catch(f=>{});let{onViewTransitionCreated:d}=r;return d&&Rt(n,()=>d({transition:u,from:e,to:t})),a}function wH(n){return new Promise(e=>{Zm({read:()=>setTimeout(e)},{injector:n})})}var QI=new J(""),Gg=(()=>{class n{currentNavigation=Ct(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Bt;transitionAbortWithErrorSubject=new Bt;configLoader=B(qg);environmentInjector=B(Tt);destroyRef=B(qr);urlSerializer=B(Qa);rootContexts=B(Ya);location=B(ys);inputBindingEnabled=B(Ch,{optional:!0})!==null;titleStrategy=B(GI);options=B(Ds,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=B(Wg);createViewTransition=B(KI,{optional:!0});navigationErrorHandler=B(QI,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>he(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Pg(i)),r=i=>this.events.next(new Ng(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;sn(()=>{this.transitions?.next(we(Q({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new fn(null),this.transitions.pipe(pn(r=>r!==null),mn(r=>{let i=!1;return he(r).pipe(mn(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Fn.SupersededByNewNavigation),zn;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?we(Q({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&u!=="reload")return this.events.next(new Ri(o.id,this.urlSerializer.serialize(o.rawUrl),"",Hu.IgnoredSameUrlNavigation)),o.resolve(!1),zn;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return he(o).pipe(mn(d=>(this.events.next(new Cs(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),d.id!==this.navigationId?zn:Promise.resolve(d))),fH(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),nn(d=>{r.targetSnapshot=d.targetSnapshot,r.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation.update(g=>(g.finalUrl=d.urlAfterRedirects,g));let f=new gh(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:d,extractedUrl:f,source:g,restoredState:y,extras:E}=o,b=new Cs(d,this.urlSerializer.serialize(f),g,y);this.events.next(b);let N=RM(this.rootComponentType).snapshot;return this.currentTransition=r=we(Q({},o),{targetSnapshot:N,urlAfterRedirects:f,extras:we(Q({},E),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update($=>($.finalUrl=f,$)),he(r)}else return this.events.next(new Ri(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Hu.IgnoredByUrlHandlingStrategy)),o.resolve(!1),zn}),nn(o=>{let a=new Ag(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),Te(o=>(this.currentTransition=r=we(Q({},o),{guards:P$(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),H$(this.environmentInjector,o=>this.events.next(o)),nn(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Bg(this.urlSerializer,o.guardsResult);let a=new Rg(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),pn(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Fn.GuardRejected),!1)),AI(o=>{if(o.guards.canActivateChecks.length!==0)return he(o).pipe(nn(a=>{let u=new xg(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),mn(a=>{let u=!1;return he(a).pipe(pH(this.paramsInheritanceStrategy,this.environmentInjector),nn({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",Fn.NoDataFromResolver)}}))}),nn(a=>{let u=new Mg(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),AI(o=>{let a=u=>{let d=[];if(u.routeConfig?.loadComponent){let f=Zu(u)??this.environmentInjector;d.push(this.configLoader.loadComponent(f,u.routeConfig).pipe(nn(g=>{u.component=g}),Te(()=>{})))}for(let f of u.children)d.push(...a(f));return d};return Ed(a(o.targetSnapshot.root)).pipe(ts(null),ao(1))}),AI(()=>this.afterPreactivation()),mn(()=>{let{currentSnapshot:o,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return u?ft(u).pipe(Te(()=>r)):he(r)}),Te(o=>{let a=S$(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=we(Q({},o),{targetRouterState:a}),this.currentNavigation.update(u=>(u.targetRouterState=a,u)),r}),nn(()=>{this.events.next(new _h)}),M$(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),ao(1),Jp(new be(o=>{let a=r.abortController.signal,u=()=>o.next();return a.addEventListener("abort",u),()=>a.removeEventListener("abort",u)}).pipe(pn(()=>!i&&!r.targetRouterState),nn(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Fn.Aborted)}))),nn({next:o=>{i=!0,this.lastSuccessfulNavigation=sn(this.currentNavigation),this.events.next(new Mr(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Jp(this.transitionAbortWithErrorSubject.pipe(nn(o=>{throw o}))),ns(()=>{i||this.cancelNavigationTransition(r,"",Fn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),so(o=>{if(this.destroyed)return r.resolve(!1),zn;if(i=!0,OM(o))this.events.next(new Si(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),x$(o)?this.events.next(new Wu(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let a=new zu(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let u=Rt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof Gu){let{message:d,cancellationCode:f}=Bg(this.urlSerializer,u);this.events.next(new Si(r.id,this.urlSerializer.serialize(r.extractedUrl),d,f)),this.events.next(new Wu(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return zn}))}))}cancelNavigationTransition(t,r,i){let o=new Si(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=sn(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function EH(n){return n!==Bu}var WM=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>B(IH),providedIn:"root"})}return n})(),Hg=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},IH=(()=>{class n extends Hg{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Gr(n)))(i||n)}})();static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),GM=(()=>{class n{urlSerializer=B(Qa);options=B(Ds,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=B(ys);urlHandlingStrategy=B(Wg);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Ai;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,a=i??o;return a instanceof Ai?this.urlSerializer.serialize(a):a}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=RM(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>B(bH),providedIn:"root"})}return n})(),bH=(()=>{class n extends GM{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Cs?this.updateStateMemento():t instanceof Ri?this.commitTransition(r):t instanceof gh?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof _h?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Si&&t.code!==Fn.SupersededByNewNavigation&&t.code!==Fn.Redirect?this.restoreHistory(r):t instanceof zu?this.restoreHistory(r,!0):t instanceof Mr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:a}=r;if(this.location.isCurrentPathEqualTo(t)||o){let u=this.browserPageId,d=Q(Q({},a),this.generateNgRouterState(i,u));this.location.replaceState(t,"",d)}else{let u=Q(Q({},a),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",u)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Gr(n)))(i||n)}})();static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Kg(n,e){n.events.pipe(pn(t=>t instanceof Mr||t instanceof Si||t instanceof zu||t instanceof Ri),Te(t=>t instanceof Mr||t instanceof Ri?0:(t instanceof Si?t.code===Fn.Redirect||t.code===Fn.SupersededByNewNavigation:!1)?2:1),pn(t=>t!==2),ao(1)).subscribe(()=>{e()})}var TH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},CH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Mt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=B(GE);stateManager=B(GM);options=B(Ds,{optional:!0})||{};pendingTasks=B(Ei);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=B(Gg);urlSerializer=B(Qa);location=B(ys);urlHandlingStrategy=B(Wg);injector=B(Tt);_events=new Bt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=B(WM);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=B(Ja,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!B(Ch,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new At;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=sn(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Si&&r.code!==Fn.Redirect&&r.code!==Fn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Mr)this.navigated=!0;else if(r instanceof Wu){let a=r.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),d=Q({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||EH(i.source)},a);this.scheduleNavigation(u,Bu,null,d,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}b$(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Bu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},a=i?.navigationId?i:null;if(i){let d=Q({},i);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(o.state=d)}let u=this.parseUrl(t);this.scheduleNavigation(u,r,a,o).catch(d=>{this.disposed||this.injector.get(Kn)(d)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return sn(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(WI),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:a,queryParamsHandling:u,preserveFragment:d}=r,f=d?this.currentUrlTree.fragment:a,g=null;switch(u??this.options.defaultQueryParamsHandling){case"merge":g=Q(Q({},this.currentUrlTree.queryParams),o);break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=o||null}g!==null&&(g=this.removeEmptyProps(g));let y;try{let E=i?i.snapshot:this.routerState.snapshot.root;y=CM(E)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),y=this.currentUrlTree.root}return DM(y,t,g,f??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Ts(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Bu,null,r)}navigate(t,r={skipLocationChange:!1}){return DH(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(fo(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=Q({},TH):r===!1?i=Q({},CH):i=r,Ts(t))return sM(this.currentUrlTree,t,i);let o=this.parseUrl(t);return sM(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,a){if(this.disposed)return Promise.resolve(!1);let u,d,f;a?(u=a.resolve,d=a.reject,f=a.promise):f=new Promise((y,E)=>{u=y,d=E});let g=this.pendingTasks.add();return Kg(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(g))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:u,reject:d,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(y=>Promise.reject(y))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function DH(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new te(4008,!1)}var Mi=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Ct(null);get href(){return sn(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Bt;applicationErrorHandler=B(Kn);options=B(Ds,{optional:!0});constructor(t,r,i,o,a,u){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=a,this.locationStrategy=u,this.reactiveHref.set(B(new ig("href"),{optional:!0}));let d=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=d==="a"||d==="area"||!!(typeof customElements=="object"&&customElements.get(d)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Mr&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ts(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,a){let u=this.urlTree;if(u===null||this.isAnchorElement&&(t!==0||r||i||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let d={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,d)?.catch(f=>{this.applicationErrorHandler(f)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Ts(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(ue(Mt),ue(xi),Gd("tabindex"),ue(fs),ue(vo),ue(Qr))};static \u0275dir=Dt({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&_e("click",function(a){return i.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&gs("href",i.reactiveHref(),AE)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",vs],skipLocationChange:[2,"skipLocationChange","skipLocationChange",vs],replaceUrl:[2,"replaceUrl","replaceUrl",vs],routerLink:"routerLink"},features:[_o]})}return n})();var Sh=class{};var KM=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(pn(t=>t instanceof Mr),_i(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Mu(o.providers,t,`Route: ${o.path}`));let a=o._injector??t,u=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(u,o.children??o._loadedRoutes))}return ft(i).pipe(du())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=he(null);let o=i.pipe(Nt(a=>a===null?he(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(t,r);return ft([o,a]).pipe(du())}else return o})}static \u0275fac=function(r){return new(r||n)(le(Mt),le(Tt),le(Sh),le(qg))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ZM=new J(""),SH=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Bu;restoredId=0;store={};constructor(t,r,i,o,a={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=a,a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Cs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Mr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Ri&&t.code===Hu.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof qu))return;let r={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,r):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>T(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new qu(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){qE()};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();function JI(n,...e){return Nn([{provide:Ja,multi:!0,useValue:n},[],{provide:xi,useFactory:QM,deps:[Mt]},{provide:Yd,multi:!0,useFactory:YM},e.map(t=>t.\u0275providers)])}function QM(n){return n.routerState.root}function Ah(n,e){return{\u0275kind:n,\u0275providers:e}}function YM(){let n=B(_t);return e=>{let t=n.get(ms);if(e!==t.components[0])return;let r=n.get(Mt),i=n.get(JM);n.get(XI)===1&&r.initialNavigation(),n.get(tP,null,{optional:!0})?.setUpPreloading(),n.get(ZM,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var JM=new J("",{factory:()=>new Bt}),XI=new J("",{providedIn:"root",factory:()=>1});function XM(){let n=[{provide:CE,useValue:!0},{provide:XI,useValue:0},eg(()=>{let e=B(_t);return e.get(aI,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(Mt),o=e.get(JM);Kg(i,()=>{r(!0)}),e.get(Gg).afterPreactivation=()=>(r(!0),o.closed?he(void 0):o),i.initialNavigation()}))})];return Ah(2,n)}function eP(){let n=[eg(()=>{B(Mt).setUpLocationChangeListener()}),{provide:XI,useValue:2}];return Ah(3,n)}var tP=new J("");function nP(n){return Ah(0,[{provide:tP,useExisting:KM},{provide:Sh,useExisting:n}])}function rP(){return Ah(8,[zI,{provide:Ch,useExisting:zI}])}function iP(n){Ru("NgRouterViewTransitions");let e=[{provide:KI,useValue:qM},{provide:ZI,useValue:Q({skipNextTransition:!!n?.skipInitialTransition},n)}];return Ah(9,e)}var oP=[ys,{provide:Qa,useClass:bs},Mt,Ya,{provide:xi,useFactory:QM,deps:[Mt]},qg,[]],Rh=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[oP,[],{provide:Ja,multi:!0,useValue:t},[],r?.errorHandler?{provide:QI,useValue:r.errorHandler}:[],{provide:Ds,useValue:r||{}},r?.useHash?RH():xH(),AH(),r?.preloadingStrategy?nP(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?MH(r):[],r?.bindToComponentInputs?rP().\u0275providers:[],r?.enableViewTransitions?iP().\u0275providers:[],PH()]}}static forChild(t){return{ngModule:n,providers:[{provide:Ja,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Rr({type:n});static \u0275inj=dr({})}return n})();function AH(){return{provide:ZM,useFactory:()=>{let n=B(Ox),e=B(Ge),t=B(Ds),r=B(Gg),i=B(Qa);return t.scrollOffset&&n.setOffset(t.scrollOffset),new SH(i,r,n,e,t)}}}function RH(){return{provide:Qr,useClass:cI}}function xH(){return{provide:Qr,useClass:cg}}function MH(n){return[n.initialNavigation==="disabled"?eP().\u0275providers:[],n.initialNavigation==="enabledBlocking"?XM().\u0275providers:[]]}var YI=new J("");function PH(){return[{provide:YI,useFactory:YM},{provide:Yd,multi:!0,useExisting:YI}]}var pP=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(ue(fs),ue(vo))};static \u0275dir=Dt({type:n})}return n})(),nb=(()=>{class n extends pP{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Gr(n)))(i||n)}})();static \u0275dir=Dt({type:n,features:[Zn]})}return n})(),r_=new J("");var NH={provide:r_,useExisting:lr(()=>Qn),multi:!0};function kH(){let n=xr()?xr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var OH=new J(""),Qn=(()=>{class n extends pP{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!kH())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(ue(fs),ue(vo),ue(OH,8))};static \u0275dir=Dt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&_e("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},standalone:!1,features:[Ci([NH]),Zn]})}return n})();function LH(n){return n==null||FH(n)===0}function FH(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Lh=new J(""),mP=new J("");function VH(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function UH(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function jH(n){return LH(n.value)?{required:!0}:null}function sP(n){return null}function gP(n){return n!=null}function _P(n){return ps(n)?ft(n):n}function vP(n){let e={};return n.forEach(t=>{e=t!=null?Q(Q({},e),t):e}),Object.keys(e).length===0?null:e}function yP(n,e){return e.map(t=>t(n))}function BH(n){return!n.validate}function wP(n){return n.map(e=>BH(e)?e:t=>e.validate(t))}function $H(n){if(!n)return null;let e=n.filter(gP);return e.length==0?null:function(t){return vP(yP(t,e))}}function rb(n){return n!=null?$H(wP(n)):null}function HH(n){if(!n)return null;let e=n.filter(gP);return e.length==0?null:function(t){let r=yP(t,e).map(_P);return qy(r).pipe(Te(vP))}}function ib(n){return n!=null?HH(wP(n)):null}function aP(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function zH(n){return n._rawValidators}function qH(n){return n._rawAsyncValidators}function eb(n){return n?Array.isArray(n)?n:[n]:[]}function Qg(n,e){return Array.isArray(n)?n.includes(e):n===e}function cP(n,e){let t=eb(e);return eb(n).forEach(i=>{Qg(t,i)||t.push(i)}),t}function uP(n,e){return eb(e).filter(t=>!Qg(n,t))}var Yg=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=rb(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ib(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},el=class extends Yg{name;get formDirective(){return null}get path(){return null}},Oh=class extends Yg{_parent=null;name=null;valueAccessor=null},Jg=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},WH={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Oue=we(Q({},WH),{"[class.ng-submitted]":"isSubmitted"}),Pr=(()=>{class n extends Jg{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ue(Oh,2))};static \u0275dir=Dt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&fr("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Zn]})}return n})(),EP=(()=>{class n extends Jg{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ue(el,10))};static \u0275dir=Dt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&fr("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Zn]})}return n})();var xh="VALID",Zg="INVALID",Ju="PENDING",Mh="DISABLED",Ss=class{},Xg=class extends Ss{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Nh=class extends Ss{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},kh=class extends Ss{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Xu=class extends Ss{status;source;constructor(e,t){super(),this.status=e,this.source=t}},tb=class extends Ss{source;constructor(e){super(),this.source=e}},e_=class extends Ss{source;constructor(e){super(),this.source=e}};function IP(n){return(i_(n)?n.validators:n)||null}function GH(n){return Array.isArray(n)?rb(n):n||null}function bP(n,e){return(i_(e)?e.asyncValidators:n)||null}function KH(n){return Array.isArray(n)?ib(n):n||null}function i_(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function ZH(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new te(1e3,"");if(!r[t])throw new te(1001,"")}function QH(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new te(1002,"")})}var t_=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return sn(this.statusReactive)}set status(e){sn(()=>this.statusReactive.set(e))}_status=Nu(()=>this.statusReactive());statusReactive=Ct(void 0);get valid(){return this.status===xh}get invalid(){return this.status===Zg}get pending(){return this.status==Ju}get disabled(){return this.status===Mh}get enabled(){return this.status!==Mh}errors;get pristine(){return sn(this.pristineReactive)}set pristine(e){sn(()=>this.pristineReactive.set(e))}_pristine=Nu(()=>this.pristineReactive());pristineReactive=Ct(!0);get dirty(){return!this.pristine}get touched(){return sn(this.touchedReactive)}set touched(e){sn(()=>this.touchedReactive.set(e))}_touched=Nu(()=>this.touchedReactive());touchedReactive=Ct(!1);get untouched(){return!this.touched}_events=new Bt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(cP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(cP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(uP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(uP(e,this._rawAsyncValidators))}hasValidator(e){return Qg(this._rawValidators,e)}hasAsyncValidator(e){return Qg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(we(Q({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new kh(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new kh(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(we(Q({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Nh(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Nh(!0,r))}markAsPending(e={}){this.status=Ju;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Xu(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(we(Q({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Mh,this.errors=null,this._forEachChild(i=>{i.disable(we(Q({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Xg(this.value,r)),this._events.next(new Xu(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(we(Q({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=xh,this._forEachChild(r=>{r.enable(we(Q({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(we(Q({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===xh||this.status===Ju)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Xg(this.value,t)),this._events.next(new Xu(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(we(Q({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Mh:xh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Ju,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=_P(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Xu(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ht,this.statusChanges=new Ht}_calculateStatus(){return this._allControlsDisabled()?Mh:this.errors?Zg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ju)?Ju:this._anyControlsHaveStatus(Zg)?Zg:xh}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Nh(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new kh(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){i_(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=GH(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=KH(this._rawAsyncValidators)}},n_=class extends t_{constructor(e,t,r){super(IP(t),bP(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){QH(this,!0,e),Object.keys(e).forEach(r=>{ZH(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new e_(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var ob=new J("",{providedIn:"root",factory:()=>sb}),sb="always";function YH(n,e){return[...e.path,n]}function TP(n,e,t=sb){CP(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),XH(n,e),tz(n,e),ez(n,e),JH(n,e)}function lP(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function JH(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function CP(n,e){let t=zH(n);e.validator!==null?n.setValidators(aP(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=qH(n);e.asyncValidator!==null?n.setAsyncValidators(aP(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();lP(e._rawValidators,i),lP(e._rawAsyncValidators,i)}function XH(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&DP(n,e)})}function ez(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&DP(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function DP(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function tz(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function nz(n,e){n==null,CP(n,e)}function rz(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function iz(n){return Object.getPrototypeOf(n.constructor)===nb}function oz(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function sz(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Qn?t=o:iz(o)?r=o:i=o}),i||r||t||null}var az={provide:el,useExisting:lr(()=>ab)},Ph=Promise.resolve(),ab=(()=>{class n extends el{callSetDisabledState;get submitted(){return sn(this.submittedReactive)}_submitted=Nu(()=>this.submittedReactive());submittedReactive=Ct(!1);_directives=new Set;form;ngSubmit=new Ht;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new n_({},rb(t),ib(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ph.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),TP(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ph.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Ph.then(()=>{let r=this._findContainer(t.path),i=new n_({});nz(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ph.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Ph.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),oz(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new tb(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(ue(Lh,10),ue(mP,10),ue(ob,8))};static \u0275dir=Dt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&_e("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Ci([az]),Zn]})}return n})();function dP(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function hP(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var cz=class extends t_{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(IP(t),bP(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),i_(t)&&(t.nonNullable||t.initialValueIsDefault)&&(hP(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new e_(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){dP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){dP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){hP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var uz={provide:Oh,useExisting:lr(()=>gr)},fP=Promise.resolve(),gr=(()=>{class n extends Oh{_changeDetectorRef;callSetDisabledState;control=new cz;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ht;constructor(t,r,i,o,a,u){super(),this._changeDetectorRef=a,this.callSetDisabledState=u,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=sz(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),rz(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){TP(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){fP.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&vs(r);fP.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?YH(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(ue(el,9),ue(Lh,10),ue(mP,10),ue(r_,10),ue(Ha,8),ue(ob,8))};static \u0275dir=Dt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Ci([uz]),Zn,_o]})}return n})();var SP=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Dt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),lz={provide:r_,useExisting:lr(()=>cb),multi:!0},cb=(()=>{class n extends nb{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Gr(n)))(i||n)}})();static \u0275dir=Dt({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&_e("input",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Ci([lz]),Zn]})}return n})();var dz={provide:r_,useExisting:lr(()=>ub),multi:!0},ub=(()=>{class n extends nb{writeValue(t){this.setProperty("value",parseFloat(t))}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Gr(n)))(i||n)}})();static \u0275dir=Dt({type:n,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(r,i){r&1&&_e("change",function(a){return i.onChange(a.target.value)})("input",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Ci([dz]),Zn]})}return n})();function AP(n){return typeof n=="number"?n:parseFloat(n)}var lb=(()=>{class n{_validator=sP;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):sP,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Dt({type:n,features:[_o]})}return n})(),hz={provide:Lh,useExisting:lr(()=>db),multi:!0},db=(()=>{class n extends lb{max;inputName="max";normalizeInput=t=>AP(t);createValidator=t=>UH(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Gr(n)))(i||n)}})();static \u0275dir=Dt({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&gs("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[Ci([hz]),Zn]})}return n})(),fz={provide:Lh,useExisting:lr(()=>hb),multi:!0},hb=(()=>{class n extends lb{min;inputName="min";normalizeInput=t=>AP(t);createValidator=t=>VH(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Gr(n)))(i||n)}})();static \u0275dir=Dt({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&gs("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[Ci([fz]),Zn]})}return n})(),pz={provide:Lh,useExisting:lr(()=>fb),multi:!0};var fb=(()=>{class n extends lb{required;inputName="required";normalizeInput=vs;createValidator=t=>jH;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Gr(n)))(i||n)}})();static \u0275dir=Dt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&gs("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Ci([pz]),Zn]})}return n})();var mz=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Rr({type:n});static \u0275inj=dr({})}return n})();var Yn=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ob,useValue:t.callSetDisabledState??sb}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Rr({type:n});static \u0275inj=dr({imports:[mz]})}return n})();var RP=()=>{};var PP=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},gz=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],a=n[t++],u=n[t++],d=((i&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{let o=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},o_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],a=i+1<n.length,u=a?n[i+1]:0,d=i+2<n.length,f=d?n[i+2]:0,g=o>>2,y=(o&3)<<4|u>>4,E=(u&15)<<2|f>>6,b=f&63;d||(b=64,a||(E=64)),r.push(t[g],t[y],t[E],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(PP(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):gz(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;let f=i<n.length?t[n.charAt(i)]:64;++i;let y=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||u==null||f==null||y==null)throw new mb;let E=o<<2|u>>4;if(r.push(E),f!==64){let b=u<<4&240|f>>2;if(r.push(b),y!==64){let N=f<<6&192|y;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},mb=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},_z=function(n){let e=PP(n);return o_.encodeByteArray(e,!0)},Vh=function(n){return _z(n).replace(/\./g,"")},s_=function(n){try{return o_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function _b(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var vz=()=>_b().__FIREBASE_DEFAULTS__,yz=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},wz=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&s_(n[1]);return e&&JSON.parse(e)},a_=()=>{try{return RP()||vz()||yz()||wz()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},vb=n=>{var e,t;return(t=(e=a_())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},c_=n=>{let e=vb(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},yb=()=>{var n;return(n=a_())===null||n===void 0?void 0:n.config},wb=n=>{var e;return(e=a_())===null||e===void 0?void 0:e[`_${n}`]};var Xa=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Pi(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function nl(n){return T(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function u_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Vh(JSON.stringify(t)),Vh(JSON.stringify(a)),""].join(".")}var Fh={};function Ez(){let n={prod:[],emulator:[]};for(let e of Object.keys(Fh))Fh[e]?n.emulator.push(e):n.prod.push(e);return n}function Iz(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var xP=!1;function rl(n,e){if(typeof window>"u"||typeof document>"u"||!Pi(window.location.host)||Fh[n]===e||Fh[n]||xP)return;Fh[n]=e;function t(E){return`__firebase__banner__${E}`}let r="__firebase__banner",o=Ez().prod.length>0;function a(){let E=document.getElementById(r);E&&E.remove()}function u(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function d(E,b){E.setAttribute("width","24"),E.setAttribute("id",b),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function f(){let E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{xP=!0,a()},E}function g(E,b){E.setAttribute("id",b),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function y(){let E=Iz(r),b=t("text"),N=document.getElementById(b)||document.createElement("span"),$=t("learnmore"),F=document.getElementById($)||document.createElement("a"),q=t("preprendIcon"),oe=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){let se=E.element;u(se),g(F,$);let ce=f();d(oe,q),se.append(oe,N,F,ce),document.body.appendChild(se)}o?(N.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}function an(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function NP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(an())}function bz(){var n;let e=(n=a_())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OP(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function LP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FP(){let n=an();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function VP(){return!bz()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Uh(){try{return typeof indexedDB=="object"}catch{return!1}}function UP(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var Tz="FirebaseError",Vn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Tz,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jr.prototype.create)}},Jr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?Cz(o,r):"Error",u=`${this.serviceName}: ${a} (${i}).`;return new Vn(i,u,r)}};function Cz(n,e){return n.replace(Dz,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Dz=/\{\$([^}]+)}/g;function jP(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ni(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],a=e[i];if(MP(o)&&MP(a)){if(!Ni(o,a))return!1}else if(o!==a)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function MP(n){return n!==null&&typeof n=="object"}function jh(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function il(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function ol(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function BP(n,e){let t=new gb(n,e);return t.subscribe.bind(t)}var gb=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Sz(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=pb),i.error===void 0&&(i.error=pb),i.complete===void 0&&(i.complete=pb);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Sz(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function pb(){}var jue=14400*1e3;function pt(n){return n&&n._delegate?n._delegate:n}var yn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ec="[DEFAULT]";var Eb=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Xa;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Rz(e))try{this.getOrInitializeService({instanceIdentifier:ec})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ec){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return T(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ec){return this.instances.has(e)}getOptions(e=ec){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,a]of this.instancesDeferred.entries()){let u=this.normalizeInstanceIdentifier(o);r===u&&a.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Az(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ec){return this.component?this.component.multipleInstances?e:ec:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Az(n){return n===ec?void 0:n}function Rz(n){return n.instantiationMode==="EAGER"}var l_=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Eb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var xz=[],Le=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Le||{}),Mz={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},Pz=Le.INFO,Nz={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},kz=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Nz[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ki=class{constructor(e){this.name=e,this._logLevel=Pz,this._logHandler=kz,this._userLogHandler=null,xz.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Mz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}};var Oz=(n,e)=>e.some(t=>n instanceof t),$P,HP;function Lz(){return $P||($P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Fz(){return HP||(HP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var zP=new WeakMap,bb=new WeakMap,qP=new WeakMap,Ib=new WeakMap,Cb=new WeakMap;function Vz(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{t(Oi(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&zP.set(t,n)}).catch(()=>{}),Cb.set(e,n),e}function Uz(n){if(bb.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});bb.set(n,e)}var Tb={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return bb.get(n);if(e==="objectStoreNames")return n.objectStoreNames||qP.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Oi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function WP(n){Tb=n(Tb)}function jz(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(d_(this),e,...t);return qP.set(r,e.sort?e.sort():[e]),Oi(r)}:Fz().includes(n)?function(...e){return n.apply(d_(this),e),Oi(zP.get(this))}:function(...e){return Oi(n.apply(d_(this),e))}}function Bz(n){return typeof n=="function"?jz(n):(n instanceof IDBTransaction&&Uz(n),Oz(n,Lz())?new Proxy(n,Tb):n)}function Oi(n){if(n instanceof IDBRequest)return Vz(n);if(Ib.has(n))return Ib.get(n);let e=Bz(n);return e!==n&&(Ib.set(n,e),Cb.set(e,n)),e}var d_=n=>Cb.get(n);function KP(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let a=indexedDB.open(n,e),u=Oi(a);return r&&a.addEventListener("upgradeneeded",d=>{r(Oi(a.result),d.oldVersion,d.newVersion,Oi(a.transaction),d)}),t&&a.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),i&&d.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}var $z=["get","getKey","getAll","getAllKeys","count"],Hz=["put","add","delete","clear"],Db=new Map;function GP(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Db.get(e))return Db.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=Hz.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||$z.includes(t)))return;let o=function(a,...u){return T(this,null,function*(){let d=this.transaction(a,i?"readwrite":"readonly"),f=d.store;return r&&(f=f.index(u.shift())),(yield Promise.all([f[t](...u),i&&d.done]))[0]})};return Db.set(e,o),o}WP(n=>we(Q({},n),{get:(e,t,r)=>GP(e,t)||n.get(e,t,r),has:(e,t)=>!!GP(e,t)||n.has(e,t)}));var Ab=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(zz(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function zz(n){let e=n.getComponent();return e?.type==="VERSION"}var Rb="@firebase/app",ZP="0.13.2";var Io=new ki("@firebase/app"),qz="@firebase/app-compat",Wz="@firebase/analytics-compat",Gz="@firebase/analytics",Kz="@firebase/app-check-compat",Zz="@firebase/app-check",Qz="@firebase/auth",Yz="@firebase/auth-compat",Jz="@firebase/database",Xz="@firebase/data-connect",e4="@firebase/database-compat",t4="@firebase/functions",n4="@firebase/functions-compat",r4="@firebase/installations",i4="@firebase/installations-compat",o4="@firebase/messaging",s4="@firebase/messaging-compat",a4="@firebase/performance",c4="@firebase/performance-compat",u4="@firebase/remote-config",l4="@firebase/remote-config-compat",d4="@firebase/storage",h4="@firebase/storage-compat",f4="@firebase/firestore",p4="@firebase/ai",m4="@firebase/firestore-compat",g4="firebase",_4="11.10.0";var xb="[DEFAULT]",v4={[Rb]:"fire-core",[qz]:"fire-core-compat",[Gz]:"fire-analytics",[Wz]:"fire-analytics-compat",[Zz]:"fire-app-check",[Kz]:"fire-app-check-compat",[Qz]:"fire-auth",[Yz]:"fire-auth-compat",[Jz]:"fire-rtdb",[Xz]:"fire-data-connect",[e4]:"fire-rtdb-compat",[t4]:"fire-fn",[n4]:"fire-fn-compat",[r4]:"fire-iid",[i4]:"fire-iid-compat",[o4]:"fire-fcm",[s4]:"fire-fcm-compat",[a4]:"fire-perf",[c4]:"fire-perf-compat",[u4]:"fire-rc",[l4]:"fire-rc-compat",[d4]:"fire-gcs",[h4]:"fire-gcs-compat",[f4]:"fire-fst",[m4]:"fire-fst-compat",[p4]:"fire-vertex","fire-js":"fire-js",[g4]:"fire-js-all"};var Bh=new Map,y4=new Map,Mb=new Map;function QP(n,e){try{n.container.addComponent(e)}catch(t){Io.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function _r(n){let e=n.name;if(Mb.has(e))return Io.debug(`There were multiple attempts to register component ${e}.`),!1;Mb.set(e,n);for(let t of Bh.values())QP(t,n);for(let t of y4.values())QP(t,n);return!0}function Rs(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Dn(n){return n==null?!1:n.settings!==void 0}var w4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},As=new Jr("app","Firebase",w4);var Pb=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw As.create("app-deleted",{appName:this._name})}};var Li=_4;function Ob(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:xb,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw As.create("bad-app-name",{appName:String(i)});if(t||(t=yb()),!t)throw As.create("no-options");let o=Bh.get(i);if(o){if(Ni(t,o.options)&&Ni(r,o.config))return o;throw As.create("duplicate-app",{appName:i})}let a=new l_(i);for(let d of Mb.values())a.addComponent(d);let u=new Pb(t,r,a);return Bh.set(i,u),u}function bo(n=xb){let e=Bh.get(n);if(!e&&n===xb&&yb())return Ob();if(!e)throw As.create("no-app",{appName:n});return e}function h_(){return Array.from(Bh.values())}function at(n,e,t){var r;let i=(r=v4[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){let u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Io.warn(u.join(" "));return}_r(new yn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var E4="firebase-heartbeat-database",I4=1,$h="firebase-heartbeat-store",Sb=null;function eN(){return Sb||(Sb=KP(E4,I4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore($h)}catch(t){console.warn(t)}}}}).catch(n=>{throw As.create("idb-open",{originalErrorMessage:n.message})})),Sb}function b4(n){return T(this,null,function*(){try{let t=(yield eN()).transaction($h),r=yield t.objectStore($h).get(tN(n));return yield t.done,r}catch(e){if(e instanceof Vn)Io.warn(e.message);else{let t=As.create("idb-get",{originalErrorMessage:e?.message});Io.warn(t.message)}}})}function YP(n,e){return T(this,null,function*(){try{let r=(yield eN()).transaction($h,"readwrite");yield r.objectStore($h).put(e,tN(n)),yield r.done}catch(t){if(t instanceof Vn)Io.warn(t.message);else{let r=As.create("idb-set",{originalErrorMessage:t?.message});Io.warn(r.message)}}})}function tN(n){return`${n.name}!${n.options.appId}`}var T4=1024,C4=30,Nb=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new kb(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return T(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=JP();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>C4){let a=S4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Io.warn(r)}})}getHeartbeatsHeader(){return T(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=JP(),{heartbeatsToSend:r,unsentEntries:i}=D4(this._heartbeatsCache.heartbeats),o=Vh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Io.warn(t),""}})}};function JP(){return new Date().toISOString().substring(0,10)}function D4(n,e=T4){let t=[],r=n.slice();for(let i of n){let o=t.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),XP(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),XP(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var kb=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return T(this,null,function*(){return Uh()?UP().then(()=>!0).catch(()=>!1):!1})}read(){return T(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield b4(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return T(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return YP(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return T(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return YP(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function XP(n){return Vh(JSON.stringify({version:2,heartbeats:n})).length}function S4(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function A4(n){_r(new yn("platform-logger",e=>new Ab(e),"PRIVATE")),_r(new yn("heartbeat",e=>new Nb(e),"PRIVATE")),at(Rb,ZP,n),at(Rb,ZP,"esm2017"),at("fire-js","")}A4("");var R4="firebase",x4="11.10.0";at(R4,x4,"app");function nN(n){n===void 0&&(n=B(_t));let e=n.get(mo);return t=>new be(r=>{let i=e.add(),o=!1;function a(){o||(i(),o=!0)}let u=t.subscribe({next:d=>{r.next(d),a()},complete:()=>{r.complete(),a()},error:d=>{r.error(d),a()}});return u.add(()=>{r.unsubscribe(),a()}),u})}var Fi=new rs("ANGULARFIRE2_VERSION");function nc(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(a=>a.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var xs=(n,e)=>{let t=e?[e]:h_(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r},sl=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(sl||{}),rN=iI()&&typeof Zone<"u"?sl.WARN:sl.SILENT;var f_=class{zone;delegate;constructor(e,t=$y){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(a){i?i.runGuarded(()=>{e.apply(this,[a])}):e.apply(this,[a])};return this.delegate.schedule(o,t,r)}},Vi=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=B(Ge);this.outsideAngular=t.runOutsideAngular(()=>new f_(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new f_(typeof Zone>"u"?void 0:Zone.current,By))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),iN=!1;function M4(n,e){!iN&&(rN>sl.SILENT||iI())&&(iN=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),rN>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function P4(n){let e=B(Ge,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function tc(n){let e=B(Ge,{optional:!0});return e?e.run(()=>n()):n()}var N4=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Rt(t,()=>tc(()=>n.apply(void 0,r)))),dt=(n,e,t)=>(t||=e?sl.WARN:sl.VERBOSE,function(){let r,i=arguments,o,a,u;try{o=B(Vi),a=B(mo),u=B(Tt)}catch{return M4(n,t),n.apply(this,i)}for(let f=0;f<arguments.length;f++)typeof i[f]=="function"&&(e&&(r||=tc(()=>a.add())),i[f]=N4(i[f],r,u));let d=P4(()=>n.apply(this,i));return e?d instanceof be?d.pipe(es(o.outsideAngular),Xo(o.insideAngular),nN(u)):d instanceof Promise?tc(()=>{let f=a.add();return new Promise((g,y)=>{d.then(E=>Rt(u,()=>tc(()=>g(E))),E=>Rt(u,()=>tc(()=>y(E)))).finally(f)})}):typeof d=="function"&&r?function(){return setTimeout(r,0),d.apply(this,arguments)}:tc(()=>d):d instanceof be?d.pipe(es(o.outsideAngular),Xo(o.insideAngular)):tc(()=>d)});var Xr=class{constructor(e){return e}},To=class{constructor(){return h_()}};function k4(n){return n&&n.length===1?n[0]:new Xr(bo())}var Lb=new J("angularfire2._apps"),O4={provide:Xr,useFactory:k4,deps:[[new on,Lb]]},L4={provide:To,deps:[[new on,Lb]]};function F4(n){return(e,t)=>{let r=t.get(Ua);at("angularfire",Fi.full,"core"),at("angularfire",Fi.full,"app"),at("angular",ow.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Xr(i)}}function oN(n,...e){return Nn([O4,L4,{provide:Lb,useFactory:F4(n),multi:!0,deps:[Ge,_t,Vi,...e]}])}var sN=dt(Ob,!0);var V4=new Map,U4={activated:!1,tokenObservers:[]},j4={initialized:!1,enabled:!1};function ei(n){return V4.get(n)||Object.assign({},U4)}function lN(){return j4}var B4="https://content-firebaseappcheck.googleapis.com/v1";var $4="exchangeDebugToken",aN={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Hle=1440*60*1e3;var Ub=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return T(this,null,function*(){this.stop();try{this.pending=new Xa,this.pending.promise.catch(t=>{}),yield H4(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Xa,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function H4(n){return new Promise(e=>{setTimeout(e,n)})}var z4={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Ms=new Jr("appCheck","AppCheck",z4);function dN(n){if(!ei(n).activated)throw Ms.create("use-before-activation",{appName:n.name})}function hN(r,i){return T(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});if(a){let b=yield a.getHeartbeatsHeader();b&&(o["X-Firebase-Client"]=b)}let u={method:"POST",body:JSON.stringify(e),headers:o},d;try{d=yield fetch(n,u)}catch(b){throw Ms.create("fetch-network-error",{originalErrorMessage:b?.message})}if(d.status!==200)throw Ms.create("fetch-status-error",{httpStatus:d.status});let f;try{f=yield d.json()}catch(b){throw Ms.create("fetch-parse-error",{originalErrorMessage:b?.message})}let g=f.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw Ms.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});let y=Number(g[1])*1e3,E=Date.now();return{token:f.token,expireTimeMillis:E+y,issuedAtTimeMillis:E}})}function fN(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${B4}/projects/${t}/apps/${r}:${$4}?key=${i}`,body:{debug_token:e}}}var q4="firebase-app-check-database",W4=1,jb="firebase-app-check-store";var p_=null;function G4(){return p_||(p_=new Promise((n,e)=>{try{let t=indexedDB.open(q4,W4);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ms.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(jb,{keyPath:"compositeKey"})}}}catch(t){e(Ms.create("storage-open",{originalErrorMessage:t?.message}))}}),p_)}function K4(n,e){return Z4(Q4(n),e)}function Z4(n,e){return T(this,null,function*(){let r=(yield G4()).transaction(jb,"readwrite"),o=r.objectStore(jb).put({compositeKey:n,value:e});return new Promise((a,u)=>{o.onsuccess=d=>{a()},r.onerror=d=>{var f;u(Ms.create("storage-set",{originalErrorMessage:(f=d.target.error)===null||f===void 0?void 0:f.message}))}})})}function Q4(n){return`${n.options.appId}-${n.name}`}var Hh=new ki("@firebase/app-check");function Fb(n,e){return Uh()?K4(n,e).catch(t=>{Hh.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function pN(){return lN().enabled}function mN(){return T(this,null,function*(){let n=lN();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Y4={error:"UNKNOWN_ERROR"};function J4(n){return o_.encodeString(JSON.stringify(n),!1)}function Bb(n,e=!1,t=!1){return T(this,null,function*(){let r=n.app;dN(r);let i=ei(r),o=i.token,a;if(o&&!zh(o)&&(i.token=void 0,o=void 0),!o){let f=yield i.cachedTokenPromise;f&&(zh(f)?o=f:yield Fb(r,void 0))}if(!e&&o&&zh(o))return{token:o.token};let u=!1;if(pN())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=hN(fN(r,yield mN()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),u=!0);let f=yield i.exchangeTokenPromise;return yield Fb(r,f),i.token=f,{token:f.token}}catch(f){return f.code==="appCheck/throttled"||f.code==="appCheck/initial-throttle"?Hh.warn(f.message):t&&Hh.error(f),Vb(f)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),u=!0),o=yield ei(r).exchangeTokenPromise}catch(f){f.code==="appCheck/throttled"||f.code==="appCheck/initial-throttle"?Hh.warn(f.message):t&&Hh.error(f),a=f}let d;return o?a?zh(o)?d={token:o.token,internalError:a}:d=Vb(a):(d={token:o.token},i.token=o,yield Fb(r,o)):d=Vb(a),u&&n3(r,d),d})}function X4(n){return T(this,null,function*(){let e=n.app;dN(e);let{provider:t}=ei(e);if(pN()){let r=yield mN(),{token:i}=yield hN(fN(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function e3(n,e,t,r){let{app:i}=n,o=ei(i),a={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,a],o.token&&zh(o.token)){let u=o.token;Promise.resolve().then(()=>{t({token:u.token}),cN(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>cN(n))}function gN(n,e){let t=ei(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function cN(n){let{app:e}=n,t=ei(e),r=t.tokenRefresher;r||(r=t3(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function t3(n){let{app:e}=n;return new Ub(()=>T(null,null,function*(){let t=ei(e),r;if(t.token?r=yield Bb(n,!0):r=yield Bb(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=ei(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},aN.RETRIAL_MIN_WAIT,aN.RETRIAL_MAX_WAIT)}function n3(n,e){let t=ei(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function zh(n){return n.expireTimeMillis-Date.now()>0}function Vb(n){return{token:J4(Y4),error:n}}var $b=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=ei(this.app);for(let t of e)gN(this.app,t.next);return Promise.resolve()}};function r3(n,e){return new $b(n,e)}function i3(n){return{getToken:e=>Bb(n,e),getLimitedUseToken:()=>X4(n),addTokenListener:e=>e3(n,"INTERNAL",e),removeTokenListener:e=>gN(n.app,e)}}var o3="@firebase/app-check",s3="0.10.1";var a3="app-check",uN="app-check-internal";function c3(){_r(new yn(a3,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return r3(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(uN).initialize()})),_r(new yn(uN,n=>{let e=n.getProvider("app-check").getImmediate();return i3(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),at(o3,s3)}c3();var u3="app-check";var Ps=class{constructor(){return xs(u3)}};var l3=["localhost","0.0.0.0","127.0.0.1"],nde=typeof window<"u"&&l3.includes(window.location.hostname);function PN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var NN=PN,kN=new Jr("auth","Firebase",PN());var w_=new ki("@firebase/auth");function d3(n,...e){w_.logLevel<=Le.WARN&&w_.warn(`Auth (${Li}): ${n}`,...e)}function g_(n,...e){w_.logLevel<=Le.ERROR&&w_.error(`Auth (${Li}): ${n}`,...e)}function ji(n,...e){throw fT(n,...e)}function rc(n,...e){return fT(n,...e)}function ON(n,e,t){let r=Object.assign(Object.assign({},NN()),{[e]:t});return new Jr("auth","Firebase",r).create(e,{appName:n.name})}function So(n){return ON(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fT(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return kN.create(n,...e)}function ge(n,e,...t){if(!n)throw fT(e,...t)}function Co(n){let e="INTERNAL ASSERTION FAILED: "+n;throw g_(e),new Error(e)}function Os(n,e){n||Co(e)}function Wb(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function h3(){return _N()==="http:"||_N()==="https:"}function _N(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function f3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(h3()||OP()||"connection"in navigator)?navigator.onLine:!0}function p3(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ic=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Os(t>e,"Short delay should be less than long delay!"),this.isMobile=NP()||LP()}get(){return f3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function pT(n,e){Os(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var E_=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Co("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Co("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Co("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var m3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var g3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_3=new ic(3e4,6e4);function Ls(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Fs(o,a,u,d){return T(this,arguments,function*(n,e,t,r,i={}){return LN(n,i,()=>T(null,null,function*(){let f={},g={};r&&(e==="GET"?g=r:f={body:JSON.stringify(r)});let y=jh(Object.assign({key:n.config.apiKey},g)).slice(1),E=yield n._getAdditionalHeaders();E["Content-Type"]="application/json",n.languageCode&&(E["X-Firebase-Locale"]=n.languageCode);let b=Object.assign({method:e,headers:E},f);return kP()||(b.referrerPolicy="no-referrer"),n.emulatorConfig&&Pi(n.emulatorConfig.host)&&(b.credentials="include"),E_.fetch()(yield FN(n,n.config.apiHost,t,y),b)}))})}function LN(n,e,t){return T(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},m3),e);try{let i=new Gb(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let a=yield o.json();if("needConfirmation"in a)throw m_(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{let u=o.ok?a.errorMessage:a.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw m_(n,"credential-already-in-use",a);if(d==="EMAIL_EXISTS")throw m_(n,"email-already-in-use",a);if(d==="USER_DISABLED")throw m_(n,"user-disabled",a);let g=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw ON(n,g,f);ji(n,g)}}catch(i){if(i instanceof Vn)throw i;ji(n,"network-request-failed",{message:String(i)})}})}function Xh(o,a,u,d){return T(this,arguments,function*(n,e,t,r,i={}){let f=yield Fs(n,e,t,r,i);return"mfaPendingCredential"in f&&ji(n,"multi-factor-auth-required",{_serverResponse:f}),f})}function FN(n,e,t,r){return T(this,null,function*(){let i=`${e}${t}?${r}`,o=n,a=o.config.emulator?pT(n.config,i):`${n.config.apiScheme}://${i}`;return g3.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a})}function v3(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Gb=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(rc(this.auth,"network-request-failed")),_3.get())})}};function m_(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=rc(n,e,r);return i.customData._tokenResponse=t,i}function vN(n){return n!==void 0&&n.enterprise!==void 0}var Kb=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return v3(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function y3(n,e){return T(this,null,function*(){return Fs(n,"GET","/v2/recaptchaConfig",Ls(n,e))})}function w3(n,e){return T(this,null,function*(){return Fs(n,"POST","/v1/accounts:delete",e)})}function I_(n,e){return T(this,null,function*(){return Fs(n,"POST","/v1/accounts:lookup",e)})}function Wh(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function mT(n,e=!1){return T(this,null,function*(){let t=pt(n),r=yield t.getIdToken(e),i=gT(r);ge(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,a=o?.sign_in_provider;return{claims:i,token:r,authTime:Wh(Hb(i.auth_time)),issuedAtTime:Wh(Hb(i.iat)),expirationTime:Wh(Hb(i.exp)),signInProvider:a||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Hb(n){return Number(n)*1e3}function gT(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return g_("JWT malformed, contained fewer than 3 sections"),null;try{let i=s_(t);return i?JSON.parse(i):(g_("Failed to decode base64 JWT payload"),null)}catch(i){return g_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function yN(n){let e=gT(n);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Kh(n,e,t=!1){return T(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Vn&&E3(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function E3({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Zb=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>T(this,null,function*(){yield this.iteration()}),t)}iteration(){return T(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Zh=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wh(this.lastLoginAt),this.creationTime=Wh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function b_(n){return T(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Kh(n,I_(t,{idToken:r}));ge(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?VN(o.providerUserInfo):[],u=I3(n.providerData,a),d=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!u?.length,g=d?f:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Zh(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(n,y)})}function _T(n){return T(this,null,function*(){let e=pt(n);yield b_(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function I3(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function VN(n){return n.map(e=>{var{providerId:t}=e,r=Hy(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function b3(n,e){return T(this,null,function*(){let t=yield LN(n,{},()=>T(null,null,function*(){let r=jh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,a=yield FN(n,i,"/v1/token",`key=${o}`),u=yield n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";let d={method:"POST",headers:u,body:r};return n.emulatorConfig&&Pi(n.emulatorConfig.host)&&(d.credentials="include"),E_.fetch()(a,d)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function T3(n,e){return T(this,null,function*(){return Fs(n,"POST","/v2/accounts:revokeToken",Ls(n,e))})}var Gh=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ge(e.length!==0,"internal-error");let t=yN(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return T(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return T(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield b3(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,a=new n;return r&&(ge(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(ge(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),o&&(ge(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Co("not implemented")}};function Ns(n,e){ge(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ks=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Hy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Zb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Zh(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return T(this,null,function*(){let t=yield Kh(this,this.stsTokenManager.getToken(this.auth,e));return ge(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return mT(this,e)}reload(){return _T(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return T(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield b_(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return T(this,null,function*(){if(Dn(this.auth.app))return Promise.reject(So(this.auth));let e=yield this.getIdToken();return yield Kh(this,w3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,a,u,d,f,g;let y=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(i=t.email)!==null&&i!==void 0?i:void 0,b=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,N=(a=t.photoURL)!==null&&a!==void 0?a:void 0,$=(u=t.tenantId)!==null&&u!==void 0?u:void 0,F=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,q=(f=t.createdAt)!==null&&f!==void 0?f:void 0,oe=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:se,emailVerified:ce,isAnonymous:Ke,providerData:Ee,stsTokenManager:x}=t;ge(se&&x,e,"internal-error");let C=Gh.fromJSON(this.name,x);ge(typeof se=="string",e,"internal-error"),Ns(y,e.name),Ns(E,e.name),ge(typeof ce=="boolean",e,"internal-error"),ge(typeof Ke=="boolean",e,"internal-error"),Ns(b,e.name),Ns(N,e.name),Ns($,e.name),Ns(F,e.name),Ns(q,e.name),Ns(oe,e.name);let D=new n({uid:se,auth:e,email:E,emailVerified:ce,displayName:y,isAnonymous:Ke,photoURL:N,phoneNumber:b,tenantId:$,stsTokenManager:C,createdAt:q,lastLoginAt:oe});return Ee&&Array.isArray(Ee)&&(D.providerData=Ee.map(R=>Object.assign({},R))),F&&(D._redirectEventId=F),D}static _fromIdTokenResponse(e,t,r=!1){return T(this,null,function*(){let i=new Gh;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield b_(o),o})}static _fromGetAccountInfoResponse(e,t,r){return T(this,null,function*(){let i=t.users[0];ge(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?VN(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!o?.length,u=new Gh;u.updateFromIdToken(r);let d=new n({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Zh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(d,f),d})}};var wN=new Map;function Do(n){Os(n instanceof Function,"Expected a class definition");let e=wN.get(n);return e?(Os(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,wN.set(n,e),e)}var C3=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return T(this,null,function*(){return!0})}_set(t,r){return T(this,null,function*(){this.storage[t]=r})}_get(t){return T(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return T(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Qb=C3;function __(n,e,t){return`firebase:${n}:${e}:${t}`}var T_=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=__(this.userKey,i.apiKey,o),this.fullPersistenceKey=__("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return T(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield I_(this.auth,{idToken:e}).catch(()=>{});return t?ks._fromGetAccountInfoResponse(this.auth,t,e):null}return ks._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return T(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return T(this,null,function*(){if(!t.length)return new n(Do(Qb),e,r);let i=(yield Promise.all(t.map(f=>T(null,null,function*(){if(yield f._isAvailable())return f})))).filter(f=>f),o=i[0]||Do(Qb),a=__(r,e.config.apiKey,e.name),u=null;for(let f of t)try{let g=yield f._get(a);if(g){let y;if(typeof g=="string"){let E=yield I_(e,{idToken:g}).catch(()=>{});if(!E)break;y=yield ks._fromGetAccountInfoResponse(e,E,g)}else y=ks._fromJSON(e,g);f!==o&&(u=y),o=f;break}}catch{}let d=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new n(o,e,r):(o=d[0],u&&(yield o._set(a,u.toJSON())),yield Promise.all(t.map(f=>T(null,null,function*(){if(f!==o)try{yield f._remove(a)}catch{}}))),new n(o,e,r))})}};function EN(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($N(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(UN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zN(e))return"Blackberry";if(qN(e))return"Webos";if(jN(e))return"Safari";if((e.includes("chrome/")||BN(e))&&!e.includes("edge/"))return"Chrome";if(HN(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function UN(n=an()){return/firefox\//i.test(n)}function jN(n=an()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BN(n=an()){return/crios\//i.test(n)}function $N(n=an()){return/iemobile/i.test(n)}function HN(n=an()){return/android/i.test(n)}function zN(n=an()){return/blackberry/i.test(n)}function qN(n=an()){return/webos/i.test(n)}function vT(n=an()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function D3(n=an()){var e;return vT(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function S3(){return FP()&&document.documentMode===10}function WN(n=an()){return vT(n)||HN(n)||qN(n)||zN(n)||/windows phone/i.test(n)||$N(n)}function GN(n,e=[]){let t;switch(n){case"Browser":t=EN(an());break;case"Worker":t=`${EN(an())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Li}/${r}`}var Yb=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((a,u)=>{try{let d=e(o);a(d)}catch(d){u(d)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return T(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function A3(t){return T(this,arguments,function*(n,e={}){return Fs(n,"GET","/v2/passwordPolicy",Ls(n,e))})}var R3=6,Jb=class{constructor(e){var t,r,i,o;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:R3,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,a,u;let d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(a=d.containsNumericCharacter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(u=d.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),d}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Xb=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new C_(this),this.idTokenSubscription=new C_(this),this.beforeStateQueue=new Yb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Do(t)),this._initializationPromise=this.queue(()=>T(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield T_.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return T(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return T(this,null,function*(){try{let t=yield I_(this,{idToken:e}),r=yield ks._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return T(this,null,function*(){var t;if(Dn(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=i?._redirectEventId,d=yield this.tryRedirectSignIn(e);(!a||a===u)&&d?.user&&(i=d.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return T(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return T(this,null,function*(){try{yield b_(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=p3()}_delete(){return T(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return T(this,null,function*(){if(Dn(this.app))return Promise.reject(So(this));let t=e?pt(e):null;return t&&ge(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return T(this,null,function*(){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>T(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return T(this,null,function*(){return Dn(this.app)?Promise.reject(So(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Dn(this.app)?Promise.reject(So(this)):this.queue(()=>T(this,null,function*(){yield this.assertedPersistence.setPersistence(Do(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return T(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return T(this,null,function*(){let e=yield A3(this),t=new Jb(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Jr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return T(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield T3(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return T(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return T(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Do(e)||this._popupRedirectResolver;ge(t,this,"argument-error"),this.redirectPersistenceManager=yield T_.create(this,[Do(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return T(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>T(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return T(this,null,function*(){if(e===this.currentUser)return this.queue(()=>T(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),a=!1,u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof t=="function"){let d=e.addObserver(t,r,i);return()=>{a=!0,d()}}else{let d=e.addObserver(t);return()=>{a=!0,d()}}}directlySetCurrentUser(e){return T(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return T(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return T(this,null,function*(){var e;if(Dn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&d3(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function sc(n){return pt(n)}var C_=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=BP(t=>this.observer=t)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var P_={loadJS(){return T(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function x3(n){P_=n}function KN(n){return P_.loadJS(n)}function M3(){return P_.recaptchaEnterpriseScript}function P3(){return P_.gapiScript}function ZN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var eT=class{constructor(){this.enterprise=new tT}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},tT=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var N3="recaptcha-enterprise",QN="NO_RECAPTCHA",nT=class{constructor(e){this.type=N3,this.auth=sc(e)}verify(e="verify",t=!1){return T(this,null,function*(){function r(o){return T(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((a,u)=>T(null,null,function*(){y3(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{let f=new Kb(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,a(f.siteKey)}}).catch(d=>{u(d)})}))})}function i(o,a,u){let d=window.grecaptcha;vN(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{a(f)}).catch(()=>{a(QN)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new eT().execute("siteKey",{action:"verify"}):new Promise((o,a)=>{r(this.auth).then(u=>{if(!t&&vN(window.grecaptcha))i(u,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let d=M3();d.length!==0&&(d+=u),KN(d).then(()=>{i(u,o,a)}).catch(f=>{a(f)})}}).catch(u=>{a(u)})})})}};function qh(n,e,t,r=!1,i=!1){return T(this,null,function*(){let o=new nT(n),a;if(i)a=QN;else try{a=yield o.verify(t)}catch{a=yield o.verify(t,!0)}let u=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){let d=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){let d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u})}function rT(n,e,t,r,i){return T(this,null,function*(){var o,a;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let u=yield qh(n,e,t,t==="getOobCode");return r(n,u)}else return r(n,e).catch(u=>T(null,null,function*(){if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let d=yield qh(n,e,t,t==="getOobCode");return r(n,d)}else return Promise.reject(u)}));else if(i==="PHONE_PROVIDER")if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("PHONE_PROVIDER")){let u=yield qh(n,e,t);return r(n,u).catch(d=>T(null,null,function*(){var f;if(((f=n._getRecaptchaConfig())===null||f===void 0?void 0:f.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(d.code==="auth/missing-recaptcha-token"||d.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let g=yield qh(n,e,t,!1,!0);return r(n,g)}return Promise.reject(d)}))}else{let u=yield qh(n,e,t,!1,!0);return r(n,u)}else return Promise.reject(i+" provider is not supported.")})}function yT(n,e){let t=Rs(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Ni(o,e??{}))return i;ji(i,"already-initialized")}return t.initialize({options:e})}function k3(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Do);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function wT(n,e,t){let r=sc(n);ge(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=YN(e),{host:a,port:u}=O3(e),d=u===null?"":`:${u}`,f={url:`${o}//${a}${d}/`},g=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ge(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ge(Ni(f,r.config.emulator)&&Ni(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,Pi(a)?(nl(`${o}//${a}${d}`),rl("Auth",!0)):i||L3()}function YN(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function O3(n){let e=YN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:IN(r.substr(o.length+1))}}else{let[o,a]=r.split(":");return{host:o,port:IN(a)}}}function IN(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function L3(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Qh=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Co("not implemented")}_getIdTokenResponse(e){return Co("not implemented")}_linkToIdToken(e,t){return Co("not implemented")}_getReauthenticationResolver(e){return Co("not implemented")}};function F3(n,e){return T(this,null,function*(){return Fs(n,"POST","/v1/accounts:signUp",e)})}function V3(n,e){return T(this,null,function*(){return Xh(n,"POST","/v1/accounts:signInWithPassword",Ls(n,e))})}function U3(n,e){return T(this,null,function*(){return Xh(n,"POST","/v1/accounts:signInWithEmailLink",Ls(n,e))})}function j3(n,e){return T(this,null,function*(){return Xh(n,"POST","/v1/accounts:signInWithEmailLink",Ls(n,e))})}var Yh=class n extends Qh{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return T(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rT(e,t,"signInWithPassword",V3,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return U3(e,{email:this._email,oobCode:this._password});default:ji(e,"internal-error")}})}_linkToIdToken(e,t){return T(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rT(e,r,"signUpPassword",F3,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return j3(e,{idToken:t,email:this._email,oobCode:this._password});default:ji(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function zb(n,e){return T(this,null,function*(){return Xh(n,"POST","/v1/accounts:signInWithIdp",Ls(n,e))})}function B3(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $3(n){let e=il(ol(n)).link,t=e?il(ol(e)).deep_link_id:null,r=il(ol(n)).deep_link_id;return(r?il(ol(r)).link:null)||r||t||e||n}var D_=class n{constructor(e){var t,r,i,o,a,u;let d=il(ol(e)),f=(t=d.apiKey)!==null&&t!==void 0?t:null,g=(r=d.oobCode)!==null&&r!==void 0?r:null,y=B3((i=d.mode)!==null&&i!==void 0?i:null);ge(f&&g&&y,"argument-error"),this.apiKey=f,this.operation=y,this.code=g,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=d.lang)!==null&&a!==void 0?a:null,this.tenantId=(u=d.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){let t=$3(e);try{return new n(t)}catch{return null}}};var JN=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Yh._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=D_.parseLink(r);return ge(i,"argument-error"),Yh._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),S_=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var iT=class extends S_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function H3(n,e){return T(this,null,function*(){return Xh(n,"POST","/v1/accounts:signUp",Ls(n,e))})}var al=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return T(this,null,function*(){let o=yield ks._fromIdTokenResponse(e,r,i),a=bN(r);return new n({user:o,providerId:a,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return T(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=bN(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function bN(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var oT=class n extends Vn{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function XN(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?oT._fromErrorAndOperation(n,o,e,r):o})}function z3(n,e,t=!1){return T(this,null,function*(){let r=yield Kh(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return al._forOperation(n,"link",r)})}function q3(n,e,t=!1){return T(this,null,function*(){let{auth:r}=n;if(Dn(r.app))return Promise.reject(So(r));let i="reauthenticate";try{let o=yield Kh(n,XN(r,i,e,n),t);ge(o.idToken,r,"internal-error");let a=gT(o.idToken);ge(a,r,"internal-error");let{sub:u}=a;return ge(n.uid===u,r,"user-mismatch"),al._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&ji(r,"user-mismatch"),o}})}function ek(n,e,t=!1){return T(this,null,function*(){if(Dn(n.app))return Promise.reject(So(n));let r="signIn",i=yield XN(n,r,e),o=yield al._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function ET(n,e){return T(this,null,function*(){return ek(sc(n),e)})}function tk(n){return T(this,null,function*(){let e=sc(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function IT(n,e,t){return T(this,null,function*(){if(Dn(n.app))return Promise.reject(So(n));let r=sc(n),a=yield rT(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",H3,"EMAIL_PASSWORD_PROVIDER").catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&tk(n),d}),u=yield al._fromIdTokenResponse(r,"signIn",a);return yield r._updateCurrentUser(u.user),u})}function bT(n,e,t){return Dn(n.app)?Promise.reject(So(n)):ET(pt(n),JN.credential(e,t)).catch(r=>T(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&tk(n),r}))}function TT(n,e){return pt(n).setPersistence(e)}function CT(n,e,t,r){return pt(n).onIdTokenChanged(e,t,r)}function DT(n,e,t){return pt(n).beforeAuthStateChanged(e,t)}function ST(n,e,t,r){return pt(n).onAuthStateChanged(e,t,r)}function AT(n){return pt(n).signOut()}var A_="__sak";var R_=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(A_,"1"),this.storage.removeItem(A_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var W3=1e3,G3=10,K3=(()=>{class n extends R_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=WN(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((u,d,f)=>{this.notifyListeners(u,f)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let u=this.storage.getItem(i);!r&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);S3()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,G3):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},W3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return T(this,null,function*(){yield Yo(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return T(this,null,function*(){let r=yield Yo(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return T(this,null,function*(){yield Yo(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),N_=K3;var Z3=(()=>{class n extends R_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),RT=Z3;function Q3(n){return Promise.all(n.map(e=>T(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var Y3=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return T(this,null,function*(){let r=t,{eventId:i,eventType:o,data:a}=r.data,u=this.handlersMap[o];if(!u?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let d=Array.from(u).map(g=>T(this,null,function*(){return g(r.origin,a)})),f=yield Q3(d);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:f})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function nk(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var sT=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return T(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,a;return new Promise((u,d)=>{let f=nk("",20);i.port1.start();let g=setTimeout(()=>{d(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(y){let E=y;if(E.data.eventId===f)switch(E.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(E.data.response);break;default:clearTimeout(g),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function Ui(){return window}function J3(n){Ui().location.href=n}function rk(){return typeof Ui().WorkerGlobalScope<"u"&&typeof Ui().importScripts=="function"}function X3(){return T(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function eq(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function tq(){return rk()?self:null}var ik="firebaseLocalStorageDb",nq=1,x_="firebaseLocalStorage",ok="fbase_key",oc=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function k_(n,e){return n.transaction([x_],e?"readwrite":"readonly").objectStore(x_)}function rq(){let n=indexedDB.deleteDatabase(ik);return new oc(n).toPromise()}function aT(){let n=indexedDB.open(ik,nq);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(x_,{keyPath:ok})}catch(i){t(i)}}),n.addEventListener("success",()=>T(null,null,function*(){let r=n.result;r.objectStoreNames.contains(x_)?e(r):(r.close(),yield rq(),e(yield aT()))}))})}function TN(n,e,t){return T(this,null,function*(){let r=k_(n,!0).put({[ok]:e,value:t});return new oc(r).toPromise()})}function iq(n,e){return T(this,null,function*(){let t=k_(n,!1).get(e),r=yield new oc(t).toPromise();return r===void 0?null:r.value})}function CN(n,e){let t=k_(n,!0).delete(e);return new oc(t).toPromise()}var oq=800,sq=3,aq=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return T(this,null,function*(){return this.db?this.db:(this.db=yield aT(),this.db)})}_withRetries(t){return T(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>sq)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return T(this,null,function*(){return rk()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return T(this,null,function*(){this.receiver=Y3._getInstance(tq()),this.receiver._subscribe("keyChanged",(t,r)=>T(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>T(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return T(this,null,function*(){var t,r;if(this.activeServiceWorker=yield X3(),!this.activeServiceWorker)return;this.sender=new sT(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return T(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||eq()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return T(this,null,function*(){try{if(!indexedDB)return!1;let t=yield aT();return yield TN(t,A_,"1"),yield CN(t,A_),!0}catch{}return!1})}_withPendingWrite(t){return T(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return T(this,null,function*(){return this._withPendingWrite(()=>T(this,null,function*(){return yield this._withRetries(i=>TN(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return T(this,null,function*(){let r=yield this._withRetries(i=>iq(i,t));return this.localCache[t]=r,r})}_remove(t){return T(this,null,function*(){return this._withPendingWrite(()=>T(this,null,function*(){return yield this._withRetries(r=>CN(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return T(this,null,function*(){let t=yield this._withRetries(o=>{let a=k_(o,!1).getAll();return new oc(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:a}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>T(this,null,function*(){return this._poll()}),oq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),sk=aq;var lde=ZN("rcb"),dde=new ic(3e4,6e4);function cq(n,e){return e?Do(e):(ge(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Jh=class extends Qh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zb(e,this._buildIdpRequest())}_linkToIdToken(e,t){return zb(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return zb(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function uq(n){return ek(n.auth,new Jh(n),n.bypassAuthState)}function lq(n){let{auth:e,user:t}=n;return ge(t,e,"internal-error"),q3(t,new Jh(n),n.bypassAuthState)}function dq(n){return T(this,null,function*(){let{auth:e,user:t}=n;return ge(t,e,"internal-error"),z3(t,new Jh(n),n.bypassAuthState)})}var cT=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>T(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return T(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}let d={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(u)(d))}catch(f){this.reject(f)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uq;case"linkViaPopup":case"linkViaRedirect":return dq;case"reauthViaPopup":case"reauthViaRedirect":return lq;default:ji(this.auth,"internal-error")}}resolve(e){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var hde=new ic(2e3,1e4);var hq="pendingRedirect",v_=new Map,uT=class n extends cT{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return T(this,null,function*(){let e=v_.get(this.auth._key());if(!e){try{let r=(yield fq(this.resolver,this.auth))?yield Yo(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}v_.set(this.auth._key(),e)}return this.bypassAuthState||v_.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return T(this,null,function*(){if(e.type==="signInViaRedirect")return Yo(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Yo(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return T(this,null,function*(){})}cleanUp(){}};function fq(n,e){return T(this,null,function*(){let t=gq(e),r=mq(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function pq(n,e){v_.set(n._key(),e)}function mq(n){return Do(n._redirectPersistence)}function gq(n){return __(hq,n.config.apiKey,n.name)}function _q(n,e,t=!1){return T(this,null,function*(){if(Dn(n.app))return Promise.reject(So(n));let r=sc(n),i=cq(r,e),a=yield new uT(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield r._persistUserIfCurrent(a.user),yield r._setRedirectUser(null,e)),a})}var vq=600*1e3,lT=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yq(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!ak(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(rc(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vq&&this.cachedEventUids.clear(),this.cachedEventUids.has(DN(e))}saveEventToCache(e){this.cachedEventUids.add(DN(e)),this.lastProcessedEventTime=Date.now()}};function DN(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function ak({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function yq(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ak(n);default:return!1}}function wq(t){return T(this,arguments,function*(n,e={}){return Fs(n,"GET","/v1/projects",e)})}var Eq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Iq=/^https?/;function bq(n){return T(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield wq(n);for(let t of e)try{if(Tq(t))return}catch{}ji(n,"unauthorized-domain")})}function Tq(n){let e=Wb(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!Iq.test(t))return!1;if(Eq.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Cq=new ic(3e4,6e4);function SN(){let n=Ui().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Dq(n){return new Promise((e,t)=>{var r,i,o;function a(){SN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{SN(),t(rc(n,"network-request-failed"))},timeout:Cq.get()})}if(!((i=(r=Ui().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Ui().gapi)===null||o===void 0)&&o.load)a();else{let u=ZN("iframefcb");return Ui()[u]=()=>{gapi.load?a():t(rc(n,"network-request-failed"))},KN(`${P3()}?onload=${u}`).catch(d=>t(d))}}).catch(e=>{throw y_=null,e})}var y_=null;function Sq(n){return y_=y_||Dq(n),y_}var Aq=new ic(5e3,15e3),Rq="__/auth/iframe",xq="emulator/auth/iframe",Mq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Pq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Nq(n){let e=n.config;ge(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?pT(e,xq):`https://${n.config.authDomain}/${Rq}`,r={apiKey:e.apiKey,appName:n.name,v:Li},i=Pq.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${jh(r).slice(1)}`}function kq(n){return T(this,null,function*(){let e=yield Sq(n),t=Ui().gapi;return ge(t,n,"internal-error"),e.open({where:document.body,url:Nq(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Mq,dontclear:!0},r=>new Promise((i,o)=>T(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let a=rc(n,"network-request-failed"),u=Ui().setTimeout(()=>{o(a)},Aq.get());function d(){Ui().clearTimeout(u),i(r)}r.ping(d).then(d,()=>{o(a)})})))})}var Oq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Lq=500,Fq=600,Vq="_blank",Uq="http://localhost",M_=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function jq(n,e,t,r=Lq,i=Fq){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",d=Object.assign(Object.assign({},Oq),{width:r.toString(),height:i.toString(),top:o,left:a}),f=an().toLowerCase();t&&(u=BN(f)?Vq:t),UN(f)&&(e=e||Uq,d.scrollbars="yes");let g=Object.entries(d).reduce((E,[b,N])=>`${E}${b}=${N},`,"");if(D3(f)&&u!=="_self")return Bq(e||"",u),new M_(null);let y=window.open(e||"",u,g);ge(y,n,"popup-blocked");try{y.focus()}catch{}return new M_(y)}function Bq(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var $q="__/auth/handler",Hq="emulator/auth/handler",zq=encodeURIComponent("fac");function AN(n,e,t,r,i,o){return T(this,null,function*(){ge(n.config.authDomain,n,"auth-domain-config-required"),ge(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Li,eventId:i};if(e instanceof S_){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",jP(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[g,y]of Object.entries(o||{}))a[g]=y}if(e instanceof iT){let g=e.getScopes().filter(y=>y!=="");g.length>0&&(a.scopes=g.join(","))}n.tenantId&&(a.tid=n.tenantId);let u=a;for(let g of Object.keys(u))u[g]===void 0&&delete u[g];let d=yield n._getAppCheckToken(),f=d?`#${zq}=${encodeURIComponent(d)}`:"";return`${qq(n)}?${jh(u).slice(1)}${f}`})}function qq({config:n}){return n.emulator?pT(n,Hq):`https://${n.authDomain}/${$q}`}var qb="webStorageSupport",dT=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RT,this._completeRedirectFn=_q,this._overrideRedirectResult=pq}_openPopup(e,t,r,i){return T(this,null,function*(){var o;Os((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let a=yield AN(e,t,r,Wb(),i);return jq(e,a,nk())})}_openRedirect(e,t,r,i){return T(this,null,function*(){yield this._originValidation(e);let o=yield AN(e,t,r,Wb(),i);return J3(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Os(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return T(this,null,function*(){let t=yield kq(e),r=new lT(e);return t.register("authEvent",i=>(ge(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(qb,{type:qb},i=>{var o;let a=(o=i?.[0])===null||o===void 0?void 0:o[qb];a!==void 0&&t(!!a),ji(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=bq(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return WN()||jN()||vT()}},ck=dT;var RN="@firebase/auth",xN="1.10.8";var hT=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return T(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Wq(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Gq(n){_r(new yn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=r.options;ge(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});let d={apiKey:a,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GN(n)},f=new Xb(r,i,o,d);return k3(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),_r(new yn("auth-internal",e=>{let t=sc(e.getProvider("auth").getImmediate());return(r=>new hT(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),at(RN,xN,Wq(n)),at(RN,xN,"esm2017")}var Kq=300,Zq=wb("authIdTokenMaxAge")||Kq,MN=null,Qq=n=>e=>T(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Zq)return;let i=t?.token;MN!==i&&(MN=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function xT(n=bo()){let e=Rs(n,"auth");if(e.isInitialized())return e.getImmediate();let t=yT(n,{popupRedirectResolver:ck,persistence:[sk,N_,RT]}),r=wb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let a=Qq(o.toString());DT(t,a,()=>a(t.currentUser)),CT(t,u=>a(u))}}let i=vb("auth");return i&&wT(t,`http://${i}`),t}function Yq(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}x3({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=rc("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",Yq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Gq("Browser");var uk="auth",Ut=class{constructor(e){return e}},ac=class{constructor(){return xs(uk)}};var MT=new J("angularfire2.auth-instances");function V6(n,e){let t=nc(uk,n,e);return t&&new Ut(t)}function U6(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ut(r)}}var j6={provide:ac,deps:[[new on,MT]]},B6={provide:Ut,useFactory:V6,deps:[[new on,MT],Xr]};function lk(n,...e){return at("angularfire",Fi.full,"auth"),Nn([B6,j6,{provide:MT,useFactory:U6(n),multi:!0,deps:[Ge,_t,Vi,To,[new on,Ps],...e]}])}var O_=dt(IT,!0,2);var dk=dt(xT,!0);var Vs=dt(ST,!0);var hk=dt(TT,!0);var fk=dt(bT,!0,2);var L_=dt(AT,!0,2);var pk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mk={};var Ao,PT;(function(){var n;function e(x,C){function D(){}D.prototype=C.prototype,x.D=C.prototype,x.prototype=new D,x.prototype.constructor=x,x.C=function(R,M,k){for(var A=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)A[Et-2]=arguments[Et];return C.prototype[M].apply(R,A)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,C,D){D||(D=0);var R=Array(16);if(typeof C=="string")for(var M=0;16>M;++M)R[M]=C.charCodeAt(D++)|C.charCodeAt(D++)<<8|C.charCodeAt(D++)<<16|C.charCodeAt(D++)<<24;else for(M=0;16>M;++M)R[M]=C[D++]|C[D++]<<8|C[D++]<<16|C[D++]<<24;C=x.g[0],D=x.g[1],M=x.g[2];var k=x.g[3],A=C+(k^D&(M^k))+R[0]+3614090360&4294967295;C=D+(A<<7&4294967295|A>>>25),A=k+(M^C&(D^M))+R[1]+3905402710&4294967295,k=C+(A<<12&4294967295|A>>>20),A=M+(D^k&(C^D))+R[2]+606105819&4294967295,M=k+(A<<17&4294967295|A>>>15),A=D+(C^M&(k^C))+R[3]+3250441966&4294967295,D=M+(A<<22&4294967295|A>>>10),A=C+(k^D&(M^k))+R[4]+4118548399&4294967295,C=D+(A<<7&4294967295|A>>>25),A=k+(M^C&(D^M))+R[5]+1200080426&4294967295,k=C+(A<<12&4294967295|A>>>20),A=M+(D^k&(C^D))+R[6]+2821735955&4294967295,M=k+(A<<17&4294967295|A>>>15),A=D+(C^M&(k^C))+R[7]+4249261313&4294967295,D=M+(A<<22&4294967295|A>>>10),A=C+(k^D&(M^k))+R[8]+1770035416&4294967295,C=D+(A<<7&4294967295|A>>>25),A=k+(M^C&(D^M))+R[9]+2336552879&4294967295,k=C+(A<<12&4294967295|A>>>20),A=M+(D^k&(C^D))+R[10]+4294925233&4294967295,M=k+(A<<17&4294967295|A>>>15),A=D+(C^M&(k^C))+R[11]+2304563134&4294967295,D=M+(A<<22&4294967295|A>>>10),A=C+(k^D&(M^k))+R[12]+1804603682&4294967295,C=D+(A<<7&4294967295|A>>>25),A=k+(M^C&(D^M))+R[13]+4254626195&4294967295,k=C+(A<<12&4294967295|A>>>20),A=M+(D^k&(C^D))+R[14]+2792965006&4294967295,M=k+(A<<17&4294967295|A>>>15),A=D+(C^M&(k^C))+R[15]+1236535329&4294967295,D=M+(A<<22&4294967295|A>>>10),A=C+(M^k&(D^M))+R[1]+4129170786&4294967295,C=D+(A<<5&4294967295|A>>>27),A=k+(D^M&(C^D))+R[6]+3225465664&4294967295,k=C+(A<<9&4294967295|A>>>23),A=M+(C^D&(k^C))+R[11]+643717713&4294967295,M=k+(A<<14&4294967295|A>>>18),A=D+(k^C&(M^k))+R[0]+3921069994&4294967295,D=M+(A<<20&4294967295|A>>>12),A=C+(M^k&(D^M))+R[5]+3593408605&4294967295,C=D+(A<<5&4294967295|A>>>27),A=k+(D^M&(C^D))+R[10]+38016083&4294967295,k=C+(A<<9&4294967295|A>>>23),A=M+(C^D&(k^C))+R[15]+3634488961&4294967295,M=k+(A<<14&4294967295|A>>>18),A=D+(k^C&(M^k))+R[4]+3889429448&4294967295,D=M+(A<<20&4294967295|A>>>12),A=C+(M^k&(D^M))+R[9]+568446438&4294967295,C=D+(A<<5&4294967295|A>>>27),A=k+(D^M&(C^D))+R[14]+3275163606&4294967295,k=C+(A<<9&4294967295|A>>>23),A=M+(C^D&(k^C))+R[3]+4107603335&4294967295,M=k+(A<<14&4294967295|A>>>18),A=D+(k^C&(M^k))+R[8]+1163531501&4294967295,D=M+(A<<20&4294967295|A>>>12),A=C+(M^k&(D^M))+R[13]+2850285829&4294967295,C=D+(A<<5&4294967295|A>>>27),A=k+(D^M&(C^D))+R[2]+4243563512&4294967295,k=C+(A<<9&4294967295|A>>>23),A=M+(C^D&(k^C))+R[7]+1735328473&4294967295,M=k+(A<<14&4294967295|A>>>18),A=D+(k^C&(M^k))+R[12]+2368359562&4294967295,D=M+(A<<20&4294967295|A>>>12),A=C+(D^M^k)+R[5]+4294588738&4294967295,C=D+(A<<4&4294967295|A>>>28),A=k+(C^D^M)+R[8]+2272392833&4294967295,k=C+(A<<11&4294967295|A>>>21),A=M+(k^C^D)+R[11]+1839030562&4294967295,M=k+(A<<16&4294967295|A>>>16),A=D+(M^k^C)+R[14]+4259657740&4294967295,D=M+(A<<23&4294967295|A>>>9),A=C+(D^M^k)+R[1]+2763975236&4294967295,C=D+(A<<4&4294967295|A>>>28),A=k+(C^D^M)+R[4]+1272893353&4294967295,k=C+(A<<11&4294967295|A>>>21),A=M+(k^C^D)+R[7]+4139469664&4294967295,M=k+(A<<16&4294967295|A>>>16),A=D+(M^k^C)+R[10]+3200236656&4294967295,D=M+(A<<23&4294967295|A>>>9),A=C+(D^M^k)+R[13]+681279174&4294967295,C=D+(A<<4&4294967295|A>>>28),A=k+(C^D^M)+R[0]+3936430074&4294967295,k=C+(A<<11&4294967295|A>>>21),A=M+(k^C^D)+R[3]+3572445317&4294967295,M=k+(A<<16&4294967295|A>>>16),A=D+(M^k^C)+R[6]+76029189&4294967295,D=M+(A<<23&4294967295|A>>>9),A=C+(D^M^k)+R[9]+3654602809&4294967295,C=D+(A<<4&4294967295|A>>>28),A=k+(C^D^M)+R[12]+3873151461&4294967295,k=C+(A<<11&4294967295|A>>>21),A=M+(k^C^D)+R[15]+530742520&4294967295,M=k+(A<<16&4294967295|A>>>16),A=D+(M^k^C)+R[2]+3299628645&4294967295,D=M+(A<<23&4294967295|A>>>9),A=C+(M^(D|~k))+R[0]+4096336452&4294967295,C=D+(A<<6&4294967295|A>>>26),A=k+(D^(C|~M))+R[7]+1126891415&4294967295,k=C+(A<<10&4294967295|A>>>22),A=M+(C^(k|~D))+R[14]+2878612391&4294967295,M=k+(A<<15&4294967295|A>>>17),A=D+(k^(M|~C))+R[5]+4237533241&4294967295,D=M+(A<<21&4294967295|A>>>11),A=C+(M^(D|~k))+R[12]+1700485571&4294967295,C=D+(A<<6&4294967295|A>>>26),A=k+(D^(C|~M))+R[3]+2399980690&4294967295,k=C+(A<<10&4294967295|A>>>22),A=M+(C^(k|~D))+R[10]+4293915773&4294967295,M=k+(A<<15&4294967295|A>>>17),A=D+(k^(M|~C))+R[1]+2240044497&4294967295,D=M+(A<<21&4294967295|A>>>11),A=C+(M^(D|~k))+R[8]+1873313359&4294967295,C=D+(A<<6&4294967295|A>>>26),A=k+(D^(C|~M))+R[15]+4264355552&4294967295,k=C+(A<<10&4294967295|A>>>22),A=M+(C^(k|~D))+R[6]+2734768916&4294967295,M=k+(A<<15&4294967295|A>>>17),A=D+(k^(M|~C))+R[13]+1309151649&4294967295,D=M+(A<<21&4294967295|A>>>11),A=C+(M^(D|~k))+R[4]+4149444226&4294967295,C=D+(A<<6&4294967295|A>>>26),A=k+(D^(C|~M))+R[11]+3174756917&4294967295,k=C+(A<<10&4294967295|A>>>22),A=M+(C^(k|~D))+R[2]+718787259&4294967295,M=k+(A<<15&4294967295|A>>>17),A=D+(k^(M|~C))+R[9]+3951481745&4294967295,x.g[0]=x.g[0]+C&4294967295,x.g[1]=x.g[1]+(M+(A<<21&4294967295|A>>>11))&4294967295,x.g[2]=x.g[2]+M&4294967295,x.g[3]=x.g[3]+k&4294967295}r.prototype.u=function(x,C){C===void 0&&(C=x.length);for(var D=C-this.blockSize,R=this.B,M=this.h,k=0;k<C;){if(M==0)for(;k<=D;)i(this,x,k),k+=this.blockSize;if(typeof x=="string"){for(;k<C;)if(R[M++]=x.charCodeAt(k++),M==this.blockSize){i(this,R),M=0;break}}else for(;k<C;)if(R[M++]=x[k++],M==this.blockSize){i(this,R),M=0;break}}this.h=M,this.o+=C},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var C=1;C<x.length-8;++C)x[C]=0;var D=8*this.o;for(C=x.length-8;C<x.length;++C)x[C]=D&255,D/=256;for(this.u(x),x=Array(16),C=D=0;4>C;++C)for(var R=0;32>R;R+=8)x[D++]=this.g[C]>>>R&255;return x};function o(x,C){var D=u;return Object.prototype.hasOwnProperty.call(D,x)?D[x]:D[x]=C(x)}function a(x,C){this.h=C;for(var D=[],R=!0,M=x.length-1;0<=M;M--){var k=x[M]|0;R&&k==C||(D[M]=k,R=!1)}this.g=D}var u={};function d(x){return-128<=x&&128>x?o(x,function(C){return new a([C|0],0>C?-1:0)}):new a([x|0],0>x?-1:0)}function f(x){if(isNaN(x)||!isFinite(x))return y;if(0>x)return F(f(-x));for(var C=[],D=1,R=0;x>=D;R++)C[R]=x/D|0,D*=4294967296;return new a(C,0)}function g(x,C){if(x.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(x.charAt(0)=="-")return F(g(x.substring(1),C));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=f(Math.pow(C,8)),R=y,M=0;M<x.length;M+=8){var k=Math.min(8,x.length-M),A=parseInt(x.substring(M,M+k),C);8>k?(k=f(Math.pow(C,k)),R=R.j(k).add(f(A))):(R=R.j(D),R=R.add(f(A)))}return R}var y=d(0),E=d(1),b=d(16777216);n=a.prototype,n.m=function(){if($(this))return-F(this).m();for(var x=0,C=1,D=0;D<this.g.length;D++){var R=this.i(D);x+=(0<=R?R:4294967296+R)*C,C*=4294967296}return x},n.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(N(this))return"0";if($(this))return"-"+F(this).toString(x);for(var C=f(Math.pow(x,6)),D=this,R="";;){var M=ce(D,C).g;D=q(D,M.j(C));var k=((0<D.g.length?D.g[0]:D.h)>>>0).toString(x);if(D=M,N(D))return k+R;for(;6>k.length;)k="0"+k;R=k+R}},n.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function N(x){if(x.h!=0)return!1;for(var C=0;C<x.g.length;C++)if(x.g[C]!=0)return!1;return!0}function $(x){return x.h==-1}n.l=function(x){return x=q(this,x),$(x)?-1:N(x)?0:1};function F(x){for(var C=x.g.length,D=[],R=0;R<C;R++)D[R]=~x.g[R];return new a(D,~x.h).add(E)}n.abs=function(){return $(this)?F(this):this},n.add=function(x){for(var C=Math.max(this.g.length,x.g.length),D=[],R=0,M=0;M<=C;M++){var k=R+(this.i(M)&65535)+(x.i(M)&65535),A=(k>>>16)+(this.i(M)>>>16)+(x.i(M)>>>16);R=A>>>16,k&=65535,A&=65535,D[M]=A<<16|k}return new a(D,D[D.length-1]&-2147483648?-1:0)};function q(x,C){return x.add(F(C))}n.j=function(x){if(N(this)||N(x))return y;if($(this))return $(x)?F(this).j(F(x)):F(F(this).j(x));if($(x))return F(this.j(F(x)));if(0>this.l(b)&&0>x.l(b))return f(this.m()*x.m());for(var C=this.g.length+x.g.length,D=[],R=0;R<2*C;R++)D[R]=0;for(R=0;R<this.g.length;R++)for(var M=0;M<x.g.length;M++){var k=this.i(R)>>>16,A=this.i(R)&65535,Et=x.i(M)>>>16,Or=x.i(M)&65535;D[2*R+2*M]+=A*Or,oe(D,2*R+2*M),D[2*R+2*M+1]+=k*Or,oe(D,2*R+2*M+1),D[2*R+2*M+1]+=A*Et,oe(D,2*R+2*M+1),D[2*R+2*M+2]+=k*Et,oe(D,2*R+2*M+2)}for(R=0;R<C;R++)D[R]=D[2*R+1]<<16|D[2*R];for(R=C;R<2*C;R++)D[R]=0;return new a(D,0)};function oe(x,C){for(;(x[C]&65535)!=x[C];)x[C+1]+=x[C]>>>16,x[C]&=65535,C++}function se(x,C){this.g=x,this.h=C}function ce(x,C){if(N(C))throw Error("division by zero");if(N(x))return new se(y,y);if($(x))return C=ce(F(x),C),new se(F(C.g),F(C.h));if($(C))return C=ce(x,F(C)),new se(F(C.g),C.h);if(30<x.g.length){if($(x)||$(C))throw Error("slowDivide_ only works with positive integers.");for(var D=E,R=C;0>=R.l(x);)D=Ke(D),R=Ke(R);var M=Ee(D,1),k=Ee(R,1);for(R=Ee(R,2),D=Ee(D,2);!N(R);){var A=k.add(R);0>=A.l(x)&&(M=M.add(D),k=A),R=Ee(R,1),D=Ee(D,1)}return C=q(x,M.j(C)),new se(M,C)}for(M=y;0<=x.l(C);){for(D=Math.max(1,Math.floor(x.m()/C.m())),R=Math.ceil(Math.log(D)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),k=f(D),A=k.j(C);$(A)||0<A.l(x);)D-=R,k=f(D),A=k.j(C);N(k)&&(k=E),M=M.add(k),x=q(x,A)}return new se(M,x)}n.A=function(x){return ce(this,x).h},n.and=function(x){for(var C=Math.max(this.g.length,x.g.length),D=[],R=0;R<C;R++)D[R]=this.i(R)&x.i(R);return new a(D,this.h&x.h)},n.or=function(x){for(var C=Math.max(this.g.length,x.g.length),D=[],R=0;R<C;R++)D[R]=this.i(R)|x.i(R);return new a(D,this.h|x.h)},n.xor=function(x){for(var C=Math.max(this.g.length,x.g.length),D=[],R=0;R<C;R++)D[R]=this.i(R)^x.i(R);return new a(D,this.h^x.h)};function Ke(x){for(var C=x.g.length+1,D=[],R=0;R<C;R++)D[R]=x.i(R)<<1|x.i(R-1)>>>31;return new a(D,x.h)}function Ee(x,C){var D=C>>5;C%=32;for(var R=x.g.length-D,M=[],k=0;k<R;k++)M[k]=0<C?x.i(k+D)>>>C|x.i(k+D+1)<<32-C:x.i(k+D);return new a(M,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,PT=mk.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=g,Ao=mk.Integer=a}).apply(typeof pk<"u"?pk:typeof self<"u"?self:typeof window<"u"?window:{});var F_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ro={};var NT,$6,cl,kT,ef,V_,OT,LT,FT;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,m,v){return l==Array.prototype||l==Object.prototype||(l[m]=v.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof F_=="object"&&F_];for(var m=0;m<l.length;++m){var v=l[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function i(l,m){if(m)e:{var v=r;l=l.split(".");for(var I=0;I<l.length-1;I++){var P=l[I];if(!(P in v))break e;v=v[P]}l=l[l.length-1],I=v[l],m=m(I),m!=I&&m!=null&&e(v,l,{configurable:!0,writable:!0,value:m})}}function o(l,m){l instanceof String&&(l+="");var v=0,I=!1,P={next:function(){if(!I&&v<l.length){var U=v++;return{value:m(U,l[U]),done:!1}}return I=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}i("Array.prototype.values",function(l){return l||function(){return o(this,function(m,v){return v})}});var a=a||{},u=this||self;function d(l){var m=typeof l;return m=m!="object"?m:l?Array.isArray(l)?"array":m:"null",m=="array"||m=="object"&&typeof l.length=="number"}function f(l){var m=typeof l;return m=="object"&&l!=null||m=="function"}function g(l,m,v){return l.call.apply(l.bind,arguments)}function y(l,m,v){if(!l)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,I),l.apply(m,P)}}return function(){return l.apply(m,arguments)}}function E(l,m,v){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:y,E.apply(null,arguments)}function b(l,m){var v=Array.prototype.slice.call(arguments,1);return function(){var I=v.slice();return I.push.apply(I,arguments),l.apply(this,I)}}function N(l,m){function v(){}v.prototype=m.prototype,l.aa=m.prototype,l.prototype=new v,l.prototype.constructor=l,l.Qb=function(I,P,U){for(var Y=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)Y[Ne-2]=arguments[Ne];return m.prototype[P].apply(I,Y)}}function $(l){let m=l.length;if(0<m){let v=Array(m);for(let I=0;I<m;I++)v[I]=l[I];return v}return[]}function F(l,m){for(let v=1;v<arguments.length;v++){let I=arguments[v];if(d(I)){let P=l.length||0,U=I.length||0;l.length=P+U;for(let Y=0;Y<U;Y++)l[P+Y]=I[Y]}else l.push(I)}}class q{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function oe(l){return/^[\s\xa0]*$/.test(l)}function se(){var l=u.navigator;return l&&(l=l.userAgent)?l:""}function ce(l){return ce[" "](l),l}ce[" "]=function(){};var Ke=se().indexOf("Gecko")!=-1&&!(se().toLowerCase().indexOf("webkit")!=-1&&se().indexOf("Edge")==-1)&&!(se().indexOf("Trident")!=-1||se().indexOf("MSIE")!=-1)&&se().indexOf("Edge")==-1;function Ee(l,m,v){for(let I in l)m.call(v,l[I],I,l)}function x(l,m){for(let v in l)m.call(void 0,l[v],v,l)}function C(l){let m={};for(let v in l)m[v]=l[v];return m}let D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(l,m){let v,I;for(let P=1;P<arguments.length;P++){I=arguments[P];for(v in I)l[v]=I[v];for(let U=0;U<D.length;U++)v=D[U],Object.prototype.hasOwnProperty.call(I,v)&&(l[v]=I[v])}}function M(l){var m=1;l=l.split(":");let v=[];for(;0<m&&l.length;)v.push(l.shift()),m--;return l.length&&v.push(l.join(":")),v}function k(l){u.setTimeout(()=>{throw l},0)}function A(){var l=ot;let m=null;return l.g&&(m=l.g,l.g=l.g.next,l.g||(l.h=null),m.next=null),m}class Et{constructor(){this.h=this.g=null}add(m,v){let I=Or.get();I.set(m,v),this.h?this.h.next=I:this.g=I,this.h=I}}var Or=new q(()=>new Ie,l=>l.reset());class Ie{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Fo,fe=!1,ot=new Et,ln=()=>{let l=u.Promise.resolve(void 0);Fo=()=>{l.then(wn)}};var wn=()=>{for(var l;l=A();){try{l.h.call(l.g)}catch(v){k(v)}var m=Or;m.j(l),100>m.h&&(m.h++,l.next=m.g,m.g=l)}fe=!1};function et(){this.s=this.s,this.C=this.C}et.prototype.s=!1,et.prototype.ma=function(){this.s||(this.s=!0,this.N())},et.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(l,m){this.type=l,this.g=this.target=m,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var Fe=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var l=!1,m=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let v=()=>{};u.addEventListener("test",v,m),u.removeEventListener("test",v,m)}catch{}return l})();function Rn(l,m){if(ve.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var v=this.type=l.type,I=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=m,m=l.relatedTarget){if(Ke){e:{try{ce(m.nodeName);var P=!0;break e}catch{}P=!1}P||(m=null)}}else v=="mouseover"?m=l.fromElement:v=="mouseout"&&(m=l.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:si[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Rn.aa.h.call(this)}}N(Rn,ve);var si={2:"touch",3:"pen",4:"mouse"};Rn.prototype.h=function(){Rn.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Vo="closure_listenable_"+(1e6*Math.random()|0),Ol=0;function Ll(l,m,v,I,P){this.listener=l,this.proxy=null,this.src=m,this.type=v,this.capture=!!I,this.ha=P,this.key=++Ol,this.da=this.fa=!1}function ai(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Uo(l){this.src=l,this.g={},this.h=0}Uo.prototype.add=function(l,m,v,I,P){var U=l.toString();l=this.g[U],l||(l=this.g[U]=[],this.h++);var Y=Tc(l,m,I,P);return-1<Y?(m=l[Y],v||(m.fa=!1)):(m=new Ll(m,this.src,U,!!I,P),m.fa=v,l.push(m)),m};function Fl(l,m){var v=m.type;if(v in l.g){var I=l.g[v],P=Array.prototype.indexOf.call(I,m,void 0),U;(U=0<=P)&&Array.prototype.splice.call(I,P,1),U&&(ai(m),l.g[v].length==0&&(delete l.g[v],l.h--))}}function Tc(l,m,v,I){for(var P=0;P<l.length;++P){var U=l[P];if(!U.da&&U.listener==m&&U.capture==!!v&&U.ha==I)return P}return-1}var Cc="closure_lm_"+(1e6*Math.random()|0),Ys={};function Js(l,m,v,I,P){if(I&&I.once)return Dc(l,m,v,I,P);if(Array.isArray(m)){for(var U=0;U<m.length;U++)Js(l,m[U],v,I,P);return null}return v=Rc(v),l&&l[Vo]?l.K(m,v,f(I)?!!I.capture:!!I,P):Pf(l,m,v,!1,I,P)}function Pf(l,m,v,I,P,U){if(!m)throw Error("Invalid event type");var Y=f(P)?!!P.capture:!!P,Ne=Xs(l);if(Ne||(l[Cc]=Ne=new Uo(l)),v=Ne.add(m,v,I,Y,U),v.proxy)return v;if(I=Nf(),v.proxy=I,I.src=l,I.listener=v,l.addEventListener)Fe||(P=Y),P===void 0&&(P=!1),l.addEventListener(m.toString(),I,P);else if(l.attachEvent)l.attachEvent(kf(m.toString()),I);else if(l.addListener&&l.removeListener)l.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Nf(){function l(v){return m.call(l.src,l.listener,v)}let m=py;return l}function Dc(l,m,v,I,P){if(Array.isArray(m)){for(var U=0;U<m.length;U++)Dc(l,m[U],v,I,P);return null}return v=Rc(v),l&&l[Vo]?l.L(m,v,f(I)?!!I.capture:!!I,P):Pf(l,m,v,!0,I,P)}function Vl(l,m,v,I,P){if(Array.isArray(m))for(var U=0;U<m.length;U++)Vl(l,m[U],v,I,P);else I=f(I)?!!I.capture:!!I,v=Rc(v),l&&l[Vo]?(l=l.i,m=String(m).toString(),m in l.g&&(U=l.g[m],v=Tc(U,v,I,P),-1<v&&(ai(U[v]),Array.prototype.splice.call(U,v,1),U.length==0&&(delete l.g[m],l.h--)))):l&&(l=Xs(l))&&(m=l.g[m.toString()],l=-1,m&&(l=Tc(m,v,I,P)),(v=-1<l?m[l]:null)&&Sc(v))}function Sc(l){if(typeof l!="number"&&l&&!l.da){var m=l.src;if(m&&m[Vo])Fl(m.i,l);else{var v=l.type,I=l.proxy;m.removeEventListener?m.removeEventListener(v,I,l.capture):m.detachEvent?m.detachEvent(kf(v),I):m.addListener&&m.removeListener&&m.removeListener(I),(v=Xs(m))?(Fl(v,l),v.h==0&&(v.src=null,m[Cc]=null)):ai(l)}}}function kf(l){return l in Ys?Ys[l]:Ys[l]="on"+l}function py(l,m){if(l.da)l=!0;else{m=new Rn(m,this);var v=l.listener,I=l.ha||l.src;l.fa&&Sc(l),l=v.call(I,m)}return l}function Xs(l){return l=l[Cc],l instanceof Uo?l:null}var Ac="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rc(l){return typeof l=="function"?l:(l[Ac]||(l[Ac]=function(m){return l.handleEvent(m)}),l[Ac])}function Jt(){et.call(this),this.i=new Uo(this),this.M=this,this.F=null}N(Jt,et),Jt.prototype[Vo]=!0,Jt.prototype.removeEventListener=function(l,m,v,I){Vl(this,l,m,v,I)};function Xt(l,m){var v,I=l.F;if(I)for(v=[];I;I=I.F)v.push(I);if(l=l.M,I=m.type||m,typeof m=="string")m=new ve(m,l);else if(m instanceof ve)m.target=m.target||l;else{var P=m;m=new ve(I,l),R(m,P)}if(P=!0,v)for(var U=v.length-1;0<=U;U--){var Y=m.g=v[U];P=ea(Y,I,!0,m)&&P}if(Y=m.g=l,P=ea(Y,I,!0,m)&&P,P=ea(Y,I,!1,m)&&P,v)for(U=0;U<v.length;U++)Y=m.g=v[U],P=ea(Y,I,!1,m)&&P}Jt.prototype.N=function(){if(Jt.aa.N.call(this),this.i){var l=this.i,m;for(m in l.g){for(var v=l.g[m],I=0;I<v.length;I++)ai(v[I]);delete l.g[m],l.h--}}this.F=null},Jt.prototype.K=function(l,m,v,I){return this.i.add(String(l),m,!1,v,I)},Jt.prototype.L=function(l,m,v,I){return this.i.add(String(l),m,!0,v,I)};function ea(l,m,v,I){if(m=l.i.g[String(m)],!m)return!0;m=m.concat();for(var P=!0,U=0;U<m.length;++U){var Y=m[U];if(Y&&!Y.da&&Y.capture==v){var Ne=Y.listener,gt=Y.ha||Y.src;Y.fa&&Fl(l.i,Y),P=Ne.call(gt,I)!==!1&&P}}return P&&!I.defaultPrevented}function Of(l,m,v){if(typeof l=="function")v&&(l=E(l,v));else if(l&&typeof l.handleEvent=="function")l=E(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:u.setTimeout(l,m||0)}function Ul(l){l.g=Of(()=>{l.g=null,l.i&&(l.i=!1,Ul(l))},l.l);let m=l.h;l.h=null,l.m.apply(null,m)}class jl extends et{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Ul(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jo(l){et.call(this),this.h=l,this.g={}}N(jo,et);var Lf=[];function Bo(l){Ee(l.g,function(m,v){this.g.hasOwnProperty(v)&&Sc(m)},l),l.g={}}jo.prototype.N=function(){jo.aa.N.call(this),Bo(this)},jo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bl=u.JSON.stringify,my=u.JSON.parse,Ff=class{stringify(l){return u.JSON.stringify(l,void 0)}parse(l){return u.JSON.parse(l,void 0)}};function xc(){}xc.prototype.h=null;function $l(l){return l.h||(l.h=l.i())}function Vf(){}var ta={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hl(){ve.call(this,"d")}N(Hl,ve);function zl(){ve.call(this,"c")}N(zl,ve);var Zi={},Uf=null;function $o(){return Uf=Uf||new Jt}Zi.La="serverreachability";function jf(l){ve.call(this,Zi.La,l)}N(jf,ve);function na(l){let m=$o();Xt(m,new jf(m))}Zi.STAT_EVENT="statevent";function Bf(l,m){ve.call(this,Zi.STAT_EVENT,l),this.stat=m}N(Bf,ve);function dn(l){let m=$o();Xt(m,new Bf(m,l))}Zi.Ma="timingevent";function tr(l,m){ve.call(this,Zi.Ma,l),this.size=m}N(tr,ve);function ae(l,m){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){l()},m)}function Ho(){this.g=!0}Ho.prototype.xa=function(){this.g=!1};function $f(l,m,v,I,P,U){l.info(function(){if(l.g)if(U)for(var Y="",Ne=U.split("&"),gt=0;gt<Ne.length;gt++){var ze=Ne[gt].split("=");if(1<ze.length){var lt=ze[0];ze=ze[1];var en=lt.split("_");Y=2<=en.length&&en[1]=="type"?Y+(lt+"="+ze+"&"):Y+(lt+"=redacted&")}}else Y=null;else Y=U;return"XMLHTTP REQ ("+I+") [attempt "+P+"]: "+m+`
`+v+`
`+Y})}function Hf(l,m,v,I,P,U,Y){l.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+P+"]: "+m+`
`+v+`
`+U+" "+Y})}function Qi(l,m,v,I){l.info(function(){return"XMLHTTP TEXT ("+m+"): "+zf(l,v)+(I?" "+I:"")})}function ql(l,m){l.info(function(){return"TIMEOUT: "+m})}Ho.prototype.info=function(){};function zf(l,m){if(!l.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(l=0;l<v.length;l++)if(Array.isArray(v[l])){var I=v[l];if(!(2>I.length)){var P=I[1];if(Array.isArray(P)&&!(1>P.length)){var U=P[0];if(U!="noop"&&U!="stop"&&U!="close")for(var Y=1;Y<P.length;Y++)P[Y]=""}}}}return Bl(v)}catch{return m}}var Lr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Wl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gl;function Mc(){}N(Mc,xc),Mc.prototype.g=function(){return new XMLHttpRequest},Mc.prototype.i=function(){return{}},Gl=new Mc;function ci(l,m,v,I){this.j=l,this.i=m,this.l=v,this.R=I||1,this.U=new jo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new qf}function qf(){this.i=null,this.g="",this.h=!1}var Kl={},Zl={};function zo(l,m,v){l.L=1,l.v=Wo(hn(m)),l.m=v,l.P=!0,Wf(l,null)}function Wf(l,m){l.F=Date.now(),Pc(l),l.A=hn(l.v);var v=l.A,I=l.R;Array.isArray(I)||(I=[String(I)]),tt(v.i,"t",I),l.C=0,v=l.j.J,l.h=new qf,l.g=pa(l.j,v?m:null,!l.m),0<l.O&&(l.M=new jl(E(l.Y,l,l.g),l.O)),m=l.U,v=l.g,I=l.ca;var P="readystatechange";Array.isArray(P)||(P&&(Lf[0]=P.toString()),P=Lf);for(var U=0;U<P.length;U++){var Y=Js(v,P[U],I||m.handleEvent,!1,m.h||m);if(!Y)break;m.g[Y.key]=Y}m=l.H?C(l.H):{},l.m?(l.u||(l.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,m)):(l.u="GET",l.g.ea(l.A,l.u,null,m)),na(),$f(l.i,l.u,l.A,l.l,l.R,l.m)}ci.prototype.ca=function(l){l=l.target;let m=this.M;m&&rr(l)==3?m.j():this.Y(l)},ci.prototype.Y=function(l){try{if(l==this.g)e:{let en=rr(this.g);var m=this.g.Ba();let or=this.g.Z();if(!(3>en)&&(en!=3||this.g&&(this.h.h||this.g.oa()||Xf(this.g)))){this.J||en!=4||m==7||(m==8||0>=or?na(3):na(2)),ra(this);var v=this.g.Z();this.X=v;t:if(Gf(this)){var I=Xf(this.g);l="";var P=I.length,U=rr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ui(this),Fr(this);var Y="";break t}this.h.i=new u.TextDecoder}for(m=0;m<P;m++)this.h.h=!0,l+=this.h.i.decode(I[m],{stream:!(U&&m==P-1)});I.length=0,this.h.g+=l,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=v==200,Hf(this.i,this.u,this.A,this.l,this.R,en,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Ne,gt=this.g;if((Ne=gt.g?gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!oe(Ne)){var ze=Ne;break t}}ze=null}if(v=ze)Qi(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Nc(this,v);else{this.o=!1,this.s=3,dn(12),ui(this),Fr(this);break e}}if(this.P){v=!0;let sr;for(;!this.J&&this.C<Y.length;)if(sr=gy(this,Y),sr==Zl){en==4&&(this.s=4,dn(14),v=!1),Qi(this.i,this.l,null,"[Incomplete Response]");break}else if(sr==Kl){this.s=4,dn(15),Qi(this.i,this.l,Y,"[Invalid Chunk]"),v=!1;break}else Qi(this.i,this.l,sr,null),Nc(this,sr);if(Gf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),en!=4||Y.length!=0||this.h.h||(this.s=1,dn(16),v=!1),this.o=this.o&&v,!v)Qi(this.i,this.l,Y,"[Invalid Chunked Response]"),ui(this),Fr(this);else if(0<Y.length&&!this.W){this.W=!0;var lt=this.j;lt.g==this&&lt.ba&&!lt.M&&(lt.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),Uc(lt),lt.M=!0,dn(11))}}else Qi(this.i,this.l,Y,null),Nc(this,Y);en==4&&ui(this),this.o&&!this.J&&(en==4?rp(this.j,this):(this.o=!1,Pc(this)))}else ep(this.g),v==400&&0<Y.indexOf("Unknown SID")?(this.s=3,dn(12)):(this.s=0,dn(13)),ui(this),Fr(this)}}}catch{}finally{}};function Gf(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function gy(l,m){var v=l.C,I=m.indexOf(`
`,v);return I==-1?Zl:(v=Number(m.substring(v,I)),isNaN(v)?Kl:(I+=1,I+v>m.length?Zl:(m=m.slice(I,I+v),l.C=I+v,m)))}ci.prototype.cancel=function(){this.J=!0,ui(this)};function Pc(l){l.S=Date.now()+l.I,Kf(l,l.I)}function Kf(l,m){if(l.B!=null)throw Error("WatchDog timer not null");l.B=ae(E(l.ba,l),m)}function ra(l){l.B&&(u.clearTimeout(l.B),l.B=null)}ci.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(ql(this.i,this.A),this.L!=2&&(na(),dn(17)),ui(this),this.s=2,Fr(this)):Kf(this,this.S-l)};function Fr(l){l.j.G==0||l.J||rp(l.j,l)}function ui(l){ra(l);var m=l.M;m&&typeof m.ma=="function"&&m.ma(),l.M=null,Bo(l.U),l.g&&(m=l.g,l.g=null,m.abort(),m.ma())}function Nc(l,m){try{var v=l.j;if(v.G!=0&&(v.g==l||li(v.h,l))){if(!l.K&&li(v.h,l)&&v.G==3){try{var I=v.Da.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var P=I;if(P[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<l.F)jc(v),Lc(v);else break e;ad(v),dn(18)}}else v.za=P[1],0<v.za-v.T&&37500>P[2]&&v.F&&v.v==0&&!v.C&&(v.C=ae(E(v.Za,v),6e3));if(1>=oa(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else eo(v,11)}else if((l.K||v.g==l)&&jc(v),!oe(m))for(P=v.Da.g.parse(m),m=0;m<P.length;m++){let ze=P[m];if(v.T=ze[0],ze=ze[1],v.G==2)if(ze[0]=="c"){v.K=ze[1],v.ia=ze[2];let lt=ze[3];lt!=null&&(v.la=lt,v.j.info("VER="+v.la));let en=ze[4];en!=null&&(v.Aa=en,v.j.info("SVER="+v.Aa));let or=ze[5];or!=null&&typeof or=="number"&&0<or&&(I=1.5*or,v.L=I,v.j.info("backChannelRequestTimeoutMs_="+I)),I=v;let sr=l.g;if(sr){let pi=sr.g?sr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pi){var U=I.h;U.g||pi.indexOf("spdy")==-1&&pi.indexOf("quic")==-1&&pi.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(di(U,U.h),U.h=null))}if(I.D){let Hc=sr.g?sr.g.getResponseHeader("X-HTTP-Session-Id"):null;Hc&&(I.ya=Hc,Ze(I.I,I.D,Hc))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-l.F,v.j.info("Handshake RTT: "+v.R+"ms")),I=v;var Y=l;if(I.qa=ld(I,I.J?I.ia:null,I.W),Y.K){kc(I.h,Y);var Ne=Y,gt=I.L;gt&&(Ne.I=gt),Ne.B&&(ra(Ne),Pc(Ne)),I.g=Y}else Vc(I);0<v.i.length&&Fc(v)}else ze[0]!="stop"&&ze[0]!="close"||eo(v,7);else v.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?eo(v,7):fa(v):ze[0]!="noop"&&v.l&&v.l.ta(ze),v.v=0)}}na(4)}catch{}}var ia=class{constructor(l,m){this.g=l,this.map=m}};function He(l){this.l=l||10,u.PerformanceNavigationTiming?(l=u.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ut(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function oa(l){return l.h?1:l.g?l.g.size:0}function li(l,m){return l.h?l.h==m:l.g?l.g.has(m):!1}function di(l,m){l.g?l.g.add(m):l.h=m}function kc(l,m){l.h&&l.h==m?l.h=null:l.g&&l.g.has(m)&&l.g.delete(m)}He.prototype.cancel=function(){if(this.i=Ae(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function Ae(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let m=l.i;for(let v of l.g.values())m=m.concat(v.D);return m}return $(l.i)}function It(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(d(l)){for(var m=[],v=l.length,I=0;I<v;I++)m.push(l[I]);return m}m=[],v=0;for(I in l)m[v++]=l[I];return m}function Ql(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(d(l)||typeof l=="string"){var m=[];l=l.length;for(var v=0;v<l;v++)m.push(v);return m}m=[],v=0;for(let I in l)m[v++]=I;return m}}}function sa(l,m){if(l.forEach&&typeof l.forEach=="function")l.forEach(m,void 0);else if(d(l)||typeof l=="string")Array.prototype.forEach.call(l,m,void 0);else for(var v=Ql(l),I=It(l),P=I.length,U=0;U<P;U++)m.call(void 0,I[U],v&&v[U],l)}var xn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _y(l,m){if(l){l=l.split("&");for(var v=0;v<l.length;v++){var I=l[v].indexOf("="),P=null;if(0<=I){var U=l[v].substring(0,I);P=l[v].substring(I+1)}else U=l[v];m(U,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function wr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof wr){this.h=l.h,ht(this,l.j),this.o=l.o,this.g=l.g,Er(this,l.s),this.l=l.l;var m=l.i,v=new Ji;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),qo(this,v),this.m=l.m}else l&&(m=String(l).match(xn))?(this.h=!1,ht(this,m[1]||"",!0),this.o=Vr(m[2]||""),this.g=Vr(m[3]||"",!0),Er(this,m[4]),this.l=Vr(m[5]||"",!0),qo(this,m[6]||"",!0),this.m=Vr(m[7]||"")):(this.h=!1,this.i=new Ji(null,this.h))}wr.prototype.toString=function(){var l=[],m=this.j;m&&l.push(Yi(m,aa,!0),":");var v=this.g;return(v||m=="file")&&(l.push("//"),(m=this.o)&&l.push(Yi(m,aa,!0),"@"),l.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&l.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&l.push("/"),l.push(Yi(v,v.charAt(0)=="/"?Xl:Jl,!0))),(v=this.i.toString())&&l.push("?",v),(v=this.m)&&l.push("#",Yi(v,Zf)),l.join("")};function hn(l){return new wr(l)}function ht(l,m,v){l.j=v?Vr(m,!0):m,l.j&&(l.j=l.j.replace(/:$/,""))}function Er(l,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);l.s=m}else l.s=null}function qo(l,m,v){m instanceof Ji?(l.i=m,ed(l.i,l.h)):(v||(m=Yi(m,Oc)),l.i=new Ji(m,l.h))}function Ze(l,m,v){l.i.set(m,v)}function Wo(l){return Ze(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Vr(l,m){return l?m?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Yi(l,m,v){return typeof l=="string"?(l=encodeURI(l).replace(m,Yl),v&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Yl(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var aa=/[#\/\?@]/g,Jl=/[#\?:]/g,Xl=/[#\?]/g,Oc=/[#\?@]/g,Zf=/#/g;function Ji(l,m){this.h=this.g=null,this.i=l||null,this.j=!!m}function hi(l){l.g||(l.g=new Map,l.h=0,l.i&&_y(l.i,function(m,v){l.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}n=Ji.prototype,n.add=function(l,m){hi(this),this.i=null,l=Xi(this,l);var v=this.g.get(l);return v||this.g.set(l,v=[]),v.push(m),this.h+=1,this};function ye(l,m){hi(l),m=Xi(l,m),l.g.has(m)&&(l.i=null,l.h-=l.g.get(m).length,l.g.delete(m))}function nr(l,m){return hi(l),m=Xi(l,m),l.g.has(m)}n.forEach=function(l,m){hi(this),this.g.forEach(function(v,I){v.forEach(function(P){l.call(m,P,I,this)},this)},this)},n.na=function(){hi(this);let l=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let I=0;I<m.length;I++){let P=l[I];for(let U=0;U<P.length;U++)v.push(m[I])}return v},n.V=function(l){hi(this);let m=[];if(typeof l=="string")nr(this,l)&&(m=m.concat(this.g.get(Xi(this,l))));else{l=Array.from(this.g.values());for(let v=0;v<l.length;v++)m=m.concat(l[v])}return m},n.set=function(l,m){return hi(this),this.i=null,l=Xi(this,l),nr(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[m]),this.h+=1,this},n.get=function(l,m){return l?(l=this.V(l),0<l.length?String(l[0]):m):m};function tt(l,m,v){ye(l,m),0<v.length&&(l.i=null,l.g.set(Xi(l,m),$(v)),l.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var I=m[v];let U=encodeURIComponent(String(I)),Y=this.V(I);for(I=0;I<Y.length;I++){var P=U;Y[I]!==""&&(P+="="+encodeURIComponent(String(Y[I]))),l.push(P)}}return this.i=l.join("&")};function Xi(l,m){return m=String(m),l.j&&(m=m.toLowerCase()),m}function ed(l,m){m&&!l.j&&(hi(l),l.i=null,l.g.forEach(function(v,I){var P=I.toLowerCase();I!=P&&(ye(this,I),tt(this,P,v))},l)),l.j=m}function td(l,m){let v=new Ho;if(u.Image){let I=new Image;I.onload=b(En,v,"TestLoadImage: loaded",!0,m,I),I.onerror=b(En,v,"TestLoadImage: error",!1,m,I),I.onabort=b(En,v,"TestLoadImage: abort",!1,m,I),I.ontimeout=b(En,v,"TestLoadImage: timeout",!1,m,I),u.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=l}else m(!1)}function nd(l,m){let v=new Ho,I=new AbortController,P=setTimeout(()=>{I.abort(),En(v,"TestPingServer: timeout",!1,m)},1e4);fetch(l,{signal:I.signal}).then(U=>{clearTimeout(P),U.ok?En(v,"TestPingServer: ok",!0,m):En(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(P),En(v,"TestPingServer: error",!1,m)})}function En(l,m,v,I,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),I(v)}catch{}}function rd(){this.g=new Ff}function ca(l,m,v){let I=v||"";try{sa(l,function(P,U){let Y=P;f(P)&&(Y=Bl(P)),m.push(I+U+"="+encodeURIComponent(Y))})}catch(P){throw m.push(I+"type="+encodeURIComponent("_badmap")),P}}function bt(l){this.l=l.Ub||null,this.j=l.eb||!1}N(bt,xc),bt.prototype.g=function(){return new Ir(this.l,this.j)},bt.prototype.i=(function(l){return function(){return l}})({});function Ir(l,m){Jt.call(this),this.D=l,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Ir,Jt),n=Ir.prototype,n.open=function(l,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=m,this.readyState=1,ua(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(m.body=l),(this.D||u).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Go(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ua(this)),this.g&&(this.readyState=3,ua(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;id(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function id(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var m=l.value?l.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!l.done}))&&(this.response=this.responseText+=m)}l.done?Go(this):ua(this),this.readyState==3&&id(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,Go(this))},n.Qa=function(l){this.g&&(this.response=l,Go(this))},n.ga=function(){this.g&&Go(this)};function Go(l){l.readyState=4,l.l=null,l.j=null,l.v=null,ua(l)}n.setRequestHeader=function(l,m){this.u.append(l,m)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,l.push(v[0]+": "+v[1]),v=m.next();return l.join(`\r
`)};function ua(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ir.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function od(l){let m="";return Ee(l,function(v,I){m+=I,m+=":",m+=v,m+=`\r
`}),m}function la(l,m,v){e:{for(I in v){var I=!1;break e}I=!0}I||(v=od(v),typeof l=="string"?v!=null&&encodeURIComponent(String(v)):Ze(l,m,v))}function mt(l){Jt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(mt,Jt);var Qf=/^https?$/i,Ve=["POST","PUT"];n=mt.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,m,v,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);m=m?m.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gl.g(),this.v=this.o?$l(this.o):$l(Gl),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(m,String(l),!0),this.B=!1}catch(U){Yf(this,U);return}if(l=v||"",v=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var P in I)v.set(P,I[P]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(let U of I.keys())v.set(U,I.get(U));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(v.keys()).find(U=>U.toLowerCase()=="content-type"),P=u.FormData&&l instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Ve,m,void 0))||I||P||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[U,Y]of v)this.g.setRequestHeader(U,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jf(this),this.u=!0,this.g.send(l),this.u=!1}catch(U){Yf(this,U)}};function Yf(l,m){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=m,l.m=5,$n(l),da(l)}function $n(l){l.A||(l.A=!0,Xt(l,"complete"),Xt(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Xt(this,"complete"),Xt(this,"abort"),da(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),da(this,!0)),mt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ko(this):this.bb())},n.bb=function(){Ko(this)};function Ko(l){if(l.h&&typeof a<"u"&&(!l.v[1]||rr(l)!=4||l.Z()!=2)){if(l.u&&rr(l)==4)Of(l.Ea,0,l);else if(Xt(l,"readystatechange"),rr(l)==4){l.h=!1;try{let Y=l.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var I;if(I=Y===0){var P=String(l.D).match(xn)[1]||null;!P&&u.self&&u.self.location&&(P=u.self.location.protocol.slice(0,-1)),I=!Qf.test(P?P.toLowerCase():"")}v=I}if(v)Xt(l,"complete"),Xt(l,"success");else{l.m=6;try{var U=2<rr(l)?l.g.statusText:""}catch{U=""}l.l=U+" ["+l.Z()+"]",$n(l)}}finally{da(l)}}}}function da(l,m){if(l.g){Jf(l);let v=l.g,I=l.v[0]?()=>{}:null;l.g=null,l.v=null,m||Xt(l,"ready");try{v.onreadystatechange=I}catch{}}}function Jf(l){l.I&&(u.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function rr(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<rr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var m=this.g.responseText;return l&&m.indexOf(l)==0&&(m=m.substring(l.length)),my(m)}};function Xf(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function ep(l){let m={};l=(l.g&&2<=rr(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<l.length;I++){if(oe(l[I]))continue;var v=M(l[I]);let P=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();let U=m[P]||[];m[P]=U,U.push(v)}x(m,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ha(l,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[l]||m}function tp(l){this.Aa=0,this.i=[],this.j=new Ho,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ha("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ha("baseRetryDelayMs",5e3,l),this.cb=ha("retryDelaySeedMs",1e4,l),this.Wa=ha("forwardChannelMaxRetries",2,l),this.wa=ha("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new He(l&&l.concurrentRequestLimit),this.Da=new rd,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=tp.prototype,n.la=8,n.G=1,n.connect=function(l,m,v,I){dn(0),this.W=l,this.H=m||{},v&&I!==void 0&&(this.H.OSID=v,this.H.OAID=I),this.F=this.X,this.I=ld(this,null,this.W),Fc(this)};function fa(l){if(ir(l),l.G==3){var m=l.U++,v=hn(l.I);if(Ze(v,"SID",l.K),Ze(v,"RID",m),Ze(v,"TYPE","terminate"),Zo(l,v),m=new ci(l,l.j,m),m.L=2,m.v=Wo(hn(v)),v=!1,u.navigator&&u.navigator.sendBeacon)try{v=u.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&u.Image&&(new Image().src=m.v,v=!0),v||(m.g=pa(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Pc(m)}ud(l)}function Lc(l){l.g&&(Uc(l),l.g.cancel(),l.g=null)}function ir(l){Lc(l),l.u&&(u.clearTimeout(l.u),l.u=null),jc(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&u.clearTimeout(l.s),l.s=null)}function Fc(l){if(!ut(l.h)&&!l.s){l.s=!0;var m=l.Ga;Fo||ln(),fe||(Fo(),fe=!0),ot.add(m,l),l.B=0}}function np(l,m){return oa(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=m.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=ae(E(l.Ga,l,m),Bc(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let P=new ci(this,this.j,l),U=this.o;if(this.S&&(U?(U=C(U),R(U,this.S)):U=this.S),this.m!==null||this.O||(P.H=U,U=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var I=this.i[v];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=sd(this,P,m),v=hn(this.I),Ze(v,"RID",l),Ze(v,"CVER",22),this.D&&Ze(v,"X-HTTP-Session-Id",this.D),Zo(this,v),U&&(this.O?m="headers="+encodeURIComponent(String(od(U)))+"&"+m:this.m&&la(v,this.m,U)),di(this.h,P),this.Ua&&Ze(v,"TYPE","init"),this.P?(Ze(v,"$req",m),Ze(v,"SID","null"),P.T=!0,zo(P,v,null)):zo(P,v,m),this.G=2}}else this.G==3&&(l?Ur(this,l):this.i.length==0||ut(this.h)||Ur(this))};function Ur(l,m){var v;m?v=m.l:v=l.U++;let I=hn(l.I);Ze(I,"SID",l.K),Ze(I,"RID",v),Ze(I,"AID",l.T),Zo(l,I),l.m&&l.o&&la(I,l.m,l.o),v=new ci(l,l.j,v,l.B+1),l.m===null&&(v.H=l.o),m&&(l.i=m.D.concat(l.i)),m=sd(l,v,1e3),v.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),di(l.h,v),zo(v,I,m)}function Zo(l,m){l.H&&Ee(l.H,function(v,I){Ze(m,I,v)}),l.l&&sa({},function(v,I){Ze(m,I,v)})}function sd(l,m,v){v=Math.min(l.i.length,v);var I=l.l?E(l.l.Na,l.l,l):null;e:{var P=l.i;let U=-1;for(;;){let Y=["count="+v];U==-1?0<v?(U=P[0].g,Y.push("ofs="+U)):U=0:Y.push("ofs="+U);let Ne=!0;for(let gt=0;gt<v;gt++){let ze=P[gt].g,lt=P[gt].map;if(ze-=U,0>ze)U=Math.max(0,P[gt].g-100),Ne=!1;else try{ca(lt,Y,"req"+ze+"_")}catch{I&&I(lt)}}if(Ne){I=Y.join("&");break e}}}return l=l.i.splice(0,v),m.D=l,I}function Vc(l){if(!l.g&&!l.u){l.Y=1;var m=l.Fa;Fo||ln(),fe||(Fo(),fe=!0),ot.add(m,l),l.v=0}}function ad(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=ae(E(l.Fa,l),Bc(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,cd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=ae(E(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dn(10),Lc(this),cd(this))};function Uc(l){l.A!=null&&(u.clearTimeout(l.A),l.A=null)}function cd(l){l.g=new ci(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var m=hn(l.qa);Ze(m,"RID","rpc"),Ze(m,"SID",l.K),Ze(m,"AID",l.T),Ze(m,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ze(m,"TO",l.ja),Ze(m,"TYPE","xmlhttp"),Zo(l,m),l.m&&l.o&&la(m,l.m,l.o),l.L&&(l.g.I=l.L);var v=l.g;l=l.ia,v.L=1,v.v=Wo(hn(m)),v.m=null,v.P=!0,Wf(v,l)}n.Za=function(){this.C!=null&&(this.C=null,Lc(this),ad(this),dn(19))};function jc(l){l.C!=null&&(u.clearTimeout(l.C),l.C=null)}function rp(l,m){var v=null;if(l.g==m){jc(l),Uc(l),l.g=null;var I=2}else if(li(l.h,m))v=m.D,kc(l.h,m),I=1;else return;if(l.G!=0){if(m.o)if(I==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var P=l.B;I=$o(),Xt(I,new tr(I,v)),Fc(l)}else Vc(l);else if(P=m.s,P==3||P==0&&0<m.X||!(I==1&&np(l,m)||I==2&&ad(l)))switch(v&&0<v.length&&(m=l.h,m.i=m.i.concat(v)),P){case 1:eo(l,5);break;case 4:eo(l,10);break;case 3:eo(l,6);break;default:eo(l,2)}}}function Bc(l,m){let v=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(v*=2),v*m}function eo(l,m){if(l.j.info("Error code "+m),m==2){var v=E(l.fb,l),I=l.Xa;let P=!I;I=new wr(I||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||ht(I,"https"),Wo(I),P?td(I.toString(),v):nd(I.toString(),v)}else dn(2);l.G=0,l.l&&l.l.sa(m),ud(l),ir(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),dn(2)):(this.j.info("Failed to ping google.com"),dn(1))};function ud(l){if(l.G=0,l.ka=[],l.l){let m=Ae(l.h);(m.length!=0||l.i.length!=0)&&(F(l.ka,m),F(l.ka,l.i),l.h.i.length=0,$(l.i),l.i.length=0),l.l.ra()}}function ld(l,m,v){var I=v instanceof wr?hn(v):new wr(v);if(I.g!="")m&&(I.g=m+"."+I.g),Er(I,I.s);else{var P=u.location;I=P.protocol,m=m?m+"."+P.hostname:P.hostname,P=+P.port;var U=new wr(null);I&&ht(U,I),m&&(U.g=m),P&&Er(U,P),v&&(U.l=v),I=U}return v=l.D,m=l.ya,v&&m&&Ze(I,v,m),Ze(I,"VER",l.la),Zo(l,I),I}function pa(l,m,v){if(m&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=l.Ca&&!l.pa?new mt(new bt({eb:v})):new mt(l.pa),m.Ha(l.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function fi(){}n=fi.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function $c(){}$c.prototype.g=function(l,m){return new Zt(l,m)};function Zt(l,m){Jt.call(this),this.g=new tp(m),this.l=l,this.h=m&&m.messageUrlParams||null,l=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(l?l["X-WebChannel-Content-Type"]=m.messageContentType:l={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(l?l["X-WebChannel-Client-Profile"]=m.va:l={"X-WebChannel-Client-Profile":m.va}),this.g.S=l,(l=m&&m.Sb)&&!oe(l)&&(this.g.m=l),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!oe(m)&&(this.g.D=m,l=this.h,l!==null&&m in l&&(l=this.h,m in l&&delete l[m])),this.j=new to(this)}N(Zt,Jt),Zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zt.prototype.close=function(){fa(this.g)},Zt.prototype.o=function(l){var m=this.g;if(typeof l=="string"){var v={};v.__data__=l,l=v}else this.u&&(v={},v.__data__=Bl(l),l=v);m.i.push(new ia(m.Ya++,l)),m.G==3&&Fc(m)},Zt.prototype.N=function(){this.g.l=null,delete this.j,fa(this.g),delete this.g,Zt.aa.N.call(this)};function Mn(l){Hl.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var m=l.__sm__;if(m){e:{for(let v in m){l=v;break e}l=void 0}(this.i=l)&&(l=this.i,m=m!==null&&l in m?m[l]:void 0),this.data=m}else this.data=l}N(Mn,Hl);function dd(){zl.call(this),this.status=1}N(dd,zl);function to(l){this.g=l}N(to,fi),to.prototype.ua=function(){Xt(this.g,"a")},to.prototype.ta=function(l){Xt(this.g,new Mn(l))},to.prototype.sa=function(l){Xt(this.g,new dd)},to.prototype.ra=function(){Xt(this.g,"b")},$c.prototype.createWebChannel=$c.prototype.g,Zt.prototype.send=Zt.prototype.o,Zt.prototype.open=Zt.prototype.m,Zt.prototype.close=Zt.prototype.close,FT=Ro.createWebChannelTransport=function(){return new $c},LT=Ro.getStatEventTarget=function(){return $o()},OT=Ro.Event=Zi,V_=Ro.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Lr.NO_ERROR=0,Lr.TIMEOUT=8,Lr.HTTP_ERROR=6,ef=Ro.ErrorCode=Lr,Wl.COMPLETE="complete",kT=Ro.EventType=Wl,Vf.EventType=ta,ta.OPEN="a",ta.CLOSE="b",ta.ERROR="c",ta.MESSAGE="d",Jt.prototype.listen=Jt.prototype.K,cl=Ro.WebChannel=Vf,$6=Ro.FetchXmlHttpFactory=bt,mt.prototype.listenOnce=mt.prototype.L,mt.prototype.getLastError=mt.prototype.Ka,mt.prototype.getLastErrorCode=mt.prototype.Ba,mt.prototype.getStatus=mt.prototype.Z,mt.prototype.getResponseJson=mt.prototype.Oa,mt.prototype.getResponseText=mt.prototype.oa,mt.prototype.send=mt.prototype.ea,mt.prototype.setWithCredentials=mt.prototype.Ha,NT=Ro.XhrIo=mt}).apply(typeof F_<"u"?F_:typeof self<"u"?self:typeof window<"u"?window:{});var gk="@firebase/firestore",_k="4.8.0";var cn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");var Al="11.10.0";var pc=new ki("@firebase/firestore");function ul(){return pc.logLevel}function ie(n,...e){if(pc.logLevel<=Le.DEBUG){let t=e.map(CC);pc.debug(`Firestore (${Al}): ${n}`,...t)}}function xo(n,...e){if(pc.logLevel<=Le.ERROR){let t=e.map(CC);pc.error(`Firestore (${Al}): ${n}`,...t)}}function Hs(n,...e){if(pc.logLevel<=Le.WARN){let t=e.map(CC);pc.warn(`Firestore (${Al}): ${n}`,...t)}}function CC(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function pe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,uO(n,r,t)}function uO(n,e,t){let r=`FIRESTORE (${Al}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw xo(r),new Error(r)}function Xe(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||uO(e,i,r)}function Se(n,e){return n}var W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ee=class extends Vn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ti=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var q_=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},$T=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(cn.UNAUTHENTICATED))}shutdown(){}},HT=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},zT=class{constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Xe(this.o===void 0,42304);let r=this.i,i=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve(),o=new ti;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ti,e.enqueueRetryable(()=>i(this.currentUser))};let a=()=>{let d=o;e.enqueueRetryable(()=>T(this,null,function*(){yield d.promise,yield i(this.currentUser)}))},u=d=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){let d=this.t.getImmediate({optional:!0});d?u(d):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ti)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xe(typeof r.accessToken=="string",31837,{l:r}),new q_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new cn(e)}},qT=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},WT=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new qT(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},W_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},GT=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Dn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Xe(this.o===void 0,3512);let r=o=>{o.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let a=o.token!==this.m;return this.m=o.token,ie("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new W_(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Xe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new W_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function H6(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function lO(){return new TextEncoder}var af=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=H6(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function ke(n,e){return n<e?-1:n>e?1:0}function KT(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return ke(r,i);{let o=lO(),a=z6(o.encode(vk(n,t)),o.encode(vk(e,t)));return a!==0?a:ke(r,i)}}t+=r>65535?2:1}return ke(n.length,e.length)}function vk(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function z6(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ke(n[t],e[t]);return ke(n.length,e.length)}function gl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var yk="__name__",G_=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&pe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&pe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return ke(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):KT(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ao.fromString(e.substring(4,e.length-2))}},wt=class n extends G_{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ee(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},q6=/^[_a-zA-Z][_a-zA-Z0-9]*$/,yr=class n extends G_{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return q6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yk}static keyField(){return new n([yk])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new ee(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},a=!1;for(;i<e.length;){let u=e[i];if(u==="\\"){if(i+1===e.length)throw new ee(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ee(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,i+=2}else u==="`"?(a=!a,i++):u!=="."||a?(r+=u,i++):(o(),i++)}if(o(),a)throw new ee(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var de=class n{constructor(e){this.path=e}static fromPath(e){return new n(wt.fromString(e))}static fromName(e){return new n(wt.fromString(e).popFirst(5))}static empty(){return new n(wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&wt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return wt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new wt(e.slice()))}};function dO(n,e,t){if(!t)throw new ee(W.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function W6(n,e,t,r){if(e===!0&&r===!0)throw new ee(W.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function wk(n){if(!de.isDocumentKey(n))throw new ee(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ek(n){if(de.isDocumentKey(n))throw new ee(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function hO(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Cv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":pe(12329,{type:typeof n})}function Jn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ee(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Cv(n);throw new ee(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Gt(n,e){let t={typeString:n};return e&&(t.value=e),t}function If(n,e){if(!hO(n))throw new ee(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let a=n[r];if(i&&typeof a!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&a!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new ee(W.INVALID_ARGUMENT,t);return!0}var Ik=-62135596800,bk=1e6,Kt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*bk);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ee(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ee(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ik)throw new ee(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bk}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(If(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-Ik;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Kt._jsonSchemaVersion="firestore/timestamp/1.0",Kt._jsonSchema={type:Gt("string",Kt._jsonSchemaVersion),seconds:Gt("number"),nanoseconds:Gt("number")};var xe=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Kt(0,0))}static max(){return new n(new Kt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var cf=-1,ZT=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};ZT.UNKNOWN_ID=-1;function G6(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=xe.fromTimestamp(r===1e9?new Kt(t+1,0):new Kt(t,r));return new mc(i,de.empty(),e)}function K6(n){return new mc(n.readTime,n.key,cf)}var mc=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(xe.min(),de.empty(),cf)}static max(){return new n(xe.max(),de.empty(),cf)}};function Z6(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=de.comparator(n.documentKey,e.documentKey),t!==0?t:ke(n.largestBatchId,e.largestBatchId))}var Q6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",QT=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Rl(n){return T(this,null,function*(){if(n.code!==W.FAILED_PRECONDITION||n.message!==Q6)throw n;ie("LocalStore","Unexpectedly lost primary lease")})}var Z=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,a=!1;e.forEach(u=>{++i,u.next(()=>{++o,a&&o===i&&t()},d=>r(d))}),a=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,a=new Array(o),u=0;for(let d=0;d<o;d++){let f=d;t(e[f]).next(g=>{a[f]=g,++u,u===o&&r(a)},g=>i(g))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function Y6(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function xl(n){return n.name==="IndexedDbTransactionError"}var DC=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),SC=-1;function Dv(n){return n==null}function uf(n){return n===0&&1/n==-1/0}function J6(n){return typeof n=="number"&&Number.isInteger(n)&&!uf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var fO="";function X6(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Tk(e)),e=e5(n.get(t),e);return Tk(e)}function e5(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case fO:t+="";break;default:t+=o}}return t}function Tk(n){return n+fO+""}var t5="remoteDocuments",pO="owner";var mO="mutationQueues";var gO="mutations";var _O="documentMutations",n5="remoteDocumentsV14";var vO="remoteDocumentGlobal";var yO="targets";var wO="targetDocuments";var EO="targetGlobal",IO="collectionParents";var bO="clientMetadata";var TO="bundles";var CO="namedQueries";var r5="indexConfiguration";var i5="indexState";var o5="indexEntries";var DO="documentOverlays";var s5="globals";var a5=[mO,gO,_O,t5,yO,pO,EO,wO,bO,vO,IO,TO,CO],dhe=[...a5,DO],c5=[mO,gO,_O,n5,yO,pO,EO,wO,bO,vO,IO,TO,CO,DO],u5=c5,l5=[...u5,r5,i5,o5];var hhe=[...l5,s5];function Ck(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Zs(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function SO(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Pt=class n{constructor(e,t){this.comparator=e,this.root=t||Bi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fl(this.root,e,this.comparator,!1)}getReverseIterator(){return new fl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fl(this.root,e,this.comparator,!0)}},fl=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Bi=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pe(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw pe(27949);return e+(this.isRed()?0:1)}};Bi.EMPTY=null,Bi.RED=!0,Bi.BLACK=!1;Bi.EMPTY=new class{constructor(){this.size=0}get key(){throw pe(57766)}get value(){throw pe(16141)}get color(){throw pe(16727)}get left(){throw pe(29726)}get right(){throw pe(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Bi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var un=class n{constructor(e){this.comparator=e,this.data=new Pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new K_(this.data.getIterator())}getIteratorFrom(e){return new K_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},K_=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var kr=class n{constructor(e){this.fields=e,e.sort(yr.comparator)}static empty(){return new n([])}unionWith(e){let t=new un(yr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return gl(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Z_=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var An=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Z_("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};An.EMPTY_BYTE_STRING=new An("");var d5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mo(n){if(Xe(!!n,39018),typeof n=="string"){let e=0,t=d5.exec(n);if(Xe(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yt(n.seconds),nanos:yt(n.nanos)}}function yt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Po(n){return typeof n=="string"?An.fromBase64String(n):An.fromUint8Array(n)}var AO="server_timestamp",RO="__type__",xO="__previous_value__",MO="__local_write_time__";function AC(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[RO])===null||t===void 0?void 0:t.stringValue)===AO}function Sv(n){let e=n.mapValue.fields[xO];return AC(e)?Sv(e):e}function lf(n){let e=Mo(n.mapValue.fields[MO].timestampValue);return new Kt(e.seconds,e.nanos)}var YT=class{constructor(e,t,r,i,o,a,u,d,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=g}},Q_="(default)",Y_=class n{constructor(e,t){this.projectId=e,this.database=t||Q_}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Q_}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var RC="__type__",PO="__max__",U_={mapValue:{fields:{__type__:{stringValue:PO}}}},xC="__vector__",_l="value";function zs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?AC(n)?4:kO(n)?9007199254740991:NO(n)?10:11:pe(28295,{value:n})}function qi(n,e){if(n===e)return!0;let t=zs(n);if(t!==zs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return lf(n).isEqual(lf(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let a=Mo(i.timestampValue),u=Mo(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return Po(i.bytesValue).isEqual(Po(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return yt(i.geoPointValue.latitude)===yt(o.geoPointValue.latitude)&&yt(i.geoPointValue.longitude)===yt(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return yt(i.integerValue)===yt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let a=yt(i.doubleValue),u=yt(o.doubleValue);return a===u?uf(a)===uf(u):isNaN(a)&&isNaN(u)}return!1})(n,e);case 9:return gl(n.arrayValue.values||[],e.arrayValue.values||[],qi);case 10:case 11:return(function(i,o){let a=i.mapValue.fields||{},u=o.mapValue.fields||{};if(Ck(a)!==Ck(u))return!1;for(let d in a)if(a.hasOwnProperty(d)&&(u[d]===void 0||!qi(a[d],u[d])))return!1;return!0})(n,e);default:return pe(52216,{left:n})}}function df(n,e){return(n.values||[]).find(t=>qi(t,e))!==void 0}function vl(n,e){if(n===e)return 0;let t=zs(n),r=zs(e);if(t!==r)return ke(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ke(n.booleanValue,e.booleanValue);case 2:return(function(o,a){let u=yt(o.integerValue||o.doubleValue),d=yt(a.integerValue||a.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(n,e);case 3:return Dk(n.timestampValue,e.timestampValue);case 4:return Dk(lf(n),lf(e));case 5:return KT(n.stringValue,e.stringValue);case 6:return(function(o,a){let u=Po(o),d=Po(a);return u.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(o,a){let u=o.split("/"),d=a.split("/");for(let f=0;f<u.length&&f<d.length;f++){let g=ke(u[f],d[f]);if(g!==0)return g}return ke(u.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,a){let u=ke(yt(o.latitude),yt(a.latitude));return u!==0?u:ke(yt(o.longitude),yt(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Sk(n.arrayValue,e.arrayValue);case 10:return(function(o,a){var u,d,f,g;let y=o.fields||{},E=a.fields||{},b=(u=y[_l])===null||u===void 0?void 0:u.arrayValue,N=(d=E[_l])===null||d===void 0?void 0:d.arrayValue,$=ke(((f=b?.values)===null||f===void 0?void 0:f.length)||0,((g=N?.values)===null||g===void 0?void 0:g.length)||0);return $!==0?$:Sk(b,N)})(n.mapValue,e.mapValue);case 11:return(function(o,a){if(o===U_.mapValue&&a===U_.mapValue)return 0;if(o===U_.mapValue)return 1;if(a===U_.mapValue)return-1;let u=o.fields||{},d=Object.keys(u),f=a.fields||{},g=Object.keys(f);d.sort(),g.sort();for(let y=0;y<d.length&&y<g.length;++y){let E=KT(d[y],g[y]);if(E!==0)return E;let b=vl(u[d[y]],f[g[y]]);if(b!==0)return b}return ke(d.length,g.length)})(n.mapValue,e.mapValue);default:throw pe(23264,{le:t})}}function Dk(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ke(n,e);let t=Mo(n),r=Mo(e),i=ke(t.seconds,r.seconds);return i!==0?i:ke(t.nanos,r.nanos)}function Sk(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=vl(t[i],r[i]);if(o)return o}return ke(t.length,r.length)}function yl(n){return JT(n)}function JT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Mo(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Po(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return de.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=JT(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let a of r)o?o=!1:i+=",",i+=`${a}:${JT(t.fields[a])}`;return i+"}"})(n.mapValue):pe(61005,{value:n})}function $_(n){switch(zs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Sv(n);return e?16+$_(e):16;case 5:return 2*n.stringValue.length;case 6:return Po(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+$_(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Zs(r.fields,(o,a)=>{i+=o.length+$_(a)}),i})(n.mapValue);default:throw pe(13486,{value:n})}}function Ak(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function XT(n){return!!n&&"integerValue"in n}function MC(n){return!!n&&"arrayValue"in n}function Rk(n){return!!n&&"nullValue"in n}function xk(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function H_(n){return!!n&&"mapValue"in n}function NO(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[RC])===null||t===void 0?void 0:t.stringValue)===xC}function nf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Zs(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=nf(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=nf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function kO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===PO}var phe={mapValue:{fields:{[RC]:{stringValue:xC},[_l]:{arrayValue:{}}}}};var vr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!H_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nf(t)}setAll(e){let t=yr.emptyPath(),r={},i=[];e.forEach((a,u)=>{if(!t.isImmediateParentOf(u)){let d=this.getFieldsMap(t);this.applyChanges(d,r,i),r={},i=[],t=u.popLast()}a?r[u.lastSegment()]=nf(a):i.push(u.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());H_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];H_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Zs(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(nf(this.value))}};function OO(n){let e=[];return Zs(n.fields,(t,r)=>{let i=new yr([t]);if(H_(r)){let o=OO(r.mapValue).fields;if(o.length===0)e.push(i);else for(let a of o)e.push(i.child(a))}else e.push(i)}),new kr(e)}var ni=class n{constructor(e,t,r,i,o,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new n(e,0,xe.min(),xe.min(),xe.min(),vr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,xe.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,xe.min(),xe.min(),vr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,xe.min(),xe.min(),vr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var wl=class{constructor(e,t){this.position=e,this.inclusive=t}};function Mk(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],a=n.position[i];if(o.field.isKeyField()?r=de.comparator(de.fromName(a.referenceValue),t.key):r=vl(a,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Pk(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qi(n.position[t],e.position[t]))return!1;return!0}var gc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function h5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var J_=class{},Wt=class n extends J_{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new t0(e,t,r):t==="array-contains"?new i0(e,r):t==="in"?new o0(e,r):t==="not-in"?new s0(e,r):t==="array-contains-any"?new a0(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new n0(e,r):new r0(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(vl(t,this.value)):t!==null&&zs(this.value)===zs(t)&&this.matchesComparison(vl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ri=class n extends J_{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return LO(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function LO(n){return n.op==="and"}function FO(n){return f5(n)&&LO(n)}function f5(n){for(let e of n.filters)if(e instanceof ri)return!1;return!0}function e0(n){if(n instanceof Wt)return n.field.canonicalString()+n.op.toString()+yl(n.value);if(FO(n))return n.filters.map(e=>e0(e)).join(",");{let e=n.filters.map(t=>e0(t)).join(",");return`${n.op}(${e})`}}function VO(n,e){return n instanceof Wt?(function(r,i){return i instanceof Wt&&r.op===i.op&&r.field.isEqual(i.field)&&qi(r.value,i.value)})(n,e):n instanceof ri?(function(r,i){return i instanceof ri&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,a,u)=>o&&VO(a,i.filters[u]),!0):!1})(n,e):void pe(19439)}function UO(n){return n instanceof Wt?(function(t){return`${t.field.canonicalString()} ${t.op} ${yl(t.value)}`})(n):n instanceof ri?(function(t){return t.op.toString()+" {"+t.getFilters().map(UO).join(" ,")+"}"})(n):"Filter"}var t0=class extends Wt{constructor(e,t,r){super(e,t,r),this.key=de.fromName(r.referenceValue)}matches(e){let t=de.comparator(e.key,this.key);return this.matchesComparison(t)}},n0=class extends Wt{constructor(e,t){super(e,"in",t),this.keys=jO("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},r0=class extends Wt{constructor(e,t){super(e,"not-in",t),this.keys=jO("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function jO(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>de.fromName(r.referenceValue))}var i0=class extends Wt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return MC(t)&&df(t.arrayValue,this.value)}},o0=class extends Wt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&df(this.value.arrayValue,t)}},s0=class extends Wt{constructor(e,t){super(e,"not-in",t)}matches(e){if(df(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!df(this.value.arrayValue,t)}},a0=class extends Wt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!MC(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>df(this.value.arrayValue,r))}};var c0=class{constructor(e,t=null,r=[],i=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=u,this.Pe=null}};function Nk(n,e=null,t=[],r=[],i=null,o=null,a=null){return new c0(n,e,t,r,i,o,a)}function PC(n){let e=Se(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>e0(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Dv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>yl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>yl(r)).join(",")),e.Pe=t}return e.Pe}function NC(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!h5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!VO(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Pk(n.startAt,e.startAt)&&Pk(n.endAt,e.endAt)}function u0(n){return de.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var qs=class{constructor(e,t=null,r=[],i=[],o=null,a="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=d,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function p5(n,e,t,r,i,o,a,u){return new qs(n,e,t,r,i,o,a,u)}function Av(n){return new qs(n)}function kk(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function BO(n){return n.collectionGroup!==null}function rf(n){let e=Se(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new un(yr.comparator);return a.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new gc(o,r))}),t.has(yr.keyField().canonicalString())||e.Te.push(new gc(yr.keyField(),r))}return e.Te}function $i(n){let e=Se(n);return e.Ie||(e.Ie=m5(e,rf(n))),e.Ie}function m5(n,e){if(n.limitType==="F")return Nk(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new gc(i.field,o)});let t=n.endAt?new wl(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new wl(n.startAt.position,n.startAt.inclusive):null;return Nk(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function l0(n,e){let t=n.filters.concat([e]);return new qs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function d0(n,e,t){return new qs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Rv(n,e){return NC($i(n),$i(e))&&n.limitType===e.limitType}function $O(n){return`${PC($i(n))}|lt:${n.limitType}`}function ll(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>UO(i)).join(", ")}]`),Dv(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>yl(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>yl(i)).join(",")),`Target(${r})`})($i(n))}; limitType=${n.limitType})`}function xv(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):de.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of rf(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(a,u,d){let f=Mk(a,u,d);return a.inclusive?f<=0:f<0})(r.startAt,rf(r),i)||r.endAt&&!(function(a,u,d){let f=Mk(a,u,d);return a.inclusive?f>=0:f>0})(r.endAt,rf(r),i))})(n,e)}function g5(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function HO(n){return(e,t)=>{let r=!1;for(let i of rf(n)){let o=_5(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function _5(n,e,t){let r=n.field.isKeyField()?de.comparator(e.key,t.key):(function(o,a,u){let d=a.data.field(o),f=u.data.field(o);return d!==null&&f!==null?vl(d,f):pe(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return pe(19790,{direction:n.dir})}}var No=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Zs(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return SO(this.inner)}size(){return this.innerSize}};var v5=new Pt(de.comparator);function ko(){return v5}var zO=new Pt(de.comparator);function tf(...n){let e=zO;for(let t of n)e=e.insert(t.key,t);return e}function qO(n){let e=zO;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function uc(){return of()}function WO(){return of()}function of(){return new No(n=>n.toString(),(n,e)=>n.isEqual(e))}var y5=new Pt(de.comparator),w5=new un(de.comparator);function $e(...n){let e=w5;for(let t of n)e=e.add(t);return e}var E5=new un(ke);function I5(){return E5}function kC(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uf(e)?"-0":e}}function GO(n){return{integerValue:""+n}}function b5(n,e){return J6(e)?GO(e):kC(n,e)}var El=class{constructor(){this._=void 0}};function T5(n,e,t){return n instanceof Il?(function(i,o){let a={fields:{[RO]:{stringValue:AO},[MO]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&AC(o)&&(o=Sv(o)),o&&(a.fields[xO]=o),{mapValue:a}})(t,e):n instanceof _c?ZO(n,e):n instanceof vc?QO(n,e):(function(i,o){let a=KO(i,o),u=Ok(a)+Ok(i.Ee);return XT(a)&&XT(i.Ee)?GO(u):kC(i.serializer,u)})(n,e)}function C5(n,e,t){return n instanceof _c?ZO(n,e):n instanceof vc?QO(n,e):t}function KO(n,e){return n instanceof bl?(function(r){return XT(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Il=class extends El{},_c=class extends El{constructor(e){super(),this.elements=e}};function ZO(n,e){let t=YO(e);for(let r of n.elements)t.some(i=>qi(i,r))||t.push(r);return{arrayValue:{values:t}}}var vc=class extends El{constructor(e){super(),this.elements=e}};function QO(n,e){let t=YO(e);for(let r of n.elements)t=t.filter(i=>!qi(i,r));return{arrayValue:{values:t}}}var bl=class extends El{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function Ok(n){return yt(n.integerValue||n.doubleValue)}function YO(n){return MC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function D5(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof _c&&i instanceof _c||r instanceof vc&&i instanceof vc?gl(r.elements,i.elements,qi):r instanceof bl&&i instanceof bl?qi(r.Ee,i.Ee):r instanceof Il&&i instanceof Il})(n.transform,e.transform)}var h0=class{constructor(e,t){this.version=e,this.transformResults=t}},Hi=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function z_(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Tl=class{};function JO(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new hf(n.key,Hi.none()):new yc(n.key,n.data,Hi.none());{let t=n.data,r=vr.empty(),i=new un(yr.comparator);for(let o of e.fields)if(!i.has(o)){let a=t.field(o);a===null&&o.length>1&&(o=o.popLast(),a=t.field(o)),a===null?r.delete(o):r.set(o,a),i=i.add(o)}return new Wi(n.key,r,new kr(i.toArray()),Hi.none())}}function S5(n,e,t){n instanceof yc?(function(i,o,a){let u=i.value.clone(),d=Fk(i.fieldTransforms,o,a.transformResults);u.setAll(d),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(n,e,t):n instanceof Wi?(function(i,o,a){if(!z_(i.precondition,o))return void o.convertToUnknownDocument(a.version);let u=Fk(i.fieldTransforms,o,a.transformResults),d=o.data;d.setAll(XO(i)),d.setAll(u),o.convertToFoundDocument(a.version,d).setHasCommittedMutations()})(n,e,t):(function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function sf(n,e,t,r){return n instanceof yc?(function(o,a,u,d){if(!z_(o.precondition,a))return u;let f=o.value.clone(),g=Vk(o.fieldTransforms,d,a);return f.setAll(g),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null})(n,e,t,r):n instanceof Wi?(function(o,a,u,d){if(!z_(o.precondition,a))return u;let f=Vk(o.fieldTransforms,d,a),g=a.data;return g.setAll(XO(o)),g.setAll(f),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))})(n,e,t,r):(function(o,a,u){return z_(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u})(n,e,t)}function A5(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=KO(r.transform,i||null);o!=null&&(t===null&&(t=vr.empty()),t.set(r.field,o))}return t||null}function Lk(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&gl(r,i,(o,a)=>D5(o,a))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var yc=class extends Tl{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Wi=class extends Tl{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function XO(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Fk(n,e,t){let r=new Map;Xe(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],a=o.transform,u=e.data.field(o.field);r.set(o.field,C5(a,u,t[i]))}return r}function Vk(n,e,t){let r=new Map;for(let i of n){let o=i.transform,a=t.data.field(i.field);r.set(i.field,T5(o,a,e))}return r}var hf=class extends Tl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},f0=class extends Tl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var p0=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&S5(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=sf(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=sf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=WO();return this.mutations.forEach(i=>{let o=e.get(i.key),a=o.overlayedDocument,u=this.applyToLocalView(a,o.mutatedFields);u=t.has(i.key)?null:u;let d=JO(a,u);d!==null&&r.set(i.key,d),a.isValidDocument()||a.convertToNoDocument(xe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),$e())}isEqual(e){return this.batchId===e.batchId&&gl(this.mutations,e.mutations,(t,r)=>Lk(t,r))&&gl(this.baseMutations,e.baseMutations,(t,r)=>Lk(t,r))}},m0=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Xe(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return y5})(),o=e.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new n(e,t,r,i)}};var g0=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var _0=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var zt,We;function R5(n){switch(n){case W.OK:return pe(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return pe(15467,{code:n})}}function e1(n){if(n===void 0)return xo("GRPC error has no .code"),W.UNKNOWN;switch(n){case zt.OK:return W.OK;case zt.CANCELLED:return W.CANCELLED;case zt.UNKNOWN:return W.UNKNOWN;case zt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case zt.INTERNAL:return W.INTERNAL;case zt.UNAVAILABLE:return W.UNAVAILABLE;case zt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case zt.NOT_FOUND:return W.NOT_FOUND;case zt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case zt.ABORTED:return W.ABORTED;case zt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case zt.DATA_LOSS:return W.DATA_LOSS;default:return pe(39323,{code:n})}}(We=zt||(zt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";var Uk=null;var x5=new Ao([4294967295,4294967295],0);function jk(n){let e=lO().encode(n),t=new PT;return t.update(e),new Uint8Array(t.digest())}function Bk(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ao([t,r],0),new Ao([i,o],0)]}var v0=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new lc(`Invalid padding: ${t}`);if(r<0)throw new lc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new lc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new lc(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Ao.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Ao.fromNumber(r)));return i.compare(x5)===1&&(i=new Ao([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=jk(e),[r,i]=Bk(t);for(let o=0;o<this.hashCount;o++){let a=this.pe(r,i,o);if(!this.ye(a))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new n(o,i,t);return r.forEach(u=>a.insert(u)),a}insert(e){if(this.fe===0)return;let t=jk(e),[r,i]=Bk(t);for(let o=0;o<this.hashCount;o++){let a=this.pe(r,i,o);this.we(a)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},lc=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var X_=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,ff.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(xe.min(),i,new Pt(ke),ko(),$e())}},ff=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,$e(),$e(),$e())}};var pl=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},ev=class{constructor(e,t){this.targetId=e,this.De=t}},tv=class{constructor(e,t,r=An.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},nv=class{constructor(){this.ve=0,this.Ce=$k(),this.Fe=An.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=$e(),t=$e(),r=$e();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:pe(38017,{changeType:o})}}),new ff(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=$k()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Xe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},y0=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=ko(),this.je=j_(),this.Je=j_(),this.He=new Pt(ke)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:pe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(u0(o))if(r===0){let a=new de(o.path);this.Xe(t,a,ni.newNoDocument(a,xe.min()))}else Xe(r===1,20013,{expectedCount:r});else{let a=this.ot(t);if(a!==r){let u=this._t(e),d=u?this.ut(u,e,a):1;if(d!==0){this.rt(t);let f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,f)}Uk?.ct((function(g,y,E,b,N){var $,F,q,oe,se,ce;let Ke={localCacheCount:g,existenceFilterCount:y.count,databaseId:E.database,projectId:E.projectId},Ee=y.unchangedNames;return Ee&&(Ke.bloomFilter={applied:N===0,hashCount:($=Ee?.hashCount)!==null&&$!==void 0?$:0,bitmapLength:(oe=(q=(F=Ee?.bits)===null||F===void 0?void 0:F.bitmap)===null||q===void 0?void 0:q.length)!==null&&oe!==void 0?oe:0,padding:(ce=(se=Ee?.bits)===null||se===void 0?void 0:se.padding)!==null&&ce!==void 0?ce:0,mightContain:x=>{var C;return(C=b?.mightContain(x))!==null&&C!==void 0&&C}}),Ke})(a,e.De,this.We.lt(),u,d))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,a,u;try{a=Po(r).toUint8Array()}catch(d){if(d instanceof Z_)return Hs("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new v0(a,i,o)}catch(d){return Hs(d instanceof lc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.fe===0?null:u}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let a=this.We.lt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,a)=>{let u=this.st(a);if(u){if(o.current&&u0(u.target)){let d=new de(u.target.path);this.Tt(d).has(a)||this.It(a,d)||this.Xe(a,d,ni.newNoDocument(d,e))}o.Ne&&(t.set(a,o.Le()),o.ke())}});let r=$e();this.Je.forEach((o,a)=>{let u=!0;a.forEachWhile(d=>{let f=this.st(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(o))}),this.ze.forEach((o,a)=>a.setReadTime(e));let i=new X_(e,t,this.He,this.ze,r);return this.ze=ko(),this.je=j_(),this.Je=j_(),this.He=new Pt(ke),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new nv,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new un(ke),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new un(ke),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||ie("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new nv),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function j_(){return new Pt(de.comparator)}function $k(){return new Pt(de.comparator)}var M5={asc:"ASCENDING",desc:"DESCENDING"},P5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},N5={and:"AND",or:"OR"},w0=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function E0(n,e){return n.useProto3Json||Dv(e)?e:{value:e}}function rv(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function t1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function k5(n,e){return rv(n,e.toTimestamp())}function zi(n){return Xe(!!n,49232),xe.fromTimestamp((function(t){let r=Mo(t);return new Kt(r.seconds,r.nanos)})(n))}function OC(n,e){return I0(n,e).canonicalString()}function I0(n,e){let t=(function(i){return new wt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function n1(n){let e=wt.fromString(n);return Xe(a1(e),10190,{key:e.toString()}),e}function b0(n,e){return OC(n.databaseId,e.path)}function VT(n,e){let t=n1(e);if(t.get(1)!==n.databaseId.projectId)throw new ee(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ee(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new de(i1(t))}function r1(n,e){return OC(n.databaseId,e)}function O5(n){let e=n1(n);return e.length===4?wt.emptyPath():i1(e)}function T0(n){return new wt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function i1(n){return Xe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Hk(n,e,t){return{name:b0(n,e),fields:t.value.mapValue.fields}}function L5(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:pe(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(f,g){return f.useProto3Json?(Xe(g===void 0||typeof g=="string",58123),An.fromBase64String(g||"")):(Xe(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),An.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&(function(f){let g=f.code===void 0?W.UNKNOWN:e1(f.code);return new ee(g,f.message||"")})(a);t=new tv(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=VT(n,r.document.name),o=zi(r.document.updateTime),a=r.document.createTime?zi(r.document.createTime):xe.min(),u=new vr({mapValue:{fields:r.document.fields}}),d=ni.newFoundDocument(i,o,a,u),f=r.targetIds||[],g=r.removedTargetIds||[];t=new pl(f,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=VT(n,r.document),o=r.readTime?zi(r.readTime):xe.min(),a=ni.newNoDocument(i,o),u=r.removedTargetIds||[];t=new pl([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=VT(n,r.document),o=r.removedTargetIds||[];t=new pl([],o,i,null)}else{if(!("filter"in e))return pe(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,a=new _0(i,o),u=r.targetId;t=new ev(u,a)}}return t}function F5(n,e){let t;if(e instanceof yc)t={update:Hk(n,e.key,e.value)};else if(e instanceof hf)t={delete:b0(n,e.key)};else if(e instanceof Wi)t={update:Hk(n,e.key,e.data),updateMask:W5(e.fieldMask)};else{if(!(e instanceof f0))return pe(16599,{Rt:e.type});t={verify:b0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,a){let u=a.transform;if(u instanceof Il)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof _c)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof vc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof bl)return{fieldPath:a.field.canonicalString(),increment:u.Ee};throw pe(20930,{transform:a.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:k5(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:pe(27497)})(n,e.precondition)),t}function V5(n,e){return n&&n.length>0?(Xe(e!==void 0,14353),n.map(t=>(function(i,o){let a=i.updateTime?zi(i.updateTime):zi(o);return a.isEqual(xe.min())&&(a=zi(o)),new h0(a,i.transformResults||[])})(t,e))):[]}function U5(n,e){return{documents:[r1(n,e.path)]}}function j5(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=r1(n,i);let o=(function(f){if(f.length!==0)return s1(ri.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let a=(function(f){if(f.length!==0)return f.map(g=>(function(E){return{field:dl(E.field),direction:H5(E.dir)}})(g))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);let u=E0(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{Vt:t,parent:i}}function B5(n){let e=O5(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Xe(r===1,65062);let g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(y){let E=o1(y);return E instanceof ri&&FO(E)?E.getFilters():[E]})(t.where));let a=[];t.orderBy&&(a=(function(y){return y.map(E=>(function(N){return new gc(hl(N.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(E))})(t.orderBy));let u=null;t.limit&&(u=(function(y){let E;return E=typeof y=="object"?y.value:y,Dv(E)?null:E})(t.limit));let d=null;t.startAt&&(d=(function(y){let E=!!y.before,b=y.values||[];return new wl(b,E)})(t.startAt));let f=null;return t.endAt&&(f=(function(y){let E=!y.before,b=y.values||[];return new wl(b,E)})(t.endAt)),p5(e,i,a,o,u,"F",d,f)}function $5(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function o1(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=hl(t.unaryFilter.field);return Wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=hl(t.unaryFilter.field);return Wt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=hl(t.unaryFilter.field);return Wt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=hl(t.unaryFilter.field);return Wt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pe(61313);default:return pe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Wt.create(hl(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pe(58110);default:return pe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ri.create(t.compositeFilter.filters.map(r=>o1(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return pe(1026)}})(t.compositeFilter.op))})(n):pe(30097,{filter:n})}function H5(n){return M5[n]}function z5(n){return P5[n]}function q5(n){return N5[n]}function dl(n){return{fieldPath:n.canonicalString()}}function hl(n){return yr.fromServerFormat(n.fieldPath)}function s1(n){return n instanceof Wt?(function(t){if(t.op==="=="){if(xk(t.value))return{unaryFilter:{field:dl(t.field),op:"IS_NAN"}};if(Rk(t.value))return{unaryFilter:{field:dl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(xk(t.value))return{unaryFilter:{field:dl(t.field),op:"IS_NOT_NAN"}};if(Rk(t.value))return{unaryFilter:{field:dl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dl(t.field),op:z5(t.op),value:t.value}}})(n):n instanceof ri?(function(t){let r=t.getFilters().map(i=>s1(i));return r.length===1?r[0]:{compositeFilter:{op:q5(t.op),filters:r}}})(n):pe(54877,{filter:n})}function W5(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function a1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var pf=class n{constructor(e,t,r,i,o=xe.min(),a=xe.min(),u=An.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var C0=class{constructor(e){this.gt=e}};function G5(n){let e=B5({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?d0(e,e.limit,"L"):e}var iv=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(yt(e.integerValue));else if("doubleValue"in e){let r=yt(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),uf(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Mo(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Po(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?kO(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):NO(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):pe(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let a=_l,u=((i=(r=o[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(yt(u)),this.xt(a,t),this.Dt(o[a],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),de.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};iv.Ut=new iv;var D0=class{constructor(){this.Dn=new S0}addToCollectionParentIndex(e,t){return this.Dn.add(t),Z.resolve()}getCollectionParents(e,t){return Z.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return Z.resolve()}deleteFieldIndex(e,t){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,t){return Z.resolve()}getDocumentsMatchingTarget(e,t){return Z.resolve(null)}getIndexType(e,t){return Z.resolve(0)}getFieldIndexes(e,t){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,t){return Z.resolve(mc.min())}getMinOffsetFromCollectionGroup(e,t){return Z.resolve(mc.min())}updateCollectionGroup(e,t,r){return Z.resolve()}updateIndexEntries(e,t){return Z.resolve()}},S0=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new un(wt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new un(wt.comparator)).toArray()}};var mhe=new Uint8Array(0);var zk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},c1=41943040,Nr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Nr.DEFAULT_COLLECTION_PERCENTILE=10,Nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nr.DEFAULT=new Nr(c1,Nr.DEFAULT_COLLECTION_PERCENTILE,Nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nr.DISABLED=new Nr(-1,0,0);var mf=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var qk="LruGarbageCollector",K5=1048576;function Wk([n,e],[t,r]){let i=ke(n,t);return i===0?ke(e,r):i}var A0=class{constructor(e){this.Tr=e,this.buffer=new un(Wk),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();Wk(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},R0=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ie(qk,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>T(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){xl(t)?ie(qk,"Ignoring IndexedDB error during garbage collection: ",t):yield Rl(t)}yield this.Rr(3e5)}))}},x0=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return Z.resolve(DC.ue);let r=new A0(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(zk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zk):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,a,u,d,f,g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,a=Date.now(),this.nthSequenceNumber(e,i))).next(y=>(r=y,u=Date.now(),this.removeTargets(e,r,t))).next(y=>(o=y,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(f=Date.now(),ul()<=Le.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-g}ms
	Determined least recently used ${i} in `+(u-a)+`ms
	Removed ${o} targets in `+(d-u)+`ms
	Removed ${y} documents in `+(f-d)+`ms
Total Duration: ${f-g}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:y})))}};function Z5(n,e){return new x0(n,e)}var M0=class{constructor(){this.changes=new No(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ni.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?Z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var P0=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var N0=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&sf(r.mutation,i,kr.empty(),Kt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,$e()).next(()=>r))}getLocalViewOfDocuments(e,t,r=$e()){let i=uc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let a=tf();return o.forEach((u,d)=>{a=a.insert(u,d.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let r=uc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,$e()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((a,u)=>{t.set(a,u)})})}computeViews(e,t,r,i){let o=ko(),a=of(),u=(function(){return of()})();return t.forEach((d,f)=>{let g=r.get(f.key);i.has(f.key)&&(g===void 0||g.mutation instanceof Wi)?o=o.insert(f.key,f):g!==void 0?(a.set(f.key,g.mutation.getFieldMask()),sf(g.mutation,f,g.mutation.getFieldMask(),Kt.now())):a.set(f.key,kr.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((f,g)=>a.set(f,g)),t.forEach((f,g)=>{var y;return u.set(f,new P0(g,(y=a.get(f))!==null&&y!==void 0?y:null))}),u))}recalculateAndSaveOverlays(e,t){let r=of(),i=new Pt((a,u)=>a-u),o=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let u of a)u.keys().forEach(d=>{let f=t.get(d);if(f===null)return;let g=r.get(d)||kr.empty();g=u.applyToLocalView(f,g),r.set(d,g);let y=(i.get(u.batchId)||$e()).add(d);i=i.insert(u.batchId,y)})}).next(()=>{let a=[],u=i.getReverseIterator();for(;u.hasNext();){let d=u.getNext(),f=d.key,g=d.value,y=WO();g.forEach(E=>{if(!o.has(E)){let b=JO(t.get(E),r.get(E));b!==null&&y.set(E,b),o=o.add(E)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,y))}return Z.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(a){return de.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):BO(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):Z.resolve(uc()),u=cf,d=o;return a.next(f=>Z.forEach(f,(g,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(g)?Z.resolve():this.remoteDocumentCache.getEntry(e,g).next(E=>{d=d.insert(g,E)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,d,f,$e())).next(g=>({batchId:u,changes:qO(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new de(t)).next(r=>{let i=tf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,a=tf();return this.indexManager.getCollectionParents(e,o).next(u=>Z.forEach(u,d=>{let f=(function(y,E){return new qs(E,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(g=>{g.forEach((y,E)=>{a=a.insert(y,E)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(a=>{o.forEach((d,f)=>{let g=f.getKey();a.get(g)===null&&(a=a.insert(g,ni.newInvalidDocument(g)))});let u=tf();return a.forEach((d,f)=>{let g=o.get(d);g!==void 0&&sf(g.mutation,f,kr.empty(),Kt.now()),xv(t,f)&&(u=u.insert(d,f))}),u})}};var k0=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return Z.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:zi(i.createTime)}})(t)),Z.resolve()}getNamedQuery(e,t){return Z.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:G5(i.bundledQuery),readTime:zi(i.readTime)}})(t)),Z.resolve()}};var O0=class{constructor(){this.overlays=new Pt(de.comparator),this.kr=new Map}getOverlay(e,t){return Z.resolve(this.overlays.get(t))}getOverlays(e,t){let r=uc();return Z.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),Z.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),Z.resolve()}getOverlaysForCollection(e,t,r){let i=uc(),o=t.length+1,a=new de(t.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){let d=u.getNext().value,f=d.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>r&&i.set(d.getKey(),d)}return Z.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Pt((f,g)=>f-g),a=this.overlays.getIterator();for(;a.hasNext();){let f=a.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let g=o.get(f.largestBatchId);g===null&&(g=uc(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}let u=uc(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,g)=>u.set(f,g)),!(u.size()>=i)););return Z.resolve(u)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let a=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new g0(t,r));let o=this.kr.get(t);o===void 0&&(o=$e(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var L0=class{constructor(){this.sessionToken=An.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Z.resolve()}};var gf=class{constructor(){this.qr=new un(qt.Qr),this.$r=new un(qt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new qt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new qt(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new de(new wt([])),r=new qt(t,e),i=new qt(t,e+1),o=[];return this.$r.forEachInRange([r,i],a=>{this.Wr(a),o.push(a.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new de(new wt([])),r=new qt(t,e),i=new qt(t,e+1),o=$e();return this.$r.forEachInRange([r,i],a=>{o=o.add(a.key)}),o}containsKey(e){let t=new qt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},qt=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return de.comparator(e.key,t.key)||ke(e.Hr,t.Hr)}static Ur(e,t){return ke(e.Hr,t.Hr)||de.comparator(e.key,t.key)}};var F0=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new un(qt.Qr)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new p0(o,t,r,i);this.mutationQueue.push(a);for(let u of i)this.Yr=this.Yr.add(new qt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Z.resolve(a)}lookupMutationBatch(e,t){return Z.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return Z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?SC:this.er-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new qt(t,0),i=new qt(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],a=>{let u=this.Zr(a.Hr);o.push(u)}),Z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new un(ke);return t.forEach(i=>{let o=new qt(i,0),a=new qt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,a],u=>{r=r.add(u.Hr)})}),Z.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;de.isDocumentKey(o)||(o=o.child(""));let a=new qt(new de(o),0),u=new un(ke);return this.Yr.forEachWhile(d=>{let f=d.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(u=u.add(d.Hr)),!0)},a),Z.resolve(this.ei(u))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Xe(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return Z.forEach(t.mutations,i=>{let o=new qt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new qt(t,0),i=this.Yr.firstAfterOrEqual(r);return Z.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var V0=class{constructor(e){this.ni=e,this.docs=(function(){return new Pt(de.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return Z.resolve(r?r.document.mutableCopy():ni.newInvalidDocument(t))}getEntries(e,t){let r=ko();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ni.newInvalidDocument(i))}),Z.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=ko(),a=t.path,u=new de(a.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){let{key:f,value:{document:g}}=d.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||Z6(K6(g),r)<=0||(i.has(g.key)||xv(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return Z.resolve(o)}getAllFromCollectionGroup(e,t,r,i){pe(9500)}ri(e,t){return Z.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new U0(this)}getSize(e){return Z.resolve(this.size)}},U0=class extends M0{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),Z.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var j0=class{constructor(e){this.persistence=e,this.ii=new No(t=>PC(t),NC),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.si=0,this.oi=new gf,this.targetCount=0,this._i=mf.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),Z.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new mf(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,Z.resolve()}updateTargetData(e,t){return this.hr(t),Z.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((a,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.ii.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),Z.waitFor(o).next(()=>i)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return Z.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),Z.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(a=>{o.push(i.markPotentiallyOrphaned(e,a))}),Z.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),Z.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return Z.resolve(r)}containsKey(e,t){return Z.resolve(this.oi.containsKey(t))}};var ov=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new DC(0),this.ci=!1,this.ci=!0,this.li=new L0,this.referenceDelegate=e(this),this.hi=new j0(this),this.indexManager=new D0,this.remoteDocumentCache=(function(i){return new V0(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new C0(t),this.Ti=new k0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new O0,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new F0(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){ie("MemoryPersistence","Starting transaction:",e);let i=new B0(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return Z.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},B0=class extends QT{constructor(e){super(),this.currentSequenceNumber=e}},$0=class n{constructor(e){this.persistence=e,this.Ai=new gf,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw pe(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),Z.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),Z.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.mi,r=>{let i=de.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,xe.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return Z.or([()=>Z.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},sv=class n{constructor(e,t){this.persistence=e,this.gi=new No(r=>X6(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Z5(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return Z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return Z.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?Z.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,a=>this.Sr(e,a,t).next(u=>{u||(r++,o.removeEntry(a,xe.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),Z.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),Z.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),Z.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=$_(e.data.value)),t}Sr(e,t,r){return Z.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return Z.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var H0=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=$e(),i=$e();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var z0=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var q0=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return VP()?8:Y6(an())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;let a=new z0;return this.ws(e,t,a).next(u=>{if(o.result=u,this.Rs)return this.Ss(e,t,a,u.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(ul()<=Le.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",ll(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Z.resolve()):(ul()<=Le.DEBUG&&ie("QueryEngine","Query:",ll(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(ul()<=Le.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",ll(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$i(t))):Z.resolve())}ps(e,t){if(kk(t))return Z.resolve(null);let r=$i(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=d0(t,null,"F"),r=$i(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let a=$e(...o);return this.gs.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,r).next(d=>{let f=this.bs(t,u);return this.Ds(t,f,a,d.readTime)?this.ps(e,d0(t,null,"F")):this.vs(e,f,t,d)}))})))}ys(e,t,r,i){return kk(t)||i.isEqual(xe.min())?Z.resolve(null):this.gs.getDocuments(e,r).next(o=>{let a=this.bs(t,o);return this.Ds(t,a,r,i)?Z.resolve(null):(ul()<=Le.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ll(t)),this.vs(e,a,t,G6(i,cf)).next(u=>u))})}bs(e,t){let r=new un(HO(e));return t.forEach((i,o)=>{xv(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return ul()<=Le.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",ll(t)),this.gs.getDocumentsMatchingQuery(e,t,mc.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(a=>{o=o.insert(a.key,a)}),o))}};var LC="LocalStore",Q5=3e8,W0=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Pt(ke),this.Ms=new No(o=>PC(o),NC),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new N0(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function Y5(n,e,t,r){return new W0(n,e,t,r)}function u1(n,e){return T(this,null,function*(){let t=Se(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let a=[],u=[],d=$e();for(let f of i){a.push(f.batchId);for(let g of f.mutations)d=d.add(g.key)}for(let f of o){u.push(f.batchId);for(let g of f.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(r,d).next(f=>({Bs:f,removedBatchIds:a,addedBatchIds:u}))})})})}function J5(n,e){let t=Se(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(u,d,f,g){let y=f.batch,E=y.keys(),b=Z.resolve();return E.forEach(N=>{b=b.next(()=>g.getEntry(d,N)).next($=>{let F=f.docVersions.get(N);Xe(F!==null,48541),$.version.compareTo(F)<0&&(y.applyToRemoteDocument($,f),$.isValidDocument()&&($.setReadTime(f.commitVersion),g.addEntry($)))})}),b.next(()=>u.mutationQueue.removeMutationBatch(d,y))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let d=$e();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function l1(n){let e=Se(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function X5(n,e){let t=Se(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let a=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let u=[];e.targetChanges.forEach((g,y)=>{let E=i.get(y);if(!E)return;u.push(t.hi.removeMatchingKeys(o,g.removedDocuments,y).next(()=>t.hi.addMatchingKeys(o,g.addedDocuments,y)));let b=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?b=b.withResumeToken(An.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):g.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(g.resumeToken,r)),i=i.insert(y,b),(function($,F,q){return $.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=Q5?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0})(E,b,g)&&u.push(t.hi.updateTargetData(o,b))});let d=ko(),f=$e();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))}),u.push(eW(o,a,e.documentUpdates).next(g=>{d=g.Ls,f=g.ks})),!r.isEqual(xe.min())){let g=t.hi.getLastRemoteSnapshotVersion(o).next(y=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));u.push(g)}return Z.waitFor(u).next(()=>a.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,d,f)).next(()=>d)}).then(o=>(t.Fs=i,o))}function eW(n,e,t){let r=$e(),i=$e();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let a=ko();return t.forEach((u,d)=>{let f=o.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(u)),d.isNoDocument()&&d.version.isEqual(xe.min())?(e.removeEntry(u,d.readTime),a=a.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),a=a.insert(u,d)):ie(LC,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)}),{Ls:a,ks:i}})}function tW(n,e){let t=Se(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=SC),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function nW(n,e){let t=Se(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,Z.resolve(i)):t.hi.allocateTargetId(r).next(a=>(i=new pf(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function G0(n,e,t){return T(this,null,function*(){let r=Se(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!xl(a))throw a;ie(LC,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function Gk(n,e,t){let r=Se(n),i=xe.min(),o=$e();return r.persistence.runTransaction("Execute query","readwrite",a=>(function(d,f,g){let y=Se(d),E=y.Ms.get(g);return E!==void 0?Z.resolve(y.Fs.get(E)):y.hi.getTargetData(f,g)})(r,a,$i(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(a,u.targetId).next(d=>{o=d})}).next(()=>r.Cs.getDocumentsMatchingQuery(a,e,t?i:xe.min(),t?o:$e())).next(u=>(rW(r,g5(e),u),{documents:u,qs:o})))}function rW(n,e,t){let r=n.xs.get(e)||xe.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var av=class{constructor(){this.activeTargetIds=I5()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var K0=class{constructor(){this.Fo=new av,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new av,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Z0=class{xo(e){}shutdown(){}};var Kk="ConnectivityMonitor",cv=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ie(Kk,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){ie(Kk,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var B_=null;function Q0(){return B_===null?B_=(function(){return 268435456+Math.round(2147483648*Math.random())})():B_++,"0x"+B_.toString(16)}var UT="RestConnection",iW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Y0=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Q_?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let a=Q0(),u=this.Go(e,t.toUriEncodedString());ie(UT,`Sending RPC '${e}' ${a}:`,u,r);let d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(d,i,o);let{host:f}=new URL(u),g=Pi(f);return this.jo(e,u,d,r,g).then(y=>(ie(UT,`Received RPC '${e}' ${a}: `,y),y),y=>{throw Hs(UT,`RPC '${e}' ${a} failed with error: `,y,"url: ",u,"request:",r),y})}Jo(e,t,r,i,o,a){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Al})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=iW[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var J0=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Sn="WebChannelConnection",X0=class extends Y0{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let a=Q0();return new Promise((u,d)=>{let f=new NT;f.setWithCredentials(!0),f.listenOnce(kT.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case ef.NO_ERROR:let y=f.getResponseJson();ie(Sn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(y)),u(y);break;case ef.TIMEOUT:ie(Sn,`RPC '${e}' ${a} timed out`),d(new ee(W.DEADLINE_EXCEEDED,"Request time out"));break;case ef.HTTP_ERROR:let E=f.getStatus();if(ie(Sn,`RPC '${e}' ${a} failed with status:`,E,"response text:",f.getResponseText()),E>0){let b=f.getResponseJson();Array.isArray(b)&&(b=b[0]);let N=b?.error;if(N&&N.status&&N.message){let $=(function(q){let oe=q.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(oe)>=0?oe:W.UNKNOWN})(N.status);d(new ee($,N.message))}else d(new ee(W.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new ee(W.UNAVAILABLE,"Connection failed."));break;default:pe(9055,{c_:e,streamId:a,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{ie(Sn,`RPC '${e}' ${a} completed.`)}});let g=JSON.stringify(i);ie(Sn,`RPC '${e}' ${a} sending request:`,i),f.send(t,"POST",g,r,15)})}P_(e,t,r){let i=Q0(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=FT(),u=LT(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.zo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;let g=o.join("");ie(Sn,`Creating RPC '${e}' stream ${i}: ${g}`,d);let y=a.createWebChannel(g,d);this.T_(y);let E=!1,b=!1,N=new J0({Ho:F=>{b?ie(Sn,`Not sending because RPC '${e}' stream ${i} is closed:`,F):(E||(ie(Sn,`Opening RPC '${e}' stream ${i} transport.`),y.open(),E=!0),ie(Sn,`RPC '${e}' stream ${i} sending:`,F),y.send(F))},Yo:()=>y.close()}),$=(F,q,oe)=>{F.listen(q,se=>{try{oe(se)}catch(ce){setTimeout(()=>{throw ce},0)}})};return $(y,cl.EventType.OPEN,()=>{b||(ie(Sn,`RPC '${e}' stream ${i} transport opened.`),N.s_())}),$(y,cl.EventType.CLOSE,()=>{b||(b=!0,ie(Sn,`RPC '${e}' stream ${i} transport closed`),N.__(),this.I_(y))}),$(y,cl.EventType.ERROR,F=>{b||(b=!0,Hs(Sn,`RPC '${e}' stream ${i} transport errored. Name:`,F.name,"Message:",F.message),N.__(new ee(W.UNAVAILABLE,"The operation could not be completed")))}),$(y,cl.EventType.MESSAGE,F=>{var q;if(!b){let oe=F.data[0];Xe(!!oe,16349);let se=oe,ce=se?.error||((q=se[0])===null||q===void 0?void 0:q.error);if(ce){ie(Sn,`RPC '${e}' stream ${i} received error:`,ce);let Ke=ce.status,Ee=(function(D){let R=zt[D];if(R!==void 0)return e1(R)})(Ke),x=ce.message;Ee===void 0&&(Ee=W.INTERNAL,x="Unknown error status: "+Ke+" with message "+ce.message),b=!0,N.__(new ee(Ee,x)),y.close()}else ie(Sn,`RPC '${e}' stream ${i} received:`,oe),N.a_(oe)}}),$(u,OT.STAT_EVENT,F=>{F.stat===V_.PROXY?ie(Sn,`RPC '${e}' stream ${i} detected buffering proxy`):F.stat===V_.NOPROXY&&ie(Sn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.o_()},0),N}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function jT(){return typeof document<"u"?document:null}function Mv(n){return new w0(n,!0)}var uv=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var Zk="PersistentStream",lv=class{constructor(e,t,r,i,o,a,u,d){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new uv(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return T(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return T(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return T(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(xo(t.toString()),xo("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new ee(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>T(this,null,function*(){this.state=0,this.start()}))}G_(e){return ie(Zk,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(ie(Zk,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},eC=class extends lv{constructor(e,t,r,i,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=L5(this.serializer,e),r=(function(o){if(!("targetChange"in o))return xe.min();let a=o.targetChange;return a.targetIds&&a.targetIds.length?xe.min():a.readTime?zi(a.readTime):xe.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=T0(this.serializer),t.addTarget=(function(o,a){let u,d=a.target;if(u=u0(d)?{documents:U5(o,d)}:{query:j5(o,d).Vt},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=t1(o,a.resumeToken);let f=E0(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(xe.min())>0){u.readTime=rv(o,a.snapshotVersion.toTimestamp());let f=E0(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);let r=$5(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=T0(this.serializer),t.removeTarget=e,this.k_(t)}},tC=class extends lv{constructor(e,t,r,i,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=V5(e.writeResults,e.commitTime),r=zi(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=T0(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>F5(this.serializer,r))};this.k_(t)}};var nC=class{},rC=class extends nC{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new ee(W.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,I0(t,r),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee(W.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Jo(e,I0(t,r),i,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ee(W.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},iC=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(xo(t),this._a=!1):ie("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var wc="RemoteStore",oC=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(a=>{r.enqueueAndForget(()=>T(this,null,function*(){Ec(this)&&(ie(wc,"Restarting streams for network reachability change."),yield(function(d){return T(this,null,function*(){let f=Se(d);f.Ia.add(4),yield bf(f),f.Aa.set("Unknown"),f.Ia.delete(4),yield Pv(f)})})(this))}))}),this.Aa=new iC(r,i)}};function Pv(n){return T(this,null,function*(){if(Ec(n))for(let e of n.da)yield e(!0)})}function bf(n){return T(this,null,function*(){for(let e of n.da)yield e(!1)})}function d1(n,e){let t=Se(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),jC(t)?UC(t):Ml(t).x_()&&VC(t,e))}function FC(n,e){let t=Se(n),r=Ml(t);t.Ta.delete(e),r.x_()&&h1(t,e),t.Ta.size===0&&(r.x_()?r.B_():Ec(t)&&t.Aa.set("Unknown"))}function VC(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ml(n).H_(e)}function h1(n,e){n.Ra.$e(e),Ml(n).Y_(e)}function UC(n){n.Ra=new y0({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Ml(n).start(),n.Aa.aa()}function jC(n){return Ec(n)&&!Ml(n).M_()&&n.Ta.size>0}function Ec(n){return Se(n).Ia.size===0}function f1(n){n.Ra=void 0}function oW(n){return T(this,null,function*(){n.Aa.set("Online")})}function sW(n){return T(this,null,function*(){n.Ta.forEach((e,t)=>{VC(n,e)})})}function aW(n,e){return T(this,null,function*(){f1(n),jC(n)?(n.Aa.la(e),UC(n)):n.Aa.set("Unknown")})}function cW(n,e,t){return T(this,null,function*(){if(n.Aa.set("Online"),e instanceof tv&&e.state===2&&e.cause)try{yield(function(i,o){return T(this,null,function*(){let a=o.cause;for(let u of o.targetIds)i.Ta.has(u)&&(yield i.remoteSyncer.rejectListen(u,a),i.Ta.delete(u),i.Ra.removeTarget(u))})})(n,e)}catch(r){ie(wc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield dv(n,r)}else if(e instanceof pl?n.Ra.Ye(e):e instanceof ev?n.Ra.it(e):n.Ra.et(e),!t.isEqual(xe.min()))try{let r=yield l1(n.localStore);t.compareTo(r)>=0&&(yield(function(o,a){let u=o.Ra.Pt(a);return u.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){let g=o.Ta.get(f);g&&o.Ta.set(f,g.withResumeToken(d.resumeToken,a))}}),u.targetMismatches.forEach((d,f)=>{let g=o.Ta.get(d);if(!g)return;o.Ta.set(d,g.withResumeToken(An.EMPTY_BYTE_STRING,g.snapshotVersion)),h1(o,d);let y=new pf(g.target,d,f,g.sequenceNumber);VC(o,y)}),o.remoteSyncer.applyRemoteEvent(u)})(n,t))}catch(r){ie(wc,"Failed to raise snapshot:",r),yield dv(n,r)}})}function dv(n,e,t){return T(this,null,function*(){if(!xl(e))throw e;n.Ia.add(1),yield bf(n),n.Aa.set("Offline"),t||(t=()=>l1(n.localStore)),n.asyncQueue.enqueueRetryable(()=>T(null,null,function*(){ie(wc,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield Pv(n)}))})}function p1(n,e){return e().catch(t=>dv(n,t,e))}function Nv(n){return T(this,null,function*(){let e=Se(n),t=Ws(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:SC;for(;uW(e);)try{let i=yield tW(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,lW(e,i)}catch(i){yield dv(e,i)}m1(e)&&g1(e)})}function uW(n){return Ec(n)&&n.Pa.length<10}function lW(n,e){n.Pa.push(e);let t=Ws(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function m1(n){return Ec(n)&&!Ws(n).M_()&&n.Pa.length>0}function g1(n){Ws(n).start()}function dW(n){return T(this,null,function*(){Ws(n).na()})}function hW(n){return T(this,null,function*(){let e=Ws(n);for(let t of n.Pa)e.X_(t.mutations)})}function fW(n,e,t){return T(this,null,function*(){let r=n.Pa.shift(),i=m0.from(r,e,t);yield p1(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Nv(n)})}function pW(n,e){return T(this,null,function*(){e&&Ws(n).Z_&&(yield(function(r,i){return T(this,null,function*(){if((function(a){return R5(a)&&a!==W.ABORTED})(i.code)){let o=r.Pa.shift();Ws(r).N_(),yield p1(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Nv(r)}})})(n,e)),m1(n)&&g1(n)})}function Qk(n,e){return T(this,null,function*(){let t=Se(n);t.asyncQueue.verifyOperationInProgress(),ie(wc,"RemoteStore received new credentials");let r=Ec(t);t.Ia.add(3),yield bf(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield Pv(t)})}function mW(n,e){return T(this,null,function*(){let t=Se(n);e?(t.Ia.delete(2),yield Pv(t)):e||(t.Ia.add(2),yield bf(t),t.Aa.set("Unknown"))})}function Ml(n){return n.Va||(n.Va=(function(t,r,i){let o=Se(t);return o.ia(),new eC(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:oW.bind(null,n),e_:sW.bind(null,n),n_:aW.bind(null,n),J_:cW.bind(null,n)}),n.da.push(e=>T(null,null,function*(){e?(n.Va.N_(),jC(n)?UC(n):n.Aa.set("Unknown")):(yield n.Va.stop(),f1(n))}))),n.Va}function Ws(n){return n.ma||(n.ma=(function(t,r,i){let o=Se(t);return o.ia(),new tC(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:dW.bind(null,n),n_:pW.bind(null,n),ea:hW.bind(null,n),ta:fW.bind(null,n)}),n.da.push(e=>T(null,null,function*(){e?(n.ma.N_(),yield Nv(n)):(yield n.ma.stop(),n.Pa.length>0&&(ie(wc,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var sC=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let a=Date.now()+r,u=new n(e,t,a,i,o);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function BC(n,e){if(xo("AsyncQueue",`${e}: ${n}`),xl(n))return new ee(W.UNAVAILABLE,`${e}: ${n}`);throw n}var hv=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||de.comparator(t.key,r.key):(t,r)=>de.comparator(t.key,r.key),this.keyedMap=tf(),this.sortedSet=new Pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var fv=class{constructor(){this.fa=new Pt(de.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):pe(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Cl=class n{constructor(e,t,r,i,o,a,u,d,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,o){let a=[];return t.forEach(u=>{a.push({type:0,doc:u})}),new n(e,t,hv.emptySet(t),a,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var aC=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},cC=class{constructor(){this.queries=Yk(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=Se(t),o=i.queries;i.queries=Yk(),o.forEach((a,u)=>{for(let d of u.wa)d.onError(r)})})(this,new ee(W.ABORTED,"Firestore shutting down"))}};function Yk(){return new No(n=>$O(n),Rv)}function $C(n,e){return T(this,null,function*(){let t=Se(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new aC,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(a){let u=BC(a,`Initialization of query '${ll(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&zC(t)})}function HC(n,e){return T(this,null,function*(){let t=Se(n),r=e.query,i=3,o=t.queries.get(r);if(o){let a=o.wa.indexOf(e);a>=0&&(o.wa.splice(a,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function gW(n,e){let t=Se(n),r=!1;for(let i of e){let o=i.query,a=t.queries.get(o);if(a){for(let u of a.wa)u.Ca(i)&&(r=!0);a.ya=i}}r&&zC(t)}function _W(n,e,t){let r=Se(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function zC(n){n.Da.forEach(e=>{e.next()})}var uC,Jk;(Jk=uC||(uC={})).Fa="default",Jk.Cache="cache";var _f=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Cl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Cl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==uC.Cache}};var pv=class{constructor(e){this.key=e}},mv=class{constructor(e){this.key=e}},lC=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=$e(),this.mutatedKeys=$e(),this.Xa=HO(e),this.eu=new hv(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new fv,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,a=i,u=!1,d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,y)=>{let E=i.get(g),b=xv(this.query,y)?y:null,N=!!E&&this.mutatedKeys.has(E.key),$=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations),F=!1;E&&b?E.data.isEqual(b.data)?N!==$&&(r.track({type:3,doc:b}),F=!0):this.iu(E,b)||(r.track({type:2,doc:b}),F=!0,(d&&this.Xa(b,d)>0||f&&this.Xa(b,f)<0)&&(u=!0)):!E&&b?(r.track({type:0,doc:b}),F=!0):E&&!b&&(r.track({type:1,doc:E}),F=!0,(d||f)&&(u=!0)),F&&(b?(a=a.add(b),o=$?o.add(g):o.delete(g)):(a=a.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let g=this.query.limitType==="F"?a.last():a.first();a=a.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{eu:a,ru:r,Ds:u,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let a=e.ru.pa();a.sort((g,y)=>(function(b,N){let $=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe(20277,{At:F})}};return $(b)-$(N)})(g.type,y.type)||this.Xa(g.doc,y.doc)),this.su(r),i=i!=null&&i;let u=t&&!i?this.ou():[],d=this.Za.size===0&&this.current&&!i?1:0,f=d!==this.Ya;return this.Ya=d,a.length!==0||f?{snapshot:new Cl(this.query,e.eu,o,a,e.mutatedKeys,d===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:u}:{_u:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new fv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=$e(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new mv(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new pv(r))}),t}uu(e){this.Ha=e.qs,this.Za=$e();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Cl.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},qC="SyncEngine",dC=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},hC=class{constructor(e){this.key=e,this.lu=!1}},fC=class{constructor(e,t,r,i,o,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new No(u=>$O(u),Rv),this.Tu=new Map,this.Iu=new Set,this.du=new Pt(de.comparator),this.Eu=new Map,this.Au=new gf,this.Ru={},this.Vu=new Map,this.mu=mf.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function vW(n,e,t=!0){return T(this,null,function*(){let r=I1(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield _1(r,e,t,!0),i})}function yW(n,e){return T(this,null,function*(){let t=I1(n);yield _1(t,e,!0,!1)})}function _1(n,e,t,r){return T(this,null,function*(){let i=yield nW(n.localStore,$i(e)),o=i.targetId,a=n.sharedClientState.addLocalQueryTarget(o,t),u;return r&&(u=yield wW(n,e,o,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&d1(n.remoteStore,i),u})}function wW(n,e,t,r,i){return T(this,null,function*(){n.gu=(y,E,b)=>(function($,F,q,oe){return T(this,null,function*(){let se=F.view.nu(q);se.Ds&&(se=yield Gk($.localStore,F.query,!1).then(({documents:x})=>F.view.nu(x,se)));let ce=oe&&oe.targetChanges.get(F.targetId),Ke=oe&&oe.targetMismatches.get(F.targetId)!=null,Ee=F.view.applyChanges(se,$.isPrimaryClient,ce,Ke);return eO($,F.targetId,Ee._u),Ee.snapshot})})(n,y,E,b);let o=yield Gk(n.localStore,e,!0),a=new lC(e,o.qs),u=a.nu(o.documents),d=ff.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=a.applyChanges(u,n.isPrimaryClient,d);eO(n,t,f._u);let g=new dC(e,t,a);return n.Pu.set(e,g),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),f.snapshot})}function EW(n,e,t){return T(this,null,function*(){let r=Se(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(a=>!Rv(a,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield G0(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&FC(r.remoteStore,i.targetId),pC(r,i.targetId)}).catch(Rl))):(pC(r,i.targetId),yield G0(r.localStore,i.targetId,!0))})}function IW(n,e){return T(this,null,function*(){let t=Se(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),FC(t.remoteStore,r.targetId))})}function bW(n,e,t){return T(this,null,function*(){let r=xW(n);try{let i=yield(function(a,u){let d=Se(a),f=Kt.now(),g=u.reduce((b,N)=>b.add(N.key),$e()),y,E;return d.persistence.runTransaction("Locally write mutations","readwrite",b=>{let N=ko(),$=$e();return d.Os.getEntries(b,g).next(F=>{N=F,N.forEach((q,oe)=>{oe.isValidDocument()||($=$.add(q))})}).next(()=>d.localDocuments.getOverlayedDocuments(b,N)).next(F=>{y=F;let q=[];for(let oe of u){let se=A5(oe,y.get(oe.key).overlayedDocument);se!=null&&q.push(new Wi(oe.key,se,OO(se.value.mapValue),Hi.exists(!0)))}return d.mutationQueue.addMutationBatch(b,f,q,u)}).next(F=>{E=F;let q=F.applyToLocalDocumentSet(y,$);return d.documentOverlayCache.saveOverlays(b,F.batchId,q)})}).then(()=>({batchId:E.batchId,changes:qO(y)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,u,d){let f=a.Ru[a.currentUser.toKey()];f||(f=new Pt(ke)),f=f.insert(u,d),a.Ru[a.currentUser.toKey()]=f})(r,i.batchId,t),yield Tf(r,i.changes),yield Nv(r.remoteStore)}catch(i){let o=BC(i,"Failed to persist write");t.reject(o)}})}function v1(n,e){return T(this,null,function*(){let t=Se(n);try{let r=yield X5(t.localStore,e);e.targetChanges.forEach((i,o)=>{let a=t.Eu.get(o);a&&(Xe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.lu=!0:i.modifiedDocuments.size>0?Xe(a.lu,14607):i.removedDocuments.size>0&&(Xe(a.lu,42227),a.lu=!1))}),yield Tf(t,r,e)}catch(r){yield Rl(r)}})}function Xk(n,e,t){let r=Se(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,a)=>{let u=a.view.va(e);u.snapshot&&i.push(u.snapshot)}),(function(a,u){let d=Se(a);d.onlineState=u;let f=!1;d.queries.forEach((g,y)=>{for(let E of y.wa)E.va(u)&&(f=!0)}),f&&zC(d)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function TW(n,e,t){return T(this,null,function*(){let r=Se(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let a=new Pt(de.comparator);a=a.insert(o,ni.newNoDocument(o,xe.min()));let u=$e().add(o),d=new X_(xe.min(),new Map,new Pt(ke),a,u);yield v1(r,d),r.du=r.du.remove(o),r.Eu.delete(e),WC(r)}else yield G0(r.localStore,e,!1).then(()=>pC(r,e,t)).catch(Rl)})}function CW(n,e){return T(this,null,function*(){let t=Se(n),r=e.batch.batchId;try{let i=yield J5(t.localStore,e);w1(t,r,null),y1(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Tf(t,i)}catch(i){yield Rl(i)}})}function DW(n,e,t){return T(this,null,function*(){let r=Se(n);try{let i=yield(function(a,u){let d=Se(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return d.mutationQueue.lookupMutationBatch(f,u).next(y=>(Xe(y!==null,37113),g=y.keys(),d.mutationQueue.removeMutationBatch(f,y))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,g,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>d.localDocuments.getDocuments(f,g))})})(r.localStore,e);w1(r,e,t),y1(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Tf(r,i)}catch(i){yield Rl(i)}})}function y1(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function w1(n,e,t){let r=Se(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function pC(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||E1(n,r)})}function E1(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(FC(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),WC(n))}function eO(n,e,t){for(let r of t)r instanceof pv?(n.Au.addReference(r.key,e),SW(n,r)):r instanceof mv?(ie(qC,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||E1(n,r.key)):pe(19791,{yu:r})}function SW(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(ie(qC,"New document in limbo: "+t),n.Iu.add(r),WC(n))}function WC(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new de(wt.fromString(e)),r=n.mu.next();n.Eu.set(r,new hC(t)),n.du=n.du.insert(t,r),d1(n.remoteStore,new pf($i(Av(t.path)),r,"TargetPurposeLimboResolution",DC.ue))}}function Tf(n,e,t){return T(this,null,function*(){let r=Se(n),i=[],o=[],a=[];r.Pu.isEmpty()||(r.Pu.forEach((u,d)=>{a.push(r.gu(d,e,t).then(f=>{var g;if((f||t)&&r.isPrimaryClient){let y=f?!f.fromCache:(g=t?.targetChanges.get(d.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(f){i.push(f);let y=H0.Es(d.targetId,f);o.push(y)}}))}),yield Promise.all(a),r.hu.J_(i),yield(function(d,f){return T(this,null,function*(){let g=Se(d);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>Z.forEach(f,E=>Z.forEach(E.Is,b=>g.persistence.referenceDelegate.addReference(y,E.targetId,b)).next(()=>Z.forEach(E.ds,b=>g.persistence.referenceDelegate.removeReference(y,E.targetId,b)))))}catch(y){if(!xl(y))throw y;ie(LC,"Failed to update sequence numbers: "+y)}for(let y of f){let E=y.targetId;if(!y.fromCache){let b=g.Fs.get(E),N=b.snapshotVersion,$=b.withLastLimboFreeSnapshotVersion(N);g.Fs=g.Fs.insert(E,$)}}})})(r.localStore,o))})}function AW(n,e){return T(this,null,function*(){let t=Se(n);if(!t.currentUser.isEqual(e)){ie(qC,"User change. New user:",e.toKey());let r=yield u1(t.localStore,e);t.currentUser=e,(function(o,a){o.Vu.forEach(u=>{u.forEach(d=>{d.reject(new ee(W.CANCELLED,a))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Tf(t,r.Bs)}})}function RW(n,e){let t=Se(n),r=t.Eu.get(e);if(r&&r.lu)return $e().add(r.key);{let i=$e(),o=t.Tu.get(e);if(!o)return i;for(let a of o){let u=t.Pu.get(a);i=i.unionWith(u.view.tu)}return i}}function I1(n){let e=Se(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=v1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TW.bind(null,e),e.hu.J_=gW.bind(null,e.eventManager),e.hu.pu=_W.bind(null,e.eventManager),e}function xW(n){let e=Se(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DW.bind(null,e),e}var b1=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return T(this,null,function*(){this.serializer=Mv(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return Y5(this.persistence,new q0,t.initialUser,this.serializer)}Du(t){return new ov($0.Vi,this.serializer)}bu(t){return new K0}terminate(){return T(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),mC=class extends b1{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Xe(this.persistence.referenceDelegate instanceof sv,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new R0(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Nr.withCacheSize(this.cacheSizeBytes):Nr.DEFAULT;return new ov(r=>sv.Vi(r,t),this.serializer)}};var MW=(()=>{class n{initialize(t,r){return T(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Xk(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=AW.bind(null,this.syncEngine),yield mW(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new cC})()}createDatastore(t){let r=Mv(t.databaseInfo.databaseId),i=(function(a){return new X0(a)})(t.databaseInfo);return(function(a,u,d,f){return new rC(a,u,d,f)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,a,u,d){return new oC(i,o,a,u,d)})(this.localStore,this.datastore,t.asyncQueue,r=>Xk(this.syncEngine,r,0),(function(){return cv.C()?new cv:new Z0})())}createSyncEngine(t,r){return(function(o,a,u,d,f,g,y){let E=new fC(o,a,u,d,f,g);return y&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return T(this,null,function*(){var t,r;yield(function(o){return T(this,null,function*(){let a=Se(o);ie(wc,"RemoteStore shutting down."),a.Ia.add(5),yield bf(a),a.Ea.shutdown(),a.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var vf=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):xo("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Gs="FirestoreClient",gC=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=cn.UNAUTHENTICATED,this.clientId=af.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,a=>T(this,null,function*(){ie(Gs,"Received user=",a.uid),yield this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,a=>(ie(Gs,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>T(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=BC(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function BT(n,e){return T(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),ie(Gs,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>T(null,null,function*(){r.isEqual(i)||(yield u1(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Hs("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{ie("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Hs("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function tO(n,e){return T(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield PW(n);ie(Gs,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Qk(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Qk(e.remoteStore,i)),n._onlineComponents=e})}function PW(n){return T(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ie(Gs,"Using user provided OfflineComponentProvider");try{yield BT(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===W.FAILED_PRECONDITION||i.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Hs("Error using user provided cache. Falling back to memory cache: "+t),yield BT(n,new b1)}}else ie(Gs,"Using default OfflineComponentProvider"),yield BT(n,new mC(void 0));return n._offlineComponents})}function T1(n){return T(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(ie(Gs,"Using user provided OnlineComponentProvider"),yield tO(n,n._uninitializedComponentsProvider._online)):(ie(Gs,"Using default OnlineComponentProvider"),yield tO(n,new MW))),n._onlineComponents})}function NW(n){return T1(n).then(e=>e.syncEngine)}function gv(n){return T(this,null,function*(){let e=yield T1(n),t=e.eventManager;return t.onListen=vW.bind(null,e.syncEngine),t.onUnlisten=EW.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=yW.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=IW.bind(null,e.syncEngine),t})}function kW(n,e,t={}){let r=new ti;return n.asyncQueue.enqueueAndForget(()=>T(null,null,function*(){return(function(o,a,u,d,f){let g=new vf({next:E=>{g.Ou(),a.enqueueAndForget(()=>HC(o,y));let b=E.docs.has(u);!b&&E.fromCache?f.reject(new ee(W.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&E.fromCache&&d&&d.source==="server"?f.reject(new ee(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(E)},error:E=>f.reject(E)}),y=new _f(Av(u.path),g,{includeMetadataChanges:!0,ka:!0});return $C(o,y)})(yield gv(n),n.asyncQueue,e,t,r)})),r.promise}function OW(n,e,t={}){let r=new ti;return n.asyncQueue.enqueueAndForget(()=>T(null,null,function*(){return(function(o,a,u,d,f){let g=new vf({next:E=>{g.Ou(),a.enqueueAndForget(()=>HC(o,y)),E.fromCache&&d.source==="server"?f.reject(new ee(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(E)},error:E=>f.reject(E)}),y=new _f(u,g,{includeMetadataChanges:!0,ka:!0});return $C(o,y)})(yield gv(n),n.asyncQueue,e,t,r)})),r.promise}function C1(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var nO=new Map;var D1="firestore.googleapis.com",rO=!0,_v=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=D1,this.ssl=rO}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:rO;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=c1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<K5)throw new ee(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}W6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=C1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ee(W.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ee(W.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ee(W.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Dl=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _v({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _v(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new $T;switch(r.type){case"firstParty":return new WT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ee(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return T(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=nO.get(t);r&&(ie("ComponentProvider","Removing Datastore"),nO.delete(t),r.terminate())})(this),Promise.resolve()}};function S1(n,e,t,r={}){var i;n=Jn(n,Dl);let o=Pi(e),a=n._getSettings(),u=Object.assign(Object.assign({},a),{emulatorOptions:n._getEmulatorOptions()}),d=`${e}:${t}`;o&&(nl(`https://${d}`),rl("Firestore",!0)),a.host!==D1&&a.host!==d&&Hs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let f=Object.assign(Object.assign({},a),{host:d,ssl:o,emulatorOptions:r});if(!Ni(f,u)&&(n._setSettings(f),r.mockUserToken)){let g,y;if(typeof r.mockUserToken=="string")g=r.mockUserToken,y=cn.MOCK_USER;else{g=u_(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new ee(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new cn(E)}n._authCredentials=new HT(new q_(g,y))}}var Ks=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Yt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Us(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(If(t,n._jsonSchema))return new n(e,r||null,new de(wt.fromString(t.referencePath)))}};Yt._jsonSchemaVersion="firestore/documentReference/1.0",Yt._jsonSchema={type:Gt("string",Yt._jsonSchemaVersion),referencePath:Gt("string")};var Us=class n extends Ks{constructor(e,t,r){super(e,t,Av(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Yt(this.firestore,null,new de(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function A1(n,e,...t){if(n=pt(n),dO("collection","path",e),n instanceof Dl){let r=wt.fromString(e,...t);return Ek(r),new Us(n,null,r)}{if(!(n instanceof Yt||n instanceof Us))throw new ee(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(wt.fromString(e,...t));return Ek(r),new Us(n.firestore,null,r)}}function GC(n,e,...t){if(n=pt(n),arguments.length===1&&(e=af.newId()),dO("doc","path",e),n instanceof Dl){let r=wt.fromString(e,...t);return wk(r),new Yt(n,null,new de(r))}{if(!(n instanceof Yt||n instanceof Us))throw new ee(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(wt.fromString(e,...t));return wk(r),new Yt(n.firestore,n instanceof Us?n.converter:null,new de(r))}}var iO="AsyncQueue",vv=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new uv(this,"async_queue_retry"),this.oc=()=>{let r=jT();r&&ie(iO,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=jT();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=jT();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new ti;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return T(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!xl(e))throw e;ie(iO,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,xo("INTERNAL UNHANDLED ERROR: ",oO(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=sC.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&pe(47125,{hc:oO(this.tc)})}verifyOperationInProgress(){}Pc(){return T(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function oO(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function sO(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var ii=class extends Dl{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new vv,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return T(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new vv(e),this._firestoreClient=void 0,yield e}})}};function R1(n,e){let t=typeof n=="object"?n:bo(),r=typeof n=="string"?n:e||Q_,i=Rs(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=c_("firestore");o&&S1(i,...o)}return i}function kv(n){if(n._terminated)throw new ee(W.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||LW(n),n._firestoreClient}function LW(n){var e,t,r;let i=n._freezeSettings(),o=(function(u,d,f,g){return new YT(u,d,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,C1(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new gC(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(u){let d=u?._online.build();return{_offline:u?._offline.build(d),_online:d}})(n._componentsProvider))}var js=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(An.fromBase64String(e))}catch(t){throw new ee(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(An.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(If(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};js._jsonSchemaVersion="firestore/bytes/1.0",js._jsonSchema={type:Gt("string",js._jsonSchemaVersion),bytes:Gt("string")};var Sl=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ee(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var yf=class{constructor(e){this._methodName=e}};var Bs=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ee(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ee(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(If(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Bs._jsonSchemaVersion="firestore/geoPoint/1.0",Bs._jsonSchema={type:Gt("string",Bs._jsonSchemaVersion),latitude:Gt("number"),longitude:Gt("number")};var $s=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(If(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new ee(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};$s._jsonSchemaVersion="firestore/vectorValue/1.0",$s._jsonSchema={type:Gt("string",$s._jsonSchemaVersion),vectorValues:Gt("object")};var FW=/^__.*__$/,_C=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Wi(e,this.data,this.fieldMask,t,this.fieldTransforms):new yc(e,this.data,t,this.fieldTransforms)}},yv=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Wi(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function x1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe(40011,{Ec:n})}}var vC=class n{constructor(e,t,r,i,o,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Ev(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(x1(this.Ec)&&FW.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},yC=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Mv(e)}Dc(e,t,r,i=!1){return new vC({Ec:e,methodName:t,bc:r,path:yr.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ov(n){let e=n._freezeSettings(),t=Mv(n._databaseId);return new yC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function M1(n,e,t,r,i,o={}){let a=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);KC("Data must be an object, but it was:",a,r);let u=P1(r,a),d,f;if(o.merge)d=new kr(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){let g=[];for(let y of o.mergeFields){let E=wC(e,y,t);if(!a.contains(E))throw new ee(W.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);k1(g,E)||g.push(E)}d=new kr(g),f=a.fieldTransforms.filter(y=>d.covers(y.field))}else d=null,f=a.fieldTransforms;return new _C(new vr(u),d,f)}var wv=class n extends yf{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function VW(n,e,t,r){let i=n.Dc(1,e,t);KC("Data must be an object, but it was:",i,r);let o=[],a=vr.empty();Zs(r,(d,f)=>{let g=ZC(e,d,t);f=pt(f);let y=i.gc(g);if(f instanceof wv)o.push(g);else{let E=Cf(f,y);E!=null&&(o.push(g),a.set(g,E))}});let u=new kr(o);return new yv(a,u,i.fieldTransforms)}function UW(n,e,t,r,i,o){let a=n.Dc(1,e,t),u=[wC(e,r,t)],d=[i];if(o.length%2!=0)throw new ee(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)u.push(wC(e,o[E])),d.push(o[E+1]);let f=[],g=vr.empty();for(let E=u.length-1;E>=0;--E)if(!k1(f,u[E])){let b=u[E],N=d[E];N=pt(N);let $=a.gc(b);if(N instanceof wv)f.push(b);else{let F=Cf(N,$);F!=null&&(f.push(b),g.set(b,F))}}let y=new kr(f);return new yv(g,y,a.fieldTransforms)}function jW(n,e,t,r=!1){return Cf(t,n.Dc(r?4:3,e))}function Cf(n,e){if(N1(n=pt(n)))return KC("Unsupported field value:",e,n),P1(n,e);if(n instanceof yf)return(function(r,i){if(!x1(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],a=0;for(let u of r){let d=Cf(u,i.yc(a));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),a++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=pt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return b5(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Kt.fromDate(r);return{timestampValue:rv(i.serializer,o)}}if(r instanceof Kt){let o=new Kt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:rv(i.serializer,o)}}if(r instanceof Bs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof js)return{bytesValue:t1(i.serializer,r._byteString)};if(r instanceof Yt){let o=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw i.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:OC(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof $s)return(function(a,u){return{mapValue:{fields:{[RC]:{stringValue:xC},[_l]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw u.wc("VectorValues must only contain numeric values.");return kC(u.serializer,f)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${Cv(r)}`)})(n,e)}function P1(n,e){let t={};return SO(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zs(n,(r,i)=>{let o=Cf(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function N1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Kt||n instanceof Bs||n instanceof js||n instanceof Yt||n instanceof yf||n instanceof $s)}function KC(n,e,t){if(!N1(t)||!hO(t)){let r=Cv(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function wC(n,e,t){if((e=pt(e))instanceof Sl)return e._internalPath;if(typeof e=="string")return ZC(n,e);throw Ev("Field path arguments must be of type string or ",n,!1,void 0,t)}var BW=new RegExp("[~\\*/\\[\\]]");function ZC(n,e,t){if(e.search(BW)>=0)throw Ev(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Sl(...e.split("."))._internalPath}catch{throw Ev(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ev(n,e,t,r,i){let o=r&&!r.isEmpty(),a=i!==void 0,u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||a)&&(d+=" (found",o&&(d+=` in field ${r}`),a&&(d+=` in document ${i}`),d+=")"),new ee(W.INVALID_ARGUMENT,u+n+d)}function k1(n,e){return n.some(t=>t.isEqual(e))}var Iv=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new EC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Lv("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},EC=class extends Iv{data(){return super.data()}};function Lv(n,e){return typeof e=="string"?ZC(n,e):e instanceof Sl?e._internalPath:e._delegate._internalPath}function O1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ee(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var wf=class{},bv=class extends wf{};function L1(n,e,...t){let r=[];e instanceof wf&&r.push(e),r=r.concat(t),(function(o){let a=o.filter(d=>d instanceof IC).length,u=o.filter(d=>d instanceof Tv).length;if(a>1||a>0&&u>0)throw new ee(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var Tv=class n extends bv{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return U1(e._query,t),new Ks(e.firestore,e.converter,l0(e._query,t))}_parse(e){let t=Ov(e.firestore);return(function(o,a,u,d,f,g,y){let E;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ee(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){cO(y,g);let N=[];for(let $ of y)N.push(aO(d,o,$));E={arrayValue:{values:N}}}else E=aO(d,o,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||cO(y,g),E=jW(u,a,y,g==="in"||g==="not-in");return Wt.create(f,g,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function F1(n,e,t){let r=e,i=Lv("where",n);return Tv._create(i,r,t)}var IC=class n extends wf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ri.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let a=i,u=o.getFlattenedFilters();for(let d of u)U1(a,d),a=l0(a,d)})(e._query,t),new Ks(e.firestore,e.converter,l0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var bC=class n extends bv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,o,a){if(i.startAt!==null)throw new ee(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ee(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new gc(o,a)})(e._query,this._field,this._direction);return new Ks(e.firestore,e.converter,(function(i,o){let a=i.explicitOrderBy.concat([o]);return new qs(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function V1(n,e="asc"){let t=e,r=Lv("orderBy",n);return bC._create(r,t)}function aO(n,e,t){if(typeof(t=pt(t))=="string"){if(t==="")throw new ee(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BO(e)&&t.indexOf("/")!==-1)throw new ee(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(wt.fromString(t));if(!de.isDocumentKey(r))throw new ee(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ak(n,new de(r))}if(t instanceof Yt)return Ak(n,t._key);throw new ee(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cv(t)}.`)}function cO(n,e){if(!Array.isArray(n)||n.length===0)throw new ee(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function U1(n,e){let t=(function(i,o){for(let a of i)for(let u of a.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ee(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var TC=class{convertValue(e,t="none"){switch(zs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Po(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw pe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Zs(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[_l].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>yt(a.doubleValue));return new $s(o)}convertGeoPoint(e){return new Bs(yt(e.latitude),yt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Sv(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(lf(e));default:return null}}convertTimestamp(e){let t=Mo(e);return new Kt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=wt.fromString(e);Xe(a1(r),9688,{name:e});let i=new Y_(r.get(1),r.get(3)),o=new de(r.popFirst(5));return i.isEqual(t)||xo(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function j1(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var dc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},hc=class n extends Iv{constructor(e,t,r,i,o,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ml(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Lv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};hc._jsonSchemaVersion="firestore/documentSnapshot/1.0",hc._jsonSchema={type:Gt("string",hc._jsonSchemaVersion),bundleSource:Gt("string","DocumentSnapshot"),bundleName:Gt("string"),bundle:Gt("string")};var ml=class extends hc{data(e={}){return super.data(e)}},fc=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new dc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ml(this._firestore,this._userDataWriter,r.key,r,new dc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ee(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(u=>{let d=new ml(i._firestore,i._userDataWriter,u.doc.key,u.doc,new dc(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{let d=new ml(i._firestore,i._userDataWriter,u.doc.key,u.doc,new dc(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter),f=-1,g=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),g=a.indexOf(u.doc.key)),{type:$W(u.type),doc:d,oldIndex:f,newIndex:g}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=af.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function $W(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe(61501,{type:n})}}function B1(n){n=Jn(n,Yt);let e=Jn(n.firestore,ii);return kW(kv(e),n._key).then(t=>G1(e,n,t))}fc._jsonSchemaVersion="firestore/querySnapshot/1.0",fc._jsonSchema={type:Gt("string",fc._jsonSchemaVersion),bundleSource:Gt("string","QuerySnapshot"),bundleName:Gt("string"),bundle:Gt("string")};var Ef=class extends TC{constructor(e){super(),this.firestore=e}convertBytes(e){return new js(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yt(this.firestore,null,t)}};function $1(n){n=Jn(n,Ks);let e=Jn(n.firestore,ii),t=kv(e),r=new Ef(e);return O1(n._query),OW(t,n._query).then(i=>new fc(e,r,n,i))}function H1(n,e,t){n=Jn(n,Yt);let r=Jn(n.firestore,ii),i=j1(n.converter,e,t);return Fv(r,[M1(Ov(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Hi.none())])}function z1(n,e,t,...r){n=Jn(n,Yt);let i=Jn(n.firestore,ii),o=Ov(i),a;return a=typeof(e=pt(e))=="string"||e instanceof Sl?UW(o,"updateDoc",n._key,e,t,r):VW(o,"updateDoc",n._key,e),Fv(i,[a.toMutation(n._key,Hi.exists(!0))])}function q1(n){return Fv(Jn(n.firestore,ii),[new hf(n._key,Hi.none())])}function W1(n,e){let t=Jn(n.firestore,ii),r=GC(n),i=j1(n.converter,e);return Fv(t,[M1(Ov(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Hi.exists(!1))]).then(()=>r)}function QC(n,...e){var t,r,i;n=pt(n);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||sO(e[a])||(o=e[a++]);let u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(sO(e[a])){let y=e[a];e[a]=(t=y.next)===null||t===void 0?void 0:t.bind(y),e[a+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[a+2]=(i=y.complete)===null||i===void 0?void 0:i.bind(y)}let d,f,g;if(n instanceof Yt)f=Jn(n.firestore,ii),g=Av(n._key.path),d={next:y=>{e[a]&&e[a](G1(f,n,y))},error:e[a+1],complete:e[a+2]};else{let y=Jn(n,Ks);f=Jn(y.firestore,ii),g=y._query;let E=new Ef(f);d={next:b=>{e[a]&&e[a](new fc(f,E,y,b))},error:e[a+1],complete:e[a+2]},O1(n._query)}return(function(E,b,N,$){let F=new vf($),q=new _f(b,F,N);return E.asyncQueue.enqueueAndForget(()=>T(null,null,function*(){return $C(yield gv(E),q)})),()=>{F.Ou(),E.asyncQueue.enqueueAndForget(()=>T(null,null,function*(){return HC(yield gv(E),q)}))}})(kv(f),g,u,d)}function Fv(n,e){return(function(r,i){let o=new ti;return r.asyncQueue.enqueueAndForget(()=>T(null,null,function*(){return bW(yield NW(r),i,o)})),o.promise})(kv(n),e)}function G1(n,e,t){let r=t.docs.get(e._key),i=new Ef(n);return new hc(n,i,e._key,r,new dc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Al=i})(Li),_r(new yn("firestore",(r,{instanceIdentifier:i,options:o})=>{let a=r.getProvider("app").getImmediate(),u=new ii(new zT(r.getProvider("auth-internal")),new GT(a,r.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ee(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Y_(f.options.projectId,g)})(a,i),a);return o=Object.assign({useFetchStreams:t},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),at(gk,_k,e),at(gk,_k,"esm2017")})();var Vv=function(){return Vv=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Vv.apply(this,arguments)};var qW={includeMetadataChanges:!1};function K1(n,e){return e===void 0&&(e=qW),new be(function(t){var r=QC(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function Z1(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Vv(Vv({},r),(t={},t[e.idField]=n.id,t))}function Q1(n){return K1(n,{includeMetadataChanges:!0}).pipe(Te(function(e){return e.docs}))}function Y1(n,e){return e===void 0&&(e={}),Q1(n).pipe(Te(function(t){return t.map(function(r){return Z1(r,e)})}))}var Un=class{constructor(e){return e}},J1="firestore",YC=class{constructor(){return xs(J1)}};var JC=new J("angularfire2.firestore-instances");function WW(n,e){let t=nc(J1,n,e);return t&&new Un(t)}function GW(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Un(r)}}var KW={provide:YC,deps:[[new on,JC]]},ZW={provide:Un,useFactory:WW,deps:[[new on,JC],Xr]};function X1(n,...e){return at("angularfire",Fi.full,"fst"),Nn([ZW,KW,{provide:JC,useFactory:GW(n),multi:!0,deps:[Ge,_t,Vi,To,[new on,ac],[new on,Ps],...e]}])}var Df=dt(Y1,!0);var Pl=dt(W1,!0,2);var oi=dt(A1,!0,2);var Sf=dt(q1,!0,2);var Xn=dt(GC,!0,2);var Uv=dt(B1,!0);var XC=dt($1,!0);var eL=dt(R1,!0);var jv=dt(V1,!0,2),Qs=dt(L1,!0,2);var Nl=dt(H1,!0,2);var eD=dt(z1,!0,2);var tD=dt(F1,!0,2);var Gi=class n{auth=B(Ut);firestore=B(Un);constructor(){}registerUser(e,t,r){return T(this,null,function*(){let o=(yield O_(this.auth,e,t)).user.uid;return yield Nl(Xn(this.firestore,"users",o),r),o})}login(e,t){return T(this,null,function*(){return yield hk(this.auth,N_),fk(this.auth,e,t)})}getUserRole(e){return T(this,null,function*(){let t=Xn(this.firestore,"users",e),r=yield Uv(t);return r.exists()?r.data().role:null})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})};function QW(n,e){if(n&1&&(z(0,"div",16),K(1),H()),n&2){let t=Be();X(),St(" ",t.error()," ")}}var Hv=class n{constructor(e,t,r){this.authService=e;this.auth=t;this.router=r}email=Ct("");password=Ct("");error=Ct("");login(){return T(this,null,function*(){try{let t=(yield this.authService.login(this.email(),this.password())).user,r=yield this.authService.getUserRole(t.uid);r==="commuter"?this.router.navigate(["/commuter/dashboard"]):r==="driver"?this.router.navigate(["/driver/dashboard"]):r==="admin"?this.router.navigate(["/admin/dashboard"]):this.error.set("Invalid role assigned.")}catch(e){this.error.set(e.message)}})}static \u0275fac=function(t){return new(t||n)(ue(Gi),ue(Ut),ue(Mt))};static \u0275cmp=Lt({type:n,selectors:[["app-login"]],decls:24,vars:3,consts:[[1,"login-background","d-flex","justify-content-center","align-items-center","min-vh-100"],[1,"card","p-4","rounded-4","shadow","login-card"],[1,"text-center","mb-4"],[1,"logo-placeholder-bg","mb-3"],[1,"fw-bold","text-orange"],[1,"text-muted"],["class","alert alert-danger",4,"ngIf"],[1,"form-floating","mb-3"],["type","email","id","email","placeholder","Email",1,"form-control",3,"ngModelChange","keydown.enter","ngModel"],["for","email"],[1,"form-floating","mb-4"],["type","password","id","password","placeholder","Password",1,"form-control",3,"ngModelChange","keydown.enter","ngModel"],["for","password"],[1,"btn","btn-orange","w-100","py-2","mb-3",3,"click"],[1,"text-center"],["routerLink","/signup",1,"text-orange","fw-bold"],[1,"alert","alert-danger"]],template:function(t,r){t&1&&(z(0,"div",0)(1,"div",1)(2,"div",2),vn(3,"div",3),z(4,"h2",4),K(5,"Welcome Back"),H(),z(6,"p",5),K(7,"Login to your account"),H()(),On(8,QW,2,1,"div",6),z(9,"div",7)(10,"input",8),it("ngModelChange",function(o){return st(r.email,o)||(r.email=o),o}),_e("keydown.enter",function(){return r.login()}),H(),z(11,"label",9),K(12,"Email"),H()(),z(13,"div",10)(14,"input",11),it("ngModelChange",function(o){return st(r.password,o)||(r.password=o),o}),_e("keydown.enter",function(){return r.login()}),H(),z(15,"label",12),K(16,"Password"),H()(),z(17,"button",13),_e("click",function(){return r.login()}),K(18," Login "),H(),z(19,"div",14)(20,"span"),K(21,"Don't have an account? "),H(),z(22,"a",15),K(23,"Create an account"),H()()()()),t&2&&(X(8),Ft("ngIf",r.error()),X(2),rt("ngModel",r.email),X(4),rt("ngModel",r.password))},dependencies:[Cn,za,Yn,Qn,Pr,gr,Mi],styles:['.login-background[_ngcontent-%COMP%]{position:relative;background-image:url("./media/aurora-N2MJOCCX.jpg");background-size:cover;background-position:center;width:100%;min-height:100vh;display:flex;justify-content:center;align-items:center}.login-background[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-color:#ffffffb3;z-index:1}.login-card[_ngcontent-%COMP%]{position:relative;z-index:2;max-width:400px;width:100%;background:#fff;border-radius:1rem;border:2px solid #FF4500;box-shadow:0 10px 25px #ff660026;padding:2rem;overflow:hidden}.login-card[_ngcontent-%COMP%]:before, .login-card[_ngcontent-%COMP%]:after{content:"";position:absolute;border-radius:50%;opacity:.1}.login-card[_ngcontent-%COMP%]:before{width:120px;height:120px;background-color:#ff4500;top:-40px;right:-40px}.login-card[_ngcontent-%COMP%]:after{width:80px;height:80px;background-color:#ff4500;bottom:-20px;left:-20px}.text-orange[_ngcontent-%COMP%]{color:#ff4500!important}.btn-orange[_ngcontent-%COMP%]{background-color:#ff4500!important;color:#fff!important;border:2px solid #FF4500!important;font-weight:600;border-radius:50px;transition:transform .2s,box-shadow .2s}.btn-orange[_ngcontent-%COMP%]:hover{background-color:#e65c00!important;border-color:#e65c00!important;transform:translateY(-2px);box-shadow:0 6px 12px #f606}.form-control[_ngcontent-%COMP%]:focus{border-color:#ff4500;box-shadow:0 0 0 .2rem #f603}.logo-placeholder-bg[_ngcontent-%COMP%]{width:100px;height:100px;margin:0 auto;border-radius:50%;border:3px solid #FF4500;background:#fff url("./media/logo-IKMKXBN4.png") no-repeat center center;background-size:70%;box-shadow:0 4px 12px #0003;transition:transform .3s}.logo-placeholder-bg[_ngcontent-%COMP%]:hover{transform:scale(1.05)}@media (max-width: 576px){.login-card[_ngcontent-%COMP%]{padding:1.5rem 1rem}}@media (max-width: 576px){.logo-placeholder-bg[_ngcontent-%COMP%]{width:80px;height:80px}}']})};var zv=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Lt({type:n,selectors:[["app-signup-choice"]],decls:13,vars:0,consts:[[1,"signup-bg","d-flex","justify-content-center","align-items-center","min-vh-100"],[1,"signup-card","p-4","rounded-4","shadow"],[1,"text-center","mb-4"],[1,"signup-logo","mb-3"],[1,"fw-bold","text-orange"],[1,"text-muted"],["routerLink","/signup/commuter",1,"btn","btn-orange","w-100","py-2","mb-3"],[1,"text-center","mt-3"],["routerLink","/login",1,"text-orange","fw-semibold"]],template:function(t,r){t&1&&(z(0,"div",0)(1,"div",1)(2,"div",2),vn(3,"div",3),z(4,"h2",4),K(5,"Create an Account"),H(),z(6,"p",5),K(7,"Choose your account type to continue"),H()(),z(8,"button",6),K(9," I am a Commuter "),H(),z(10,"div",7)(11,"a",8),K(12,"Back to Login"),H()()()())},dependencies:[Cn,Mi],styles:['.signup-bg[_ngcontent-%COMP%]{background-image:url("./media/aurora-N2MJOCCX.jpg");background-size:cover;background-position:center;position:relative}.signup-bg[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-color:#ffffffbf;z-index:1}.signup-card[_ngcontent-%COMP%]{position:relative;z-index:2;max-width:400px;width:100%;background:#fff;border-radius:1rem;border:2px solid #FF4500;box-shadow:0 10px 25px #ff660026;padding:2rem;overflow:hidden}.signup-card[_ngcontent-%COMP%]:before, .signup-card[_ngcontent-%COMP%]:after{content:"";position:absolute;border-radius:50%;opacity:.1}.signup-card[_ngcontent-%COMP%]:before{width:120px;height:120px;background-color:#ff4500;top:-40px;right:-40px}.signup-card[_ngcontent-%COMP%]:after{width:80px;height:80px;background-color:#ff4500;bottom:-20px;left:-20px}.text-orange[_ngcontent-%COMP%]{color:#ff4500!important}.btn-orange[_ngcontent-%COMP%]{background-color:#ff4500!important;color:#fff!important;border:2px solid #FF4500!important;font-weight:600;border-radius:50px;transition:transform .2s,box-shadow .2s}.btn-orange[_ngcontent-%COMP%]:hover{background-color:#e65c00!important;border-color:#e65c00!important;transform:translateY(-2px);box-shadow:0 6px 12px #f606}.signup-logo[_ngcontent-%COMP%]{width:100px;height:100px;margin:0 auto;border-radius:50%;border:3px solid #FF4500;background:#fff url("./media/logo-IKMKXBN4.png") no-repeat center center;background-size:70%;box-shadow:0 4px 12px #0003;transition:transform .3s}.signup-logo[_ngcontent-%COMP%]:hover{transform:scale(1.05)}@media (max-width: 576px){.signup-card[_ngcontent-%COMP%]{padding:1.5rem 1rem}.signup-logo[_ngcontent-%COMP%]{width:80px;height:80px}}']})};var qv=class n{constructor(e,t){this.authService=e;this.router=t}name=Ct("");email=Ct("");password=Ct("");register(){return T(this,null,function*(){try{console.log("Creating commuter account...");let e={name:this.name(),email:this.email(),role:"commuter",createdAt:new Date},t=yield this.authService.registerUser(this.email(),this.password(),e);console.log("User created with ID:",t),alert("Account created successfully!"),this.router.navigate(["/login"])}catch(e){console.error("SIGNUP ERROR:",e),alert("Error: "+e.message)}})}static \u0275fac=function(t){return new(t||n)(ue(Gi),ue(Mt))};static \u0275cmp=Lt({type:n,selectors:[["app-commuter-signup"]],decls:12,vars:3,consts:[[1,"signup-background"],[1,"signup-card"],[1,"logo-placeholder","mb-3"],[1,"text-orange","text-center","mb-2"],[1,"text-center","mb-4"],["type","text","placeholder","Full Name",1,"form-control","mb-3",3,"input","value"],["type","email","placeholder","Email",1,"form-control","mb-3",3,"input","value"],["type","password","placeholder","Password",1,"form-control","mb-4",3,"input","value"],[1,"btn-orange","w-100",3,"click"]],template:function(t,r){t&1&&(Kr(0,"div",0)(1,"div",1),tg(2,"div",2),Kr(3,"h2",3),K(4,"Commuter Signup"),Ti(),Kr(5,"p",4),K(6,"Create your commuter account"),Ti(),Kr(7,"input",5),$a("input",function(o){return r.name.set(o.target.value)}),Ti(),Kr(8,"input",6),$a("input",function(o){return r.email.set(o.target.value)}),Ti(),Kr(9,"input",7),$a("input",function(o){return r.password.set(o.target.value)}),Ti(),Kr(10,"button",8),$a("click",function(){return r.register()}),K(11," Create Account "),Ti()()()),t&2&&(X(7),Pu("value",r.name()),X(),Pu("value",r.email()),X(),Pu("value",r.password()))},dependencies:[Cn,Yn],styles:['.signup-background[_ngcontent-%COMP%]{position:relative;background-image:url("./media/aurora-N2MJOCCX.jpg");background-size:cover;background-position:center;width:100%;min-height:100vh;display:flex;justify-content:center;align-items:center}.signup-background[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background-color:#ffffffb3;z-index:1}.signup-card[_ngcontent-%COMP%]{position:relative;z-index:2;width:100%;max-width:400px;background:#fff;border-radius:1rem;border:2px solid #FF4500;padding:2rem;box-shadow:0 10px 25px #ff660026}.logo-placeholder[_ngcontent-%COMP%]{width:100px;height:100px;margin:0 auto;border-radius:50%;border:3px solid #FF4500;background:#fff url("./media/logo-IKMKXBN4.png") no-repeat center center;background-size:70%;box-shadow:0 4px 12px #0003;transition:transform .3s}.logo-placeholder[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.text-orange[_ngcontent-%COMP%]{color:#ff4500!important}.form-control[_ngcontent-%COMP%]{border-radius:50px;padding:12px}.form-control[_ngcontent-%COMP%]:focus{border-color:#ff4500;box-shadow:0 0 0 .2rem #f603}.btn-orange[_ngcontent-%COMP%]{background-color:#ff4500!important;color:#fff!important;border:2px solid #FF4500!important;font-weight:600;border-radius:50px;padding:12px;transition:.2s}.btn-orange[_ngcontent-%COMP%]:hover{background-color:#e65c00!important;border-color:#e65c00!important;transform:translateY(-2px);box-shadow:0 6px 12px #f606}@media (max-width: 576px){.signup-card[_ngcontent-%COMP%]{padding:1.5rem 1rem}}']})};var Wv=class n{constructor(e,t){this.authService=e;this.router=t}email="";password="";loading=!1;message="";createAdmin(){return T(this,null,function*(){this.loading=!0,this.message="";try{let e={role:"admin",email:this.email,createdAt:new Date};yield this.authService.registerUser(this.email,this.password,e),this.message="Admin account created successfully! Redirecting...",setTimeout(()=>{this.router.navigate(["/admin/dashboard"])},1500)}catch(e){this.message=e.message}this.loading=!1})}static \u0275fac=function(t){return new(t||n)(ue(Gi),ue(Mt))};static \u0275cmp=Lt({type:n,selectors:[["app-admin-setup"]],decls:14,vars:5,consts:[[1,"container"],[3,"ngSubmit"],["type","email","name","email","required","",3,"ngModelChange","ngModel"],["type","password","name","password","required","",3,"ngModelChange","ngModel"],["type","submit",3,"disabled"],[1,"msg"]],template:function(t,r){t&1&&(z(0,"div",0)(1,"h2"),K(2,"Create Admin Account"),H(),z(3,"form",1),_e("ngSubmit",function(){return r.createAdmin()}),z(4,"label"),K(5,"Email"),H(),z(6,"input",2),it("ngModelChange",function(o){return st(r.email,o)||(r.email=o),o}),H(),z(7,"label"),K(8,"Password"),H(),z(9,"input",3),it("ngModelChange",function(o){return st(r.password,o)||(r.password=o),o}),H(),z(10,"button",4),K(11),H()(),z(12,"p",5),K(13),H()()),t&2&&(X(6),rt("ngModel",r.email),X(3),rt("ngModel",r.password),X(),Ft("disabled",r.loading),X(),St(" ",r.loading?"Creating...":"Create Admin"," "),X(2),Ln(r.message))},dependencies:[Yn,SP,Qn,Pr,EP,fb,gr,ab],styles:[".container[_ngcontent-%COMP%]{max-width:400px;margin:60px auto;padding:20px;background:#fff;border-radius:12px;box-shadow:0 2px 10px #0000001a}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{width:100%;padding:12px;margin:8px 0}button[_ngcontent-%COMP%]{background:#06f;border:none;color:#fff;cursor:pointer;border-radius:8px}button[_ngcontent-%COMP%]:disabled{opacity:.7}.msg[_ngcontent-%COMP%]{text-align:center;margin-top:10px;color:#333}"]})};var Bn=FD(nD());var j=FD(nD(),1);function jn(n,e){return Object.assign(e,n.geocodingQueryParams)}function er(n,e){return Object.assign(e,n.reverseQueryParams)}var YW=/[&<>"'`]/g,JW=/[&<>"'`]/,XW={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};function eG(n){return XW[n]}function tG(n){return n==null?"":n?(n=""+n,JW.test(n)?n.replace(YW,eG):n):n+""}function ct(n,e){let t={Accept:"application/json"},r=new URL(n);return Object.entries(e).forEach(([i,o])=>{(Array.isArray(o)?o:[o]).forEach(a=>{r.searchParams.append(i,a)})}),fetch(r.toString(),{headers:t}).then(i=>i.json())}function nG(n,e){return n.replace(/\{ *([\w_]+) *\}/g,(t,r)=>{let i=e[r];return i===void 0?i="":typeof i=="function"&&(i=i(e)),tG(i)})}var Kv=class{options={serviceUrl:"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer",apiKey:""};constructor(e){j.Util.setOptions(this,e)}geocode(e){return T(this,null,function*(){let t=jn(this.options,{token:this.options.apiKey,SingleLine:e,outFields:"Addr_Type",forStorage:!1,maxLocations:10,f:"json"});return(yield ct(this.options.serviceUrl+"/findAddressCandidates",t)).candidates.map(r=>{let i=new j.LatLng(r.location.y,r.location.x),o=new j.LatLngBounds(new j.LatLng(r.extent.ymax,r.extent.xmax),new j.LatLng(r.extent.ymin,r.extent.xmin));return{name:r.address,bbox:o,center:i}})})}suggest(e){return this.geocode(e)}reverse(e,t){return T(this,null,function*(){let r=er(this.options,{location:e.lng+","+e.lat,distance:100,f:"json"}),i=yield ct(this.options.serviceUrl+"/reverseGeocode",r);if(!i||i.error)return[];let o=new j.LatLng(i.location.y,i.location.x),a=new j.LatLngBounds(o,o);return[{name:i.address.Match_addr,center:o,bbox:a}]})}};function rG(n){return new Kv(n)}var Zv=class{options={serviceUrl:"https://dev.virtualearth.net/REST/v1/Locations/"};constructor(e){j.Util.setOptions(this,e)}geocode(e){return T(this,null,function*(){let t=jn(this.options,{query:e,key:this.options.apiKey}),r=yield ct(this.options.serviceUrl,t);return this._parseResults(r)})}reverse(e,t){return T(this,null,function*(){let r=er(this.options,{key:this.options.apiKey}),i=yield ct(this.options.serviceUrl+e.lat+","+e.lng,r);return this._parseResults(i)})}_parseResults(e){return e.resourceSets[0].resources.map(t=>{let r=t.bbox;return{name:t.name,bbox:new j.LatLngBounds([r[0],r[1]],[r[2],r[3]]),center:new j.LatLng(...t.point.coordinates)}})}};function iG(n){return new Zv(n)}var Qv=class{options={apiKey:"",serviceUrl:"https://atlas.microsoft.com/search"};constructor(e){if(j.Util.setOptions(this,e),!this.options.apiKey)throw new Error("Azure Maps Geocoder requires an API key.")}geocode(e){return T(this,null,function*(){let t={"api-version":"1.0",query:e,"subscription-key":this.options.apiKey},r=this.options.serviceUrl+"/address/json";return((yield ct(r,t)).results||[]).map(i=>({name:i.address.freeformAddress,bbox:new j.LatLngBounds([i.viewport.topLeftPoint.lat,i.viewport.topLeftPoint.lon],[i.viewport.btmRightPoint.lat,i.viewport.btmRightPoint.lon]),center:new j.LatLng(i.position.lat,i.position.lon)}))})}reverse(e,t){return T(this,null,function*(){let r={"api-version":"1.0",query:e.lat+","+e.lng,"subscription-key":this.options.apiKey},i=this.options.serviceUrl+"/address/reverse/json";return((yield ct(i,r)).addresses||[]).map(o=>({name:o.address.freeformAddress,bbox:new j.LatLngBounds([o.viewport.topLeftPoint.lat,o.viewport.topLeftPoint.lon],[o.viewport.btmRightPoint.lat,o.viewport.btmRightPoint.lon]),center:new j.LatLng(e.lat,e.lng)}))})}};function oG(n){return new Qv(n)}var Yv=class{options={serviceUrl:"https://maps.googleapis.com/maps/api/geocode/json"};constructor(e){j.Util.setOptions(this,e)}geocode(e){return T(this,null,function*(){let t=jn(this.options,{key:this.options.apiKey,address:e}),r=yield ct(this.options.serviceUrl,t);return this._parseResults(r)})}reverse(e,t){return T(this,null,function*(){let r=er(this.options,{key:this.options.apiKey,latlng:e.lat+","+e.lng}),i=yield ct(this.options.serviceUrl,r);return this._parseResults(i)})}_parseResults(e){return(e.results||[])?.map(t=>{let r=new j.LatLng(t.geometry.location.lat,t.geometry.location.lng),i=new j.LatLngBounds(new j.LatLng(t.geometry.viewport.northeast.lat,t.geometry.viewport.northeast.lng),new j.LatLng(t.geometry.viewport.southwest.lat,t.geometry.viewport.southwest.lng));return{name:t.formatted_address,bbox:i,center:r,properties:t.address_components}})}};function sG(n){return new Yv(n)}var Jv=class{options={serviceUrl:"https://geocoder.api.here.com/6.2/",app_id:"",app_code:"",apiKey:"",maxResults:5};constructor(e){if(j.Util.setOptions(this,e),e?.apiKey)throw Error("apiKey is not supported, use app_id/app_code instead!")}geocode(e){let t=jn(this.options,{searchtext:e,gen:9,app_id:this.options.app_id,app_code:this.options.app_code,jsonattributes:1,maxresults:this.options.maxResults});return this.getJSON(this.options.serviceUrl+"geocode.json",t)}reverse(e,t){let r=e.lat+","+e.lng;this.options.reverseGeocodeProxRadius&&(r+=","+this.options.reverseGeocodeProxRadius);let i=er(this.options,{prox:r,mode:"retrieveAddresses",app_id:this.options.app_id,app_code:this.options.app_code,gen:9,jsonattributes:1,maxresults:this.options.maxResults});return this.getJSON(this.options.serviceUrl+"reversegeocode.json",i)}getJSON(e,t){return T(this,null,function*(){return((yield ct(e,t)).response.view?.[0]?.result||[]).map(r=>{let i=r.location,o=new j.LatLng(i.displayPosition.latitude,i.displayPosition.longitude),a=new j.LatLngBounds(new j.LatLng(i.mapView.topLeft.latitude,i.mapView.topLeft.longitude),new j.LatLng(i.mapView.bottomRight.latitude,i.mapView.bottomRight.longitude));return{name:i.address.label,properties:i.address,bbox:a,center:o}})})}},Xv=class{options={serviceUrl:"https://geocode.search.hereapi.com/v1",apiKey:"",app_id:"",app_code:"",maxResults:10};constructor(e){j.Util.setOptions(this,e)}geocode(e){let t=jn(this.options,{q:e,apiKey:this.options.apiKey,limit:this.options.maxResults});if(!t.at&&!t.in)throw Error("at / in parameters not found. Please define coordinates (at=latitude,longitude) or other (in) in your geocodingQueryParams.");return this.getJSON(this.options.serviceUrl+"/discover",t)}reverse(e,t){let r=er(this.options,{at:e.lat+","+e.lng,limit:this.options.reverseGeocodeProxRadius,apiKey:this.options.apiKey});return this.getJSON(this.options.serviceUrl+"/revgeocode",r)}getJSON(e,t){return T(this,null,function*(){return((yield ct(e,t)).items||[]).map(r=>{let i=new j.LatLng(r.position.lat,r.position.lng),o;return r.mapView?o=new j.LatLngBounds(new j.LatLng(r.mapView.south,r.mapView.west),new j.LatLng(r.mapView.north,r.mapView.east)):o=new j.LatLngBounds(new j.LatLng(r.position.lat,r.position.lng),new j.LatLng(r.position.lat,r.position.lng)),{name:r.address.label,properties:r.address,bbox:o,center:i}})})}};function aG(n){return n?.apiKey?new Xv(n):new Jv(n)}function nL(n){let e;if(e=n.match(/^([NS])\s*(\d{1,3}(?:\.\d*)?)\W*([EW])\s*(\d{1,3}(?:\.\d*)?)$/))return new j.LatLng((/N/i.test(e[1])?1:-1)*+e[2],(/E/i.test(e[3])?1:-1)*+e[4]);if(e=n.match(/^(\d{1,3}(?:\.\d*)?)\s*([NS])\W*(\d{1,3}(?:\.\d*)?)\s*([EW])$/))return new j.LatLng((/N/i.test(e[2])?1:-1)*+e[1],(/E/i.test(e[4])?1:-1)*+e[3]);if(e=n.match(/^([NS])\s*(\d{1,3})?\s*(\d{1,3}(?:\.\d*)?)?[']?\W*([EW])\s*(\d{1,3})?\s*(\d{1,3}(?:\.\d*)?)?[']?$/))return new j.LatLng((/N/i.test(e[1])?1:-1)*(+e[2]+ +e[3]/60),(/E/i.test(e[4])?1:-1)*(+e[5]+ +e[6]/60));if(e=n.match(/^(\d{1,3})?\s*(\d{1,3}(?:\.\d*)?)?[']?\s*([NS])\W*(\d{1,3})?\s*(\d{1,3}(?:\.\d*)?)?[']?\s*([EW])$/))return new j.LatLng((/N/i.test(e[3])?1:-1)*(+e[1]+ +e[2]/60),(/E/i.test(e[6])?1:-1)*(+e[4]+ +e[5]/60));if(e=n.match(/^([NS])\s*(\d{1,3})?\s*(\d{1,2})[']?\s*(\d{1,3}(?:\.\d*)?)?["]?\W*([EW])\s*(\d{1,3})?\s*(\d{1,2})[']?\s*(\d{1,3}(?:\.\d*)?)?["]?$/))return new j.LatLng((/N/i.test(e[1])?1:-1)*(+e[2]+ +e[3]/60+ +e[4]/3600),(/E/i.test(e[5])?1:-1)*(+e[6]+ +e[7]/60+ +e[8]/3600));if(e=n.match(/^(\d{1,3})?\s*(\d{1,2})[']?\s*(\d{1,3}(?:\.\d*)?)?["]\s*([NS])\W*(\d{1,3})?\s*(\d{1,2})[']?\s*(\d{1,3}(?:\.\d*)?)?["]?\s*([EW])$/))return new j.LatLng((/N/i.test(e[4])?1:-1)*(+e[1]+ +e[2]/60+ +e[3]/3600),(/E/i.test(e[8])?1:-1)*(+e[5]+ +e[6]/60+ +e[7]/3600));if(e=n.match(/^\s*([+-]?\d+(?:\.\d*)?)\s*[\s,]\s*([+-]?\d+(?:\.\d*)?)\s*$/))return new j.LatLng(+e[1],+e[2])}var ey=class{options={next:void 0,sizeInMeters:1e4};constructor(e){j.Util.setOptions(this,e)}geocode(e){return T(this,null,function*(){let t=nL(e);return t?[{name:e,center:t,bbox:t.toBounds(this.options.sizeInMeters)}]:this.options.next?this.options.next.geocode(e):[]})}};function cG(n){return new ey(n)}var ty=class{options={serviceUrl:"https://api.mapbox.com/geocoding/v5/mapbox.places/"};constructor(e){j.Util.setOptions(this,e)}_getProperties(e){let t={text:e.text,address:e.address};return(e.context||[]).forEach(r=>{let i=r.id.split(".")[0];t[i]=r.text,r.short_code&&(t.countryShortCode=r.short_code)}),t}geocode(e){return T(this,null,function*(){let t=this.options.serviceUrl+encodeURIComponent(e)+".json",r=jn(this.options,{access_token:this.options.apiKey});r.proximity!==void 0&&r.proximity.lat!==void 0&&r.proximity.lng!==void 0&&(r.proximity=r.proximity.lng+","+r.proximity.lat);let i=yield ct(t,r);return this._parseResults(i)})}suggest(e){return this.geocode(e)}reverse(e,t){return T(this,null,function*(){let r=this.options.serviceUrl+e.lng+","+e.lat+".json",i=er(this.options,{access_token:this.options.apiKey}),o=yield ct(r,i);return this._parseResults(o)})}_parseResults(e){return e.features?.length?e.features.map(t=>{let r=new j.LatLng(...t.center.reverse()),i;return t.bbox?i=new j.LatLngBounds(new j.LatLng(...t.bbox.slice(0,2).reverse()),new j.LatLng(...t.bbox.slice(2,4).reverse())):i=new j.LatLngBounds(r,r),{name:t.place_name,bbox:i,center:r,properties:this._getProperties(t)}}):[]}};function uG(n){return new ty(n)}var ny=class{options={serviceUrl:"https://www.mapquestapi.com/geocoding/v1"};constructor(e){j.Util.setOptions(this,e),this.options.apiKey=decodeURIComponent(this.options.apiKey)}_formatName(...e){return e.filter(t=>!!t).join(", ")}geocode(e){return T(this,null,function*(){let t=jn(this.options,{key:this.options.apiKey,location:e,limit:5,outFormat:"json"}),r=yield ct(this.options.serviceUrl+"/address",t);return this._parseResults(r)})}reverse(e,t){return T(this,null,function*(){let r=er(this.options,{key:this.options.apiKey,location:e.lat+","+e.lng,outputFormat:"json"}),i=yield ct(this.options.serviceUrl+"/reverse",r);return this._parseResults(i)})}_parseResults(e){return(e.results?.[0]?.locations||[]).map(t=>{let r=new j.LatLng(t.latLng.lat,t.latLng.lng);return{name:this._formatName(t.street,t.adminArea4,t.adminArea3,t.adminArea1),bbox:new j.LatLngBounds(r,r),center:r}})}};function lG(n){return new ny(n)}var ry=class{options={userId:"",apiKey:"",serviceUrl:"https://neutrinoapi.com/"};constructor(e){j.Util.setOptions(this,e)}geocode(e){return T(this,null,function*(){let t=jn(this.options,{apiKey:this.options.apiKey,userId:this.options.userId,address:e.split(/\s+/).join(".")}),r=yield ct(this.options.serviceUrl+"geocode-address",t);if(!r.locations)return[];r.geometry=r.locations[0];let i=new j.LatLng(r.geometry.latitude,r.geometry.longitude),o=new j.LatLngBounds(i,i);return[{name:r.geometry.address,bbox:o,center:i}]})}suggest(e){return this.geocode(e)}reverse(e,t){return T(this,null,function*(){let r=er(this.options,{apiKey:this.options.apiKey,userId:this.options.userId,latitude:e.lat,longitude:e.lng}),i=yield ct(this.options.serviceUrl+"geocode-reverse",r);if(i.status.status!==200||!i.found)return[];let o=new j.LatLng(e.lat,e.lng),a=new j.LatLngBounds(o,o);return[{name:i.address,bbox:a,center:o}]})}};function dG(n){return new ry(n)}var Af=class{options={serviceUrl:"https://nominatim.openstreetmap.org/",htmlTemplate(e){let t=e.address,r,i=[];return(t.road||t.building)&&i.push("{building} {road} {house_number}"),(t.city||t.town||t.village||t.hamlet)&&(r=i.length>0?"leaflet-control-geocoder-address-detail":"",i.push('<span class="'+r+'">{postcode} {city} {town} {village} {hamlet}</span>')),(t.state||t.country)&&(r=i.length>0?"leaflet-control-geocoder-address-context":"",i.push('<span class="'+r+'">{state} {country}</span>')),nG(i.join("<br/>"),t)}};constructor(e){j.Util.setOptions(this,e||{})}geocode(e){return T(this,null,function*(){let t=jn(this.options,{q:e,limit:5,format:"json",addressdetails:1});return(yield ct(this.options.serviceUrl+"search",t)).map(r=>{let i=r.boundingbox;return{icon:r.icon,name:r.display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(r):void 0,bbox:new j.LatLngBounds([+i[0],+i[2]],[+i[1],+i[3]]),center:new j.LatLng(+r.lat,+r.lon),properties:r}})})}reverse(e,t){return T(this,null,function*(){let r=er(this.options,{lat:e.lat,lon:e.lng,zoom:Math.round(Math.log(t/256)/Math.log(2)),addressdetails:1,format:"json"}),i=yield ct(this.options.serviceUrl+"reverse",r);if(!i?.lat||!i?.lon)return[];let o=new j.LatLng(+i.lat,+i.lon),a=new j.LatLngBounds(o,o);return[{name:i.display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(i):void 0,center:o,bbox:a,properties:i}]})}};function hG(n){return new Af(n)}var iy=class{options={};constructor(e){j.Util.setOptions(this,e)}geocode(e){return T(this,null,function*(){try{let t=this.options.OpenLocationCode.decode(e);return[{name:e,center:new j.LatLng(t.latitudeCenter,t.longitudeCenter),bbox:new j.LatLngBounds(new j.LatLng(t.latitudeLo,t.longitudeLo),new j.LatLng(t.latitudeHi,t.longitudeHi))}]}catch(t){return console.warn(t),[]}})}reverse(e,t){return T(this,null,function*(){try{return[{name:this.options.OpenLocationCode.encode(e.lat,e.lng,this.options.codeLength),center:new j.LatLng(e.lat,e.lng),bbox:new j.LatLngBounds(new j.LatLng(e.lat,e.lng),new j.LatLng(e.lat,e.lng))}]}catch(r){return console.warn(r),[]}})}};function fG(n){return new iy(n)}var oy=class{options={serviceUrl:"https://api.opencagedata.com/geocode/v1/json"};constructor(e){j.Util.setOptions(this,e)}geocode(e){return T(this,null,function*(){let t=jn(this.options,{key:this.options.apiKey,q:e}),r=yield ct(this.options.serviceUrl,t);return this._parseResults(r)})}suggest(e){return this.geocode(e)}reverse(e,t){return T(this,null,function*(){let r=er(this.options,{key:this.options.apiKey,q:[e.lat,e.lng].join(",")}),i=yield ct(this.options.serviceUrl,r);return this._parseResults(i)})}_parseResults(e){return(e.results||[]).map(t=>{let r=new j.LatLng(t.geometry.lat,t.geometry.lng),i=t.annotations&&t.annotations.bounds?new j.LatLngBounds(new j.LatLng(t.annotations.bounds.northeast.lat,t.annotations.bounds.northeast.lng),new j.LatLng(t.annotations.bounds.southwest.lat,t.annotations.bounds.southwest.lng)):new j.LatLngBounds(r,r);return{name:t.formatted,bbox:i,center:r,properties:t}})}};function pG(n){return new oy(n)}var Ic=class{options={serviceUrl:"https://api.geocode.earth/v1"};constructor(e){j.Util.setOptions(this,e)}geocode(e){return T(this,null,function*(){let t=jn(this.options,{api_key:this.options.apiKey,text:e}),r=yield ct(this.options.serviceUrl+"/search",t);return this._parseResults(r)})}suggest(e){return T(this,null,function*(){let t=jn(this.options,{api_key:this.options.apiKey,text:e}),r=yield ct(this.options.serviceUrl+"/autocomplete",t);return this._parseResults(r)})}reverse(e,t){return T(this,null,function*(){let r=er(this.options,{api_key:this.options.apiKey,"point.lat":e.lat,"point.lon":e.lng}),i=yield ct(this.options.serviceUrl+"/reverse",r);return this._parseResults(i)})}_parseResults(e){return(e.features||[]).map(t=>{let r=t.geometry.coordinates,i=new j.LatLng(r[1],r[0]),o=Array.isArray(t.bbox)&&t.bbox.length===4?new j.LatLngBounds([t.bbox[1],t.bbox[0]],[t.bbox[3],t.bbox[2]]):new j.LatLngBounds(i,i);return{name:t.properties.label,center:i,bbox:o,properties:t.properties}})}};function rD(n){return new Ic(n)}var mG=Ic,gG=rD,_G=Ic,vG=rD,sy=class extends Ic{constructor(e){super(Object.assign({serviceUrl:"https://api.openrouteservice.org/geocode"},e))}};function yG(n){return new sy(n)}var ay=class{options={serviceUrl:"https://photon.komoot.io/api/",reverseUrl:"https://photon.komoot.io/reverse/",nameProperties:["name","street","suburb","hamlet","town","city","state","country"]};constructor(e){j.Util.setOptions(this,e)}geocode(e,t){return T(this,null,function*(){let r=jn(this.options,{q:e}),i=t?.map?.getCenter?.();i&&(r.lat=i.lat,r.lon=i.lng);let o=t?.map?.getZoom?.();o&&(r.zoom=o);let a=yield ct(this.options.serviceUrl,r);return this._parseResults(a)})}suggest(e){return this.geocode(e)}reverse(e,t){return T(this,null,function*(){let r=er(this.options,{lat:e.lat,lon:e.lng}),i=yield ct(this.options.reverseUrl,r);return this._parseResults(i)})}_parseResults(e){return(e.features||[]).map(t=>{let r=t.geometry.coordinates,i=new j.LatLng(r[1],r[0]),o=t.properties?.extent,a=o?new j.LatLngBounds([o[1],o[0]],[o[3],o[2]]):new j.LatLngBounds(i,i);return{name:this._decodeFeatureName(t),html:this.options.htmlTemplate?this.options.htmlTemplate(t):void 0,center:i,bbox:a,properties:t.properties}})}_decodeFeatureName(e){return(this.options.nameProperties||[]).map(t=>e.properties?.[t]).filter(t=>!!t).join(", ")}};function wG(n){return new ay(n)}var cy=class{options={serviceUrl:"https://api.what3words.com/v2/"};constructor(e){j.Util.setOptions(this,e)}geocode(e){return T(this,null,function*(){let t=yield ct(this.options.serviceUrl+"forward",jn(this.options,{key:this.options.apiKey,addr:e.split(/\s+/).join(".")}));if(!t.geometry)return[];let r=new j.LatLng(t.geometry.lat,t.geometry.lng),i=new j.LatLngBounds(r,r);return[{name:t.words,bbox:i,center:r}]})}suggest(e){return this.geocode(e)}reverse(e,t){return T(this,null,function*(){let r=yield ct(this.options.serviceUrl+"reverse",er(this.options,{key:this.options.apiKey,coords:[e.lat,e.lng].join(",")}));if(r.status.status!=200)return[];let i=new j.LatLng(r.geometry.lat,r.geometry.lng),o=new j.LatLngBounds(i,i);return[{name:r.words,bbox:o,center:i}]})}};function EG(n){return new cy(n)}var IG=Object.freeze(Object.defineProperty({__proto__:null,ArcGis:Kv,AzureMaps:Qv,Bing:Zv,GeocodeEarth:mG,Google:Yv,HERE:Jv,HEREv2:Xv,LatLng:ey,MapQuest:ny,Mapbox:ty,Mapzen:_G,Neutrino:ry,Nominatim:Af,OpenCage:oy,OpenLocationCode:iy,Openrouteservice:sy,Pelias:Ic,Photon:ay,What3Words:cy,arcgis:rG,azure:oG,bing:iG,geocodeEarth:gG,geocodingParams:jn,google:sG,here:aG,latLng:cG,mapQuest:lG,mapbox:uG,mapzen:vG,neutrino:dG,nominatim:hG,openLocationCode:fG,opencage:pG,openrouteservice:yG,parseLatLng:nL,pelias:rD,photon:wG,reverseParams:er,what3words:EG},Symbol.toStringTag,{value:"Module"})),Rf=class{constructor(...e){}};Object.getOwnPropertyNames(j.Control.prototype).forEach(n=>Rf.prototype[n]=j.Control.prototype[n]);Object.getOwnPropertyNames(j.Evented.prototype).forEach(n=>Rf.prototype[n]=j.Evented.prototype[n]);var xf=class extends Rf{options={showUniqueResult:!0,showResultIcons:!1,collapsed:!0,expand:"touch",position:"topright",placeholder:"Search...",errorMessage:"Nothing found.",iconLabel:"Initiate a new search",query:"",queryMinLength:1,suggestMinLength:3,suggestTimeout:250,defaultMarkGeocode:!0};_alts;_container;_errorElement;_geocodeMarker;_input;_lastGeocode;_map;_preventBlurCollapse;_requestCount=0;_results;_selection;_suggestTimeout;constructor(e){super(e),j.Util.setOptions(this,e),this.options.geocoder||(this.options.geocoder=new Af)}addThrobberClass(){this._container.classList.add("leaflet-control-geocoder-throbber")}removeThrobberClass(){this._container.classList.remove("leaflet-control-geocoder-throbber")}onAdd(e){let t="leaflet-control-geocoder",r=j.DomUtil.create("div",t+" leaflet-bar"),i=j.DomUtil.create("button",t+"-icon",r),o=j.DomUtil.create("div",t+"-form",r);this._map=e,this._container=r,i.innerHTML="&nbsp;",i.type="button",i.setAttribute("aria-label",this.options.iconLabel);let a=this._input=j.DomUtil.create("input","",o);return a.type="search",a.value=this.options.query,a.placeholder=this.options.placeholder,j.DomEvent.disableClickPropagation(a),this._errorElement=j.DomUtil.create("div",t+"-form-no-error",r),this._errorElement.innerHTML=this.options.errorMessage,this._alts=j.DomUtil.create("ul",t+"-alternatives leaflet-control-geocoder-alternatives-minimized",r),j.DomEvent.disableClickPropagation(this._alts),j.DomEvent.on(a,"keydown",this._keydown,this),this.options.geocoder?.suggest&&j.DomEvent.on(a,"input",this._change,this),j.DomEvent.on(a,"blur",()=>{this.options.collapsed&&!this._preventBlurCollapse&&this._collapse(),this._preventBlurCollapse=!1}),this.options.collapsed?this.options.expand==="click"?j.DomEvent.on(r,"click",u=>{u.button===0&&u.detail!==2&&this._toggle()}):this.options.expand==="touch"?j.DomEvent.on(r,j.Browser.touch?"touchstart mousedown":"mousedown",u=>{this._toggle(),u.preventDefault(),u.stopPropagation()},this):(j.DomEvent.on(r,"mouseover",this._expand,this),j.DomEvent.on(r,"mouseout",this._collapse,this),this._map.on("movestart",this._collapse,this)):(this._expand(),j.Browser.touch?j.DomEvent.on(r,"touchstart",()=>this._geocode()):j.DomEvent.on(r,"click",()=>this._geocode())),this.options.defaultMarkGeocode&&this.on("markgeocode",this.markGeocode,this),this.on("startgeocode",this.addThrobberClass,this),this.on("finishgeocode",this.removeThrobberClass,this),this.on("startsuggest",this.addThrobberClass,this),this.on("finishsuggest",this.removeThrobberClass,this),j.DomEvent.disableClickPropagation(r),r}setQuery(e){return this._input.value=e,this}_geocodeResult(e,t){!t&&this.options.showUniqueResult&&e.length===1?this._geocodeResultSelected(e[0]):e.length>0?(this._alts.innerHTML="",this._results=e,this._alts.classList.remove("leaflet-control-geocoder-alternatives-minimized"),this._container.classList.add("leaflet-control-geocoder-options-open"),this._results.forEach((r,i)=>this._alts.appendChild(this._createAlt(r,i)))):(this._container.classList.add("leaflet-control-geocoder-options-error"),this._errorElement.classList.add("leaflet-control-geocoder-error"))}markGeocode(e){let t=e.geocode;return this._map.fitBounds(t.bbox),this._geocodeMarker&&this._map.removeLayer(this._geocodeMarker),this._geocodeMarker=new j.Marker(t.center).bindPopup(t.html||t.name).addTo(this._map).openPopup(),this}_geocode(e=!1){return T(this,null,function*(){let t=this._input.value;if(!e&&t.length<this.options.queryMinLength)return;let r=++this._requestCount;this._lastGeocode=t,e||this._clearResults();let i={input:t};this.fire(e?"startsuggest":"startgeocode",i);let o={map:this._map},a=e?yield this.options.geocoder.suggest(t,o):yield this.options.geocoder.geocode(t,o);if(r===this._requestCount){let u={input:t,results:a};this.fire(e?"finishsuggest":"finishgeocode",u),this._geocodeResult(a,e)}})}_geocodeResultSelected(e){let t={geocode:e};this.fire("markgeocode",t)}_toggle(){this._container.classList.contains("leaflet-control-geocoder-expanded")?this._collapse():this._expand()}_expand(){this._container.classList.add("leaflet-control-geocoder-expanded"),this._input.select(),this.fire("expand")}_collapse(){this._container.classList.remove("leaflet-control-geocoder-expanded"),this._alts.classList.add("leaflet-control-geocoder-alternatives-minimized"),this._errorElement.classList.remove("leaflet-control-geocoder-error"),this._container.classList.remove("leaflet-control-geocoder-options-open"),this._container.classList.remove("leaflet-control-geocoder-options-error"),this._input.blur(),this.fire("collapse")}_clearResults(){this._alts.classList.add("leaflet-control-geocoder-alternatives-minimized"),this._selection=null,this._errorElement.classList.remove("leaflet-control-geocoder-error"),this._container.classList.remove("leaflet-control-geocoder-options-open"),this._container.classList.remove("leaflet-control-geocoder-options-error")}_createAlt(e,t){let r=j.DomUtil.create("li",""),i=j.DomUtil.create("a","",r),o=this.options.showResultIcons&&e.icon?j.DomUtil.create("img","",i):null,a=e.html?void 0:document.createTextNode(e.name),u=d=>{this._preventBlurCollapse=!0,j.DomEvent.stop(d),this._geocodeResultSelected(e),j.DomEvent.on(r,"click touchend",()=>{this.options.collapsed?this._collapse():this._clearResults()})};return o&&(o.src=e.icon),r.setAttribute("data-result-index",String(t)),e.html?i.innerHTML=i.innerHTML+e.html:a&&i.appendChild(a),j.DomEvent.on(r,"mousedown touchstart",u,this),r}_keydown(e){let t=r=>{this._selection&&(this._selection.classList.remove("leaflet-control-geocoder-selected"),this._selection=this._selection[r>0?"nextSibling":"previousSibling"]),this._selection||(this._selection=this._alts[r>0?"firstChild":"lastChild"]),this._selection&&this._selection.classList.add("leaflet-control-geocoder-selected")};switch(e.key){case"Escape":this.options.collapsed?this._collapse():this._clearResults();break;case"ArrowUp":t(-1);break;case"ArrowDown":t(1);break;case"Enter":if(this._selection){let r=parseInt(this._selection.getAttribute("data-result-index"),10);this._geocodeResultSelected(this._results[r]),this._clearResults()}else this._geocode();break;default:return}j.DomEvent.preventDefault(e)}_change(){let e=this._input.value;e!==this._lastGeocode&&(clearTimeout(this._suggestTimeout),e.length>=this.options.suggestMinLength?this._suggestTimeout=setTimeout(()=>this._geocode(!0),this.options.suggestTimeout):this._clearResults())}};function bG(n){return new xf(n)}Object.assign(xf,IG);Object.assign(j.Control,{Geocoder:xf,geocoder:bG});function TG(n,e){if(n&1&&(z(0,"div",33)(1,"h4"),K(2,"Nearest Jeepney"),H(),z(3,"div")(4,"strong"),K(5,"Plate:"),H(),K(6),H(),z(7,"div")(8,"strong"),K(9,"Distance:"),H(),K(10),H(),z(11,"div")(12,"strong"),K(13,"ETA:"),H(),K(14),H()()),n&2){let t=Be();X(6),St(" ",t.nearestJeep.plate),X(4),St(" ",t.nearestDistanceMeters," m"),X(4),St(" ",t.nearestEtaMinutes," min")}}function CG(n,e){if(n&1&&(z(0,"li")(1,"strong"),K(2),H(),K(3),z(4,"span",34),K(5),H()()),n&2){let t=e.$implicit;X(2),Ln(t.user||"Anonymous"),X(),St(": ",t.text," "),X(2),Ln(t.timeDisplay)}}function DG(n,e){if(n&1){let t=_s();z(0,"div",35)(1,"div",36)(2,"h3"),K(3,"Account Settings"),H(),z(4,"label")(5,"strong"),K(6,"Username:"),H()(),z(7,"input",37),it("ngModelChange",function(i){kt(t);let o=Be();return st(o.customUsername,i)||(o.customUsername=i),Ot(i)}),H(),z(8,"button",38),_e("click",function(){kt(t);let i=Be();return Ot(i.saveUsername())}),K(9,"Save"),H(),z(10,"button",39),_e("click",function(){kt(t);let i=Be();return Ot(i.closeSettings())}),K(11,"Close"),H()()()}if(n&2){let t=Be();X(7),rt("ngModel",t.customUsername)}}var uy=class n{constructor(e,t){this.firestore=e;this.auth=t;Vs(this.auth,r=>{let i=localStorage.getItem("customUsername");i?(this.customUsername=i,this.userName=i):r?(this.userName=r.displayName||r.email||"User",this.customUsername=this.userName):(this.userName="Guest",this.customUsername="Guest")}),this.jeepIcon=Bn.icon({iconUrl:"jeepney.png",iconSize:[36,36],iconAnchor:[18,18],popupAnchor:[0,-12]})}userName=null;customUsername="";showSettings=!1;accountDropdownOpen=!1;toggleAccountDropdown(){this.accountDropdownOpen=!this.accountDropdownOpen}showChat=!1;chatMessages=[];chatText="";sendChat(){this.chatText.trim()!==""&&(this.chatMessages.push(this.chatText),this.chatText="")}showChatDashboard=!1;toggleChat(){this.showChatDashboard=!this.showChatDashboard}route="Route 5: Downtown to Uptown";delay="10 min";delayTime="08:30 AM";mapUrl="https://via.placeholder.com/400x200?text=Route+Map";nextBusTime="08:45 AM";nextBusDestination="Central Station";map;marker=null;circle=null;radius=1500;lat="\u2014";lng="\u2014";jeepMarkers=new Map;jeepIcon;nearestJeep=null;nearestDistanceMeters=0;nearestEtaMinutes=0;newPostText="";communityPosts=[];jeepSub=null;communitySub=null;openSettings(){this.showSettings=!0}closeSettings(){this.showSettings=!1}logout(){L_(this.auth).then(()=>{alert("Logged out successfully!"),window.location.href="/login"})}ngAfterViewInit(){this.initMap(),this.listenJeepneysRealtime(),this.loadCommunityRealtime()}ngOnDestroy(){this.jeepSub?.unsubscribe(),this.communitySub?.unsubscribe();try{this.map?.off(),this.map?.remove()}catch{}}initMap(){this.map=Bn.map("map",{center:[16.417644,120.601387],zoom:14,zoomControl:!1}),Bn.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xA9 OpenStreetMap contributors"}).addTo(this.map),Bn.control.zoom({position:"bottomleft"}).addTo(this.map),Bn.Control.geocoder({defaultMarkGeocode:!1,placeholder:"Search places..."}).on("markgeocode",t=>{let r=t.geocode.center;this.setMarkerAndCircle(r.lat,r.lng),this.map.fitBounds(t.geocode.bbox)}).addTo(this.map);let e=this.map.getCenter();this.createMarkerAndCircle(e.lat,e.lng,this.radius),this.map.on("click",t=>{this.setMarkerAndCircle(t.latlng.lat,t.latlng.lng),this.evaluateNearest()})}createMarkerAndCircle(e,t,r=500){this.marker&&this.marker.remove(),this.circle&&this.circle.remove(),this.marker=Bn.marker([e,t],{draggable:!0}).addTo(this.map),this.circle=Bn.circle([e,t],{radius:r}).addTo(this.map),this.updateInfo(e,t,r),this.marker.on("drag",i=>{let o=i.target.getLatLng();this.circle?.setLatLng(o),this.updateInfo(o.lat,o.lng,this.circle?.getRadius()??this.radius),this.evaluateNearest()}),this.marker.on("click",()=>this.updateTooltip()),this.circle.on("click",()=>this.updateTooltip())}updateInfo(e,t,r){this.lat=e.toFixed(6),this.lng=t.toFixed(6),this.radius=Math.round(r)}updateRadiusFromUI(){if(this.circle){let e=this.circle.getLatLng(),t=this.map.getZoom();this.circle.setRadius(Number(this.radius)),this.map.setView(e,t)}this.evaluateNearest()}fitToCircle(){this.circle&&this.map.fitBounds(this.circle.getBounds())}setMarkerAndCircle(e,t){this.marker?.setLatLng([e,t]),this.circle?.setLatLng([e,t]),this.updateInfo(e,t,this.circle?.getRadius()??this.radius)}locateMe(){if(!navigator.geolocation)return alert("Geolocation not supported");navigator.geolocation.getCurrentPosition(e=>{let t=e.coords.latitude,r=e.coords.longitude;this.setMarkerAndCircle(t,r),this.map.setView([t,r],15),this.evaluateNearest()})}updateTooltip(){if(!this.marker||!this.circle)return;let e=this.marker.getLatLng(),t=this.circle.getRadius();this.marker.bindPopup(`
      <b>Marker info</b><br>
      Lat: ${e.lat.toFixed(6)}<br>
      Lng: ${e.lng.toFixed(6)}<br>
      Radius: ${Math.round(t)} m
    `).openPopup()}listenJeepneysRealtime(){let e=oi(this.firestore,"jeepneys"),t=Qs(e);this.jeepSub=Df(t,{idField:"id"}).subscribe(r=>{this.updateJeepMarkers(r||[]),this.evaluateNearest()})}updateJeepMarkers(e){let t=new Set;for(let r of e){if(!r.id||!r.lat||!r.lng)continue;t.add(r.id);let i=[r.lat,r.lng];if(this.jeepMarkers.has(r.id)){let o=this.jeepMarkers.get(r.id);o.setLatLng(i),o.jeepData=r,o.setPopupContent(this.jeepPopupContent(r))}else{let o=Bn.marker(i,{icon:this.jeepIcon});o.jeepData=r,o.bindPopup(this.jeepPopupContent(r)),o.addTo(this.map),this.jeepMarkers.set(r.id,o)}}for(let r of Array.from(this.jeepMarkers.keys()))t.has(r)||(this.jeepMarkers.get(r).remove(),this.jeepMarkers.delete(r))}jeepPopupContent(e){let t=e.speed?(e.speed*3.6).toFixed(1)+" km/h":"\u2014",r=e.updatedAt?new Date(e.updatedAt).toLocaleTimeString():"\u2014";return`
      <div class="jeep-popup">
        <div class="title">\u{1F6FA} Jeepney ${e.plate||"\u2014"}</div>
        <div><b>Route:</b> ${e.routeId||"\u2014"}</div>
        <div><b>Speed:</b> ${t}</div>
        <div><b>Last update:</b> ${r}</div>
      </div>
    `}evaluateNearest(){if(!this.marker)return;let e=this.marker.getLatLng(),t=null,r=1/0;if(this.jeepMarkers.forEach((a,u)=>{let d=a,f=d.getLatLng(),g=this.distanceMeters({lat:e.lat,lng:e.lng},{lat:f.lat,lng:f.lng});if(g<r){r=g;let y=d.jeepData||{};t={id:u,plate:y.plate||"\u2014",lat:f.lat,lng:f.lng,marker:a}}}),!t){this.nearestJeep=null,this.nearestDistanceMeters=0,this.nearestEtaMinutes=0;return}let i=20*1e3/3600,o=r/i/60;this.nearestJeep=t,this.nearestDistanceMeters=Math.round(r),this.nearestEtaMinutes=Math.ceil(o),this.highlightNearestMarker(t.id)}highlightNearestMarker(e){this.jeepMarkers.forEach((t,r)=>{t.setOpacity(r===e?1:.5),r===e&&t.openPopup()})}loadCommunityRealtime(){let e=oi(this.firestore,"community"),t=Qs(e,jv("time","desc"));this.communitySub=Df(t,{idField:"id"}).subscribe(r=>{this.communityPosts=(r||[]).map(i=>we(Q({},i),{timeDisplay:i.time?new Date(i.time).toLocaleString():""}))})}sendPost(){return T(this,null,function*(){let e=(this.newPostText||"").trim();if(!e)return;let t=oi(this.firestore,"community");yield Pl(t,{user:this.customUsername||"Anonymous",text:e,time:new Date().toISOString()}),this.newPostText=""})}showTools=!1;toggleTools(){this.showTools=!this.showTools}saveUsername(){let e=(this.customUsername||"").trim();if(!e)return alert("Username cannot be empty.");this.userName=e,localStorage.setItem("customUsername",e),alert("Username updated!")}toRad(e){return e*Math.PI/180}haversineKm(e,t){let i=this.toRad(t.lat-e.lat),o=this.toRad(t.lng-e.lng),a=this.toRad(e.lat),u=this.toRad(t.lat),d=Math.sin(i/2),f=Math.sin(o/2),g=d*d+Math.cos(a)*Math.cos(u)*f*f;return 6371*(2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g)))}distanceMeters(e,t){return this.haversineKm(e,t)*1e3}static \u0275fac=function(t){return new(t||n)(ue(Un),ue(Ut))};static \u0275cmp=Lt({type:n,selectors:[["app-commuter-dashboard"]],decls:55,vars:17,consts:[[1,"top-bar"],[1,"top-bar-left"],[1,"toggle-tools-btn",3,"click"],[1,"top-bar-right"],[1,"btn","chat-btn",3,"click"],[1,"account-dropdown"],[1,"btn","account-btn",3,"click"],[1,"dropdown-menu"],[1,"btn","small","w-100",3,"click"],[1,"btn","small","w-100","logout",3,"click"],[1,"main-content-wrapper"],[1,"map-sidebar"],[1,"sidebar-header"],[1,"btn","small",3,"click"],[1,"control-row"],["for","radiusRange"],["id","radiusRange","type","range","min","50","max","5000","step","10",3,"ngModelChange","input","ngModel"],["id","radiusNumber","type","number","min","50","max","5000","step","10",2,"flex","1","padding","6px",3,"ngModelChange","change","ngModel"],[1,"btn",3,"click"],[1,"coords"],[1,"small"],[1,"main-content"],[1,"map-wrapper"],["id","map",1,"map"],["class","nearest-jeepney",4,"ngIf"],[1,"right-dashboard"],[1,"community"],[1,"community-input"],["placeholder","Share an update\u2026",1,"form-control",3,"ngModelChange","ngModel"],[1,"post-btn","w-100","mt-2",3,"click"],[1,"mt-3"],[4,"ngFor","ngForOf"],["class","modal",4,"ngIf"],[1,"nearest-jeepney"],[1,"time"],[1,"modal"],[1,"modal-content"],["type","text","placeholder","Enter username",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","mt-2",3,"click"],[1,"btn","mt-3",3,"click"]],template:function(t,r){t&1&&(z(0,"div",0)(1,"div",1)(2,"button",2),_e("click",function(){return r.toggleTools()}),K(3),H()(),z(4,"div",3)(5,"button",4),_e("click",function(){return r.toggleChat()}),K(6,"\u{1F4AC} Chat"),H(),z(7,"div",5)(8,"button",6),_e("click",function(){return r.toggleAccountDropdown()}),K(9),H(),z(10,"ul",7)(11,"li")(12,"button",8),_e("click",function(){return r.openSettings(),r.toggleAccountDropdown()}),K(13,"\u2699\uFE0F Settings"),H()(),z(14,"li")(15,"button",9),_e("click",function(){return r.logout(),r.toggleAccountDropdown()}),K(16,"\u{1F6AA} Logout"),H()()()()()(),z(17,"div",10)(18,"div",11)(19,"div",12)(20,"strong"),K(21,"Interactive Map Tool"),H(),z(22,"button",13),_e("click",function(){return r.locateMe()}),K(23,"\u{1F4CD} My location"),H()(),z(24,"div",14)(25,"label",15),K(26,"Radius (m)"),H(),z(27,"input",16),it("ngModelChange",function(o){return st(r.radius,o)||(r.radius=o),o}),_e("input",function(){return r.updateRadiusFromUI()}),H()(),z(28,"div",14)(29,"input",17),it("ngModelChange",function(o){return st(r.radius,o)||(r.radius=o),o}),_e("change",function(){return r.updateRadiusFromUI()}),H(),z(30,"button",18),_e("click",function(){return r.fitToCircle()}),K(31,"Fit"),H()(),z(32,"div",19)(33,"div"),K(34,"Radius: "),z(35,"span"),K(36),H(),K(37," m"),H()(),z(38,"p",20),K(39,"Drag the marker to move the circle."),H()(),z(40,"div",21)(41,"div",22),vn(42,"div",23),H()()(),On(43,TG,15,3,"div",24),z(44,"div",25)(45,"div",26)(46,"h4"),K(47,"Community"),H(),z(48,"div",27)(49,"textarea",28),it("ngModelChange",function(o){return st(r.newPostText,o)||(r.newPostText=o),o}),H(),z(50,"button",29),_e("click",function(){return r.sendPost()}),K(51,"Post"),H()(),z(52,"ul",30),On(53,CG,6,3,"li",31),H()()(),On(54,DG,12,1,"div",32)),t&2&&(X(2),fr("active",r.showTools),X(),St(" ",r.showTools?"\u2715 Close Tools":"\u2630 Tools"," "),X(4),fr("open",r.accountDropdownOpen),X(2),St(" \u{1F464} ",r.userName||"Guest"," \u25BC "),X(9),fr("visible",r.showTools),X(9),rt("ngModel",r.radius),X(2),rt("ngModel",r.radius),X(7),Ln(r.radius),X(7),Ft("ngIf",r.nearestJeep),X(),fr("show",r.showChatDashboard),X(5),rt("ngModel",r.newPostText),X(4),Ft("ngForOf",r.communityPosts),X(),Ft("ngIf",r.showSettings))},dependencies:[Cn,ws,za,Yn,Qn,cb,ub,Pr,hb,db,gr],styles:[".top-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#fff;border-bottom:2px solid #FF4500;padding:.5rem 1rem;font-family:Arial,sans-serif;position:sticky;top:0;z-index:100;box-shadow:0 2px 4px #0000001a}.top-bar-left[_ngcontent-%COMP%]   .toggle-tools-btn[_ngcontent-%COMP%]{background-color:#ff4500;color:#fff;border:none;padding:6px 12px;border-radius:50px;cursor:pointer;font-weight:600;transition:.2s}.top-bar-left[_ngcontent-%COMP%]   .toggle-tools-btn[_ngcontent-%COMP%]:hover{background-color:#e65c00}.top-bar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.chat-btn[_ngcontent-%COMP%]{background-color:#ff4500;color:#fff;border-radius:50px;border:none;padding:6px 12px;font-weight:600;cursor:pointer;transition:.2s}.chat-btn[_ngcontent-%COMP%]:hover{background-color:#e65c00}.account-dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block;z-index:2000}.dropdown-menu[_ngcontent-%COMP%]{display:none;position:fixed;top:55px;right:1rem;background-color:#fff;border:1px solid #FF4500;border-radius:6px;min-width:160px;box-shadow:0 4px 12px #00000026;z-index:2500;padding:.5rem 0}.account-dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block}.account-btn[_ngcontent-%COMP%]{background-color:#fff;color:#ff4500;border:1px solid #FF4500;border-radius:6px;padding:6px 12px;cursor:pointer}.account-btn[_ngcontent-%COMP%]:hover{background-color:#ff4500;color:#fff}.account-dropdown.open[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{display:block}.dropdown-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;color:#ff4500;width:100%;text-align:left;padding:10px 16px;font-weight:500;cursor:pointer;transition:background .2s}.dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ff4500;color:#fff;border-radius:4px}.main-content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;justify-content:flex-start}.map-sidebar[_ngcontent-%COMP%]{position:fixed;top:55px;left:-260px;width:260px;height:100%;background:#fff;border-right:2px solid #FF4500;border-radius:0 12px 12px 0;padding:1.5rem 1rem;box-shadow:0 8px 20px #00000014;z-index:1500;font-family:Segoe UI,sans-serif;overflow-y:auto;transition:left .35s ease,box-shadow .35s ease}.map-sidebar.visible[_ngcontent-%COMP%]{left:0;box-shadow:0 8px 25px #0000001f}.map-sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]{font-size:1.15rem;font-weight:400;color:#ff4500;margin-bottom:1rem;display:flex;flex-direction:column;align-items:flex-start;gap:.8rem}.map-sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;padding:8px;font-size:.95rem;border-radius:15px;background-color:#ff4500;color:#fff;border:none;cursor:pointer;transition:all .2s}.map-sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#e65c00;transform:translateY(-1px)}.map-sidebar[_ngcontent-%COMP%]   .control-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem;gap:.5rem}.map-sidebar[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.9rem;font-weight:400;color:#ff4500}.map-sidebar[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]{flex:1;height:5px;border-radius:3px;background:#ffd6b3;accent-color:#FF4500;margin-left:.5rem}.map-sidebar[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{width:70px;border:1px solid #FF4500;border-radius:6px;padding:5px 6px;font-size:.9rem;text-align:center;font-weight:400;color:#ff4500;background:#fff;transition:all .2s}.map-sidebar[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:focus{border-color:#e65c00;box-shadow:0 0 4px #e65c0033}.map-sidebar[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:#ff4500;color:#fff;border-radius:15px;border:none;font-weight:600;font-size:.95rem;padding:8px;width:100%;cursor:pointer;transition:all .2s ease;text-align:center}.map-sidebar[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#e65c00;transform:translateY(-1px)}.map-sidebar[_ngcontent-%COMP%]   .coords[_ngcontent-%COMP%]{font-size:.85rem;color:#ff4500;text-align:center;margin-top:.8rem;padding:.5rem;background-color:#fff8f6;border-radius:8px;border:1px solid #FF4500}.map-sidebar[_ngcontent-%COMP%]   .small[_ngcontent-%COMP%]{font-size:.9rem;color:#fff;text-align:center;margin-top:.5rem}.map-sidebar[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}.map-sidebar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#ff450080;border-radius:3px}@media screen and (max-width: 680px){.map-sidebar[_ngcontent-%COMP%]{width:75%;left:-80%;height:calc(100vh - 55px);border-radius:0 12px 12px 0;padding:1.2rem .8rem}.map-sidebar.visible[_ngcontent-%COMP%]{left:0}.map-wrapper[_ngcontent-%COMP%]{width:90%;margin-left:0}.right-dashboard[_ngcontent-%COMP%]{width:90%;right:-95%}.right-dashboard.show[_ngcontent-%COMP%]{right:0}}.main-content[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;padding:1rem;margin-left:0;margin-right:0}.map-wrapper[_ngcontent-%COMP%]{width:100%;max-width:900px;height:400px;border:3px solid #FF4500;border-radius:12px;overflow:hidden;position:relative;background:#f7f7f7;box-shadow:0 4px 10px #0000001a}.map[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:10px}#map[_ngcontent-%COMP%]{width:100%!important;height:100%!important;position:absolute;top:0;left:0}@media screen and (max-width: 680px){.main-content[_ngcontent-%COMP%]{justify-content:center;padding:.5rem}.map-wrapper[_ngcontent-%COMP%]{width:90%;max-width:100%;margin:0 auto}}.right-dashboard[_ngcontent-%COMP%]{width:320px;background:#fff;border-left:3px solid #FF4500;padding:1rem;overflow-y:auto;position:fixed;top:60px;right:-540px;height:calc(100vh - 60px);transition:right .3s ease;z-index:1500}.right-dashboard.show[_ngcontent-%COMP%]{right:0}.community[_ngcontent-%COMP%]{background:#fff;padding:1rem}.community-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:2px solid #FF4500;border-radius:10px;padding:.5rem}.post-btn[_ngcontent-%COMP%]{background-color:#ff4500;color:#fff;border-radius:50px;border:2px solid #FF4500;font-weight:600}.post-btn[_ngcontent-%COMP%]:hover{background-color:#e65c00}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:2000}.modal-content[_ngcontent-%COMP%]{background:#fff;border:2px solid #FF4500;border-radius:15px;padding:2rem;width:300px;max-width:90%}.modal-content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:2px solid #FF4500;border-radius:10px;width:100%;padding:.5rem;margin-top:.5rem}.modal-content[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:#ff4500;color:#fff;border-radius:50px;border:2px solid #FF4500;font-weight:600;margin-top:.5rem;width:100%}.modal-content[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#e65c00}@media screen and (max-width: 680px){.main-content[_ngcontent-%COMP%]{margin-left:0;width:95%}.map-sidebar[_ngcontent-%COMP%]{position:fixed;width:80%;left:-80%;height:calc(100vh - 55px);z-index:1200}.map-sidebar.visible[_ngcontent-%COMP%]{left:0}.map-wrapper[_ngcontent-%COMP%], .right-dashboard[_ngcontent-%COMP%]{width:95%}}.nearest-jeepney[_ngcontent-%COMP%]{width:100%;max-width:300px;margin:15px auto 30px;padding:1rem;background-color:#fff;border:2px solid #FF4500;border-radius:10px;box-shadow:0 4px 12px #0000001a;font-family:Segoe UI,sans-serif;text-align:center}.nearest-jeepney[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#ff4500;margin-bottom:.8rem}.nearest-jeepney[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:0;margin:0;list-style:none}.nearest-jeepney[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:.95rem;color:#333;margin-bottom:.6rem;border-bottom:1px solid #ffd6b3;padding:4px 0}@media screen and (max-width: 680px){.nearest-jeepney[_ngcontent-%COMP%]{width:90%;margin:15px auto;padding:.8rem 1rem}}"]})};window.closeLeafletPopup=()=>{let n=window.leafletMapRef;n&&n.closePopup()};function SG(n,e){if(n&1&&(z(0,"li")(1,"strong"),K(2),H(),K(3),z(4,"span",21),K(5),H()()),n&2){let t=e.$implicit;X(2),Ln(t.user||"Driver"),X(),St(": ",t.text," "),X(2),Ln(t.timeDisplay)}}var ly=class n{constructor(e,t){this.firestore=e;this.auth=t;Vs(this.auth,r=>T(this,null,function*(){if(r){this.driverId=r.uid,this.driverName=r.displayName||r.email||"Driver";let i=Xn(this.firestore,"users",r.uid),o=yield Uv(i);if(o.exists()){let a=o.data();this.plate=a.plate||null}console.log("loaded plate:",this.plate)}else this.driverId=null,this.driverName=null,this.plate=null})),this.loadDriverCommunity()}isOnline=!1;intervalId=null;driverId=null;driverName=null;plate=null;lastLat=null;lastLng=null;lastTimestamp=null;routeId="Aurora Hill";dropdownOpen=!1;driverCommunityOpen=!1;toggleDropdown(){this.dropdownOpen=!this.dropdownOpen}toggleDriverCommunity(){this.driverCommunityOpen=!this.driverCommunityOpen}logout(){this.auth.signOut().then(()=>{window.location.href="/login"})}driverNewPostText="";driverCommunityPosts=[];driverCommunitySub=null;ngOnDestroy(){this.driverCommunitySub?.unsubscribe()}startLocationUpdates(){this.intervalId=setInterval(()=>this.sendLocationOnce(),5e3),this.sendLocationOnce()}sendLocationOnce(){return T(this,null,function*(){if(!navigator.geolocation||!this.driverId)return;let e=this.driverId,t=this.driverName||"Driver";navigator.geolocation.getCurrentPosition(r=>T(this,null,function*(){let{latitude:i,longitude:o}=r.coords,a=Date.now(),u=0;if(this.lastLat!==null&&this.lastLng!==null&&this.lastTimestamp!==null){let d=(a-this.lastTimestamp)/1e3;u=this.haversine(this.lastLat,this.lastLng,i,o)/d}this.lastLat=i,this.lastLng=o,this.lastTimestamp=a,yield Nl(Xn(this.firestore,"jeepneys",e),{id:e,plate:this.plate||"unknown",driverName:t,lat:i,lng:o,updatedAt:a,speed:u,routeId:this.routeId},{merge:!0})}))})}setDriverOnline(){return T(this,null,function*(){if(!this.driverId)return alert("Driver not logged in.");this.isOnline=!0,this.startLocationUpdates()})}setDriverOffline(){return T(this,null,function*(){if(!this.driverId)return;this.isOnline=!1,this.intervalId&&clearInterval(this.intervalId);let e=this.driverId;yield Sf(Xn(this.firestore,"jeepneys",e))})}toggleOnline(){this.isOnline?this.setDriverOffline():this.setDriverOnline()}loadDriverCommunity(){let e=oi(this.firestore,"driverCommunity"),t=Qs(e,jv("time","desc"));this.driverCommunitySub=Df(t,{idField:"id"}).subscribe(r=>{this.driverCommunityPosts=(r||[]).map(i=>we(Q({},i),{timeDisplay:i.time?new Date(i.time).toLocaleString():""}))})}sendDriverPost(){return T(this,null,function*(){let e=(this.driverNewPostText||"").trim();if(!e)return;let t=oi(this.firestore,"driverCommunity");yield Pl(t,{user:this.driverName||this.plate||"Driver",text:e,role:"driver",time:new Date().toISOString()}),this.driverNewPostText=""})}haversine(e,t,r,i){let a=f=>f*Math.PI/180,u=a(r-e),d=a(i-t);return 6371e3*2*Math.asin(Math.sqrt(Math.sin(u/2)**2+Math.cos(a(e))*Math.cos(a(r))*Math.sin(d/2)**2))}static \u0275fac=function(t){return new(t||n)(ue(Un),ue(Ut))};static \u0275cmp=Lt({type:n,selectors:[["app-driver"]],decls:34,vars:9,consts:[[1,"top-bar"],[1,"top-bar-left"],[1,"driver-header-horizontal"],[1,"logo-circle"],[1,"app-title"],[1,"top-bar-right"],[1,"chat-btn",3,"click"],[1,"account-dropdown"],[1,"account-btn",3,"click"],[1,"dropdown-menu"],[3,"click"],[1,"main-content-wrapper"],[1,"main-content"],[1,"toggle-tools-btn","center-btn",3,"click"],[1,"right-dashboard"],[1,"community"],[1,"community-input"],["placeholder","Share an update\u2026",1,"form-control",3,"ngModelChange","ngModel"],[1,"post-btn","w-100","mt-2",3,"click"],[1,"mt-3"],[4,"ngFor","ngForOf"],[1,"time"]],template:function(t,r){t&1&&(z(0,"div",0)(1,"div",1)(2,"div",2),vn(3,"div",3),z(4,"h4",4),K(5,"Driver App"),H()()(),z(6,"div",5)(7,"button",6),_e("click",function(){return r.toggleDriverCommunity()}),K(8,"Community"),H(),z(9,"div",7)(10,"button",8),_e("click",function(){return r.toggleDropdown()}),K(11),H(),z(12,"ul",9)(13,"li")(14,"button",10),_e("click",function(){return r.logout()}),K(15,"\u{1F6AA}Logout"),H()()()()()(),z(16,"div",11)(17,"div",12)(18,"button",13),_e("click",function(){return r.toggleOnline()}),K(19),H(),z(20,"p"),K(21,"Status: "),z(22,"strong"),K(23),H()()()(),z(24,"div",14)(25,"div",15)(26,"h4"),K(27,"Driver Community"),H(),z(28,"div",16)(29,"textarea",17),it("ngModelChange",function(o){return st(r.driverNewPostText,o)||(r.driverNewPostText=o),o}),H(),z(30,"button",18),_e("click",function(){return r.sendDriverPost()}),K(31,"Post"),H()(),z(32,"ul",19),On(33,SG,6,3,"li",20),H()()()),t&2&&(X(9),fr("open",r.dropdownOpen),X(2),St(" ",r.driverName||"Driver"," "),X(8),St(" ",r.isOnline?"\u{1F534} STOP SHARING":"\u{1F7E2} START SHARING"," "),X(4),Ln(r.isOnline?"ONLINE":"OFFLINE"),X(),fr("show",r.driverCommunityOpen),X(5),rt("ngModel",r.driverNewPostText),X(4),Ft("ngForOf",r.driverCommunityPosts))},dependencies:[Cn,ws,Yn,Qn,Pr,gr],styles:['.top-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#fff;border-bottom:2px solid #FF4500;padding:.5rem 1rem;font-family:Arial,sans-serif;position:sticky;top:0;height:60px;z-index:100;box-shadow:0 2px 4px #0000001a}.top-bar-left[_ngcontent-%COMP%]{display:flex;align-items:center}.top-bar-left[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{color:#ff4500;font-weight:500}.top-bar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.chat-btn[_ngcontent-%COMP%], .toggle-tools-btn[_ngcontent-%COMP%], .center-btn[_ngcontent-%COMP%]{background-color:#ff4500;color:#fff;border-radius:50px;border:none;padding:6px 14px;font-weight:600;cursor:pointer;transition:.2s}.chat-btn[_ngcontent-%COMP%]:hover, .toggle-tools-btn[_ngcontent-%COMP%]:hover, .center-btn[_ngcontent-%COMP%]:hover{background-color:#e65c00}.account-dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block}.account-btn[_ngcontent-%COMP%]{background-color:#fff;color:#ff4500;border:1px solid #FF4500;border-radius:6px;padding:6px 12px;cursor:pointer;transition:.2s}.account-btn[_ngcontent-%COMP%]:hover{background-color:#ff4500;color:#fff}.dropdown-menu[_ngcontent-%COMP%]{display:none;position:absolute;right:0;top:100%;background-color:#fff;border:1px solid #FF4500;border-radius:6px;margin-top:4px;min-width:120px;z-index:6000;box-shadow:0 4px 8px #0000001a}.dropdown-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;color:#ff4500;width:100%;text-align:left;padding:8px 12px;cursor:pointer}.dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ff4500;color:#fff}.account-dropdown.open[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{display:block}.main-content-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:calc(100vh - 60px)}.main-content[_ngcontent-%COMP%]{text-align:center}.center-btn[_ngcontent-%COMP%]{font-size:1.2rem;padding:12px 20px}.right-dashboard[_ngcontent-%COMP%]{width:320px;background:#fff;border-left:3px solid #FF4500;padding:1rem;overflow-y:auto;position:fixed;top:73px;right:-340px;height:calc(100vh - 60px);transition:right .3s ease;z-index:1500}.right-dashboard.show[_ngcontent-%COMP%]{right:0}.community[_ngcontent-%COMP%]{background:#fff;padding:1rem}.community-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:2px solid #FF4500;border-radius:10px;padding:.5rem}.post-btn[_ngcontent-%COMP%]{background-color:#ff4500;color:#fff;border-radius:50px;border:2px solid #FF4500;font-weight:600;width:100%}.post-btn[_ngcontent-%COMP%]:hover{background-color:#e65c00}.community[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:1rem;padding-left:0;list-style:none}.community[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.5rem;font-size:.95rem;border-bottom:1px solid #ffd6b3;padding:4px 0}.community[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{display:block;font-size:.8rem;color:#999}@media screen and (max-width: 680px){.right-dashboard[_ngcontent-%COMP%]{width:90%;right:-95%}.right-dashboard.show[_ngcontent-%COMP%]{right:0}.center-btn[_ngcontent-%COMP%]{font-size:1rem;padding:10px 16px}}.logo-circle[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;border:3px solid #FF4500;background:#fff url("./media/logo-IKMKXBN4.png") no-repeat center center;background-size:70%;box-shadow:0 4px 12px #0003;transition:transform .3s}.logo-circle[_ngcontent-%COMP%]:hover{transform:scale(1.05)}@media (max-width: 576px){.logo-circle[_ngcontent-%COMP%]{width:80px;height:80px}}.driver-header-horizontal[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin:0 1rem;justify-content:flex-start}.center-btn[_ngcontent-%COMP%]{margin-top:.5rem;width:200px;padding:10px 0;font-size:1rem;border-radius:25px;background-color:#ff4500;color:#fff;border:none;font-weight:600;cursor:pointer;transition:.2s}.center-btn[_ngcontent-%COMP%]:hover{background-color:#e65c00;transform:translateY(-1px)}']})};function AG(n,e){n&1&&(z(0,"div",8),K(1,` No drivers found.
`),H())}function RG(n,e){if(n&1){let t=_s();z(0,"div")(1,"h4"),K(2),H(),z(3,"p")(4,"strong"),K(5,"Email:"),H(),K(6),H(),z(7,"p")(8,"strong"),K(9,"License:"),H(),K(10),H(),z(11,"p")(12,"strong"),K(13,"Plate:"),H(),K(14),H(),z(15,"div",12)(16,"button",13),_e("click",function(){kt(t);let i=Be().$implicit,o=Be();return Ot(o.startDriverEdit(i))}),K(17,"Update"),H(),z(18,"button",14),_e("click",function(){kt(t);let i=Be().$implicit,o=Be();return Ot(o.deleteDriverAccount(i.id))}),K(19,"Delete"),H()()()}if(n&2){let t=Be().$implicit;X(2),Ln(t.name),X(4),St(" ",t.email),X(4),St(" ",t.license),X(4),St(" ",t.plate)}}function xG(n,e){if(n&1){let t=_s();z(0,"div")(1,"h5"),K(2,"Edit Driver"),H(),z(3,"input",15),it("ngModelChange",function(i){kt(t);let o=Be(2);return st(o.editDriverName,i)||(o.editDriverName=i),Ot(i)}),H(),z(4,"input",16),it("ngModelChange",function(i){kt(t);let o=Be(2);return st(o.editDriverEmail,i)||(o.editDriverEmail=i),Ot(i)}),H(),z(5,"input",17),it("ngModelChange",function(i){kt(t);let o=Be(2);return st(o.editDriverLicense,i)||(o.editDriverLicense=i),Ot(i)}),H(),z(6,"input",18),it("ngModelChange",function(i){kt(t);let o=Be(2);return st(o.editDriverPlate,i)||(o.editDriverPlate=i),Ot(i)}),H(),z(7,"div",19)(8,"button",20),_e("click",function(){kt(t);let i=Be().$implicit,o=Be();return Ot(o.updateDriver(i.id,{name:o.editDriverName,email:o.editDriverEmail,license:o.editDriverLicense,plate:o.editDriverPlate}))}),K(9," Save "),H(),z(10,"button",21),_e("click",function(){kt(t);let i=Be(2);return Ot(i.cancelDriverEdit())}),K(11,"Cancel"),H()()()}if(n&2){let t=Be(2);X(3),rt("ngModel",t.editDriverName),X(),rt("ngModel",t.editDriverEmail),X(),rt("ngModel",t.editDriverLicense),X(),rt("ngModel",t.editDriverPlate)}}function MG(n,e){if(n&1&&(z(0,"div",9)(1,"div",10),On(2,RG,20,4,"div",11)(3,xG,12,4,"div",11),H()()),n&2){let t=e.$implicit,r=Be();X(2),Ft("ngIf",r.editDriverId!==t.id),X(),Ft("ngIf",r.editDriverId===t.id)}}function PG(n,e){n&1&&(z(0,"div",22),K(1,` No commuters found.
`),H())}function NG(n,e){if(n&1){let t=_s();z(0,"div")(1,"h4"),K(2),H(),z(3,"p",23)(4,"strong"),K(5,"Email:"),H(),K(6),H(),z(7,"div",12)(8,"button",13),_e("click",function(){kt(t);let i=Be().$implicit,o=Be();return Ot(o.startEdit(i))}),K(9,"Update"),H(),z(10,"button",14),_e("click",function(){kt(t);let i=Be().$implicit,o=Be();return Ot(o.deleteCommuter(i.id))}),K(11,"Delete"),H()()()}if(n&2){let t=Be().$implicit;X(2),Ln(t.name),X(4),St(" ",t.email)}}function kG(n,e){if(n&1){let t=_s();z(0,"div")(1,"h5"),K(2,"Edit Commuter"),H(),z(3,"input",15),it("ngModelChange",function(i){kt(t);let o=Be(2);return st(o.editCommuterName,i)||(o.editCommuterName=i),Ot(i)}),H(),z(4,"input",16),it("ngModelChange",function(i){kt(t);let o=Be(2);return st(o.editCommuterEmail,i)||(o.editCommuterEmail=i),Ot(i)}),H(),z(5,"div",19)(6,"button",20),_e("click",function(){kt(t);let i=Be().$implicit,o=Be();return Ot(o.updateUser(i.id,{name:o.editCommuterName,email:o.editCommuterEmail}))}),K(7,"Save"),H(),z(8,"button",21),_e("click",function(){kt(t);let i=Be(2);return Ot(i.cancelEdit())}),K(9,"Cancel"),H()()()}if(n&2){let t=Be(2);X(3),rt("ngModel",t.editCommuterName),X(),rt("ngModel",t.editCommuterEmail)}}function OG(n,e){if(n&1&&(z(0,"div",9)(1,"div",10),On(2,NG,12,2,"div",11)(3,kG,10,2,"div",11),H()()),n&2){let t=e.$implicit,r=Be();X(2),Ft("ngIf",r.editId!==t.id),X(),Ft("ngIf",r.editId===t.id)}}var dy=class n{constructor(e,t,r,i){this.firestore=e;this.http=t;this.auth=r;this.router=i}newDriverName="";newDriverEmail="";newDriverLicense="";newDriverPlate="";editId="";editCommuterName="";editCommuterEmail="";editDriverId="";editDriverName="";editDriverEmail="";editDriverLicense="";editDriverPlate="";commuters=Ct([]);drivers=Ct([]);ngOnInit(){return T(this,null,function*(){yield this.loadDrivers(),yield this.loadCommuters()})}loadCommuters(){return T(this,null,function*(){let e=oi(this.firestore,"users"),t=Qs(e,tD("role","==","commuter")),r=yield XC(t);this.commuters.set(r.docs.map(i=>Q({id:i.id},i.data())))})}loadDrivers(){return T(this,null,function*(){let e=oi(this.firestore,"users"),t=Qs(e,tD("role","==","driver")),r=yield XC(t);this.drivers.set(r.docs.map(i=>Q({id:i.id},i.data())))})}startEdit(e){this.editId=e.id,this.editCommuterName=e.name,this.editCommuterEmail=e.email}cancelEdit(){this.editId=""}updateUser(e,t){return T(this,null,function*(){let r=Xn(this.firestore,"users",e);yield eD(r,t),alert("Commuter updated."),this.cancelEdit(),yield this.loadCommuters()})}deleteCommuter(e){return T(this,null,function*(){let t=Xn(this.firestore,"users",e);yield Sf(t),alert("Commuter deleted."),yield this.loadCommuters()})}startDriverEdit(e){this.editDriverId=e.id,this.editDriverName=e.name,this.editDriverEmail=e.email,this.editDriverLicense=e.license??"",this.editDriverPlate=e.plate??""}cancelDriverEdit(){this.editDriverId=""}updateDriver(e,t){return T(this,null,function*(){let r=Xn(this.firestore,"users",e);yield eD(r,t),alert("Driver updated."),this.cancelDriverEdit(),yield this.loadDrivers()})}deleteDriverAccount(e){return T(this,null,function*(){let t=Xn(this.firestore,"users",e);yield Sf(t),alert("Driver deleted."),yield this.loadDrivers()})}createDriver(){return T(this,null,function*(){if(!this.newDriverName||!this.newDriverEmail){alert("Name and email are required.");return}let e=oi(this.firestore,"users"),t={name:this.newDriverName,email:this.newDriverEmail,license:this.newDriverLicense,plate:this.newDriverPlate,role:"driver",status:"approved",createdAt:new Date};yield Pl(e,t),alert("Driver account created."),this.newDriverName="",this.newDriverEmail="",this.newDriverLicense="",this.newDriverPlate="",yield this.loadDrivers()})}logout(){L_(this.auth).then(()=>{localStorage.removeItem("user"),this.router.navigate(["/login"])})}static \u0275fac=function(t){return new(t||n)(ue(Un),ue(wg),ue(Ut),ue(Mt))};static \u0275cmp=Lt({type:n,selectors:[["app-admin-dashboard"]],decls:15,vars:4,consts:[[1,"my-4"],["type","button","routerLink","/admin/dashboard/add-driver",1,"btn","btn-success","mb-4"],[1,"text-end","mb-3"],[1,"btn","btn-warning",3,"click"],[1,"mb-3"],["class","alert alert-info",4,"ngIf"],["class","card shadow mb-3",4,"ngFor","ngForOf"],["class","alert alert-secondary",4,"ngIf"],[1,"alert","alert-info"],[1,"card","shadow","mb-3"],[1,"card-body"],[4,"ngIf"],[1,"text-end","mt-2"],[1,"btn","btn-primary","me-2",3,"click"],[1,"btn","btn-danger",3,"click"],["placeholder","Full Name",1,"form-control","mb-2",3,"ngModelChange","ngModel"],["placeholder","Email",1,"form-control","mb-2",3,"ngModelChange","ngModel"],["placeholder","License",1,"form-control","mb-2",3,"ngModelChange","ngModel"],["placeholder","Plate",1,"form-control","mb-2",3,"ngModelChange","ngModel"],[1,"text-end"],[1,"btn","btn-success","me-2",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"alert","alert-secondary"],[1,"mb-1"]],template:function(t,r){t&1&&(vn(0,"hr",0),z(1,"button",1),K(2,` Add Driver Account
`),H(),z(3,"div",2)(4,"button",3),_e("click",function(){return r.logout()}),K(5,"Logout"),H()(),z(6,"h2",4),K(7,"Driver Accounts"),H(),On(8,AG,2,0,"div",5)(9,MG,4,2,"div",6),vn(10,"hr",0),z(11,"h2",4),K(12,"Commuter Accounts"),H(),On(13,PG,2,0,"div",7)(14,OG,4,2,"div",6)),t&2&&(X(8),Ft("ngIf",r.drivers().length===0),X(),Ft("ngForOf",r.drivers()),X(4),Ft("ngIf",r.commuters().length===0),X(),Ft("ngForOf",r.commuters()))},dependencies:[Cn,ws,za,TI,Yn,Qn,Pr,gr,Rh,Mi],encapsulation:2})};var hy=class n{constructor(e,t,r){this.firestore=e;this.auth=t;this.router=r}name="";email="";license="";plate="";password="";createDriver(){return T(this,null,function*(){if(!this.name||!this.email||!this.password){alert("Name, Email, and Password are required.");return}try{let t=(yield O_(this.auth,this.email,this.password)).user.uid,r=Xn(this.firestore,`users/${t}`);yield Nl(r,{uid:t,name:this.name,email:this.email,license:this.license,plate:this.plate,role:"driver",status:"approved",createdAt:new Date}),alert("Driver account created successfully!"),this.router.navigate(["/admin"])}catch(e){console.error(e),alert("Error: "+e.message)}})}static \u0275fac=function(t){return new(t||n)(ue(Un),ue(Ut),ue(Mt))};static \u0275cmp=Lt({type:n,selectors:[["app-add-driver"]],decls:29,vars:5,consts:[[1,"container","my-4"],[1,"mb-3"],[1,"card","shadow","p-4"],[1,"form-label"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],["type","email",1,"form-control",3,"ngModelChange","ngModel"],["type","password",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-end"],["routerLink","/admin/dashboard",1,"btn","btn-secondary","me-2"],[1,"btn","btn-success",3,"click"]],template:function(t,r){t&1&&(z(0,"div",0)(1,"h2",1),K(2,"Create Driver Account"),H(),z(3,"div",2)(4,"div",1)(5,"label",3),K(6,"Full Name"),H(),z(7,"input",4),it("ngModelChange",function(o){return st(r.name,o)||(r.name=o),o}),H()(),z(8,"div",1)(9,"label",3),K(10,"Email"),H(),z(11,"input",5),it("ngModelChange",function(o){return st(r.email,o)||(r.email=o),o}),H()(),z(12,"div",1)(13,"label",3),K(14,"License Number"),H(),z(15,"input",4),it("ngModelChange",function(o){return st(r.license,o)||(r.license=o),o}),H()(),z(16,"div",1)(17,"label",3),K(18,"Plate Number"),H(),z(19,"input",4),it("ngModelChange",function(o){return st(r.plate,o)||(r.plate=o),o}),H()(),z(20,"div",1)(21,"label",3),K(22,"Password"),H(),z(23,"input",6),it("ngModelChange",function(o){return st(r.password,o)||(r.password=o),o}),H()(),z(24,"div",7)(25,"button",8),K(26,"Cancel"),H(),z(27,"button",9),_e("click",function(){return r.createDriver()}),K(28,"Create Driver"),H()()()()),t&2&&(X(7),rt("ngModel",r.name),X(4),rt("ngModel",r.email),X(4),rt("ngModel",r.license),X(4),rt("ngModel",r.plate),X(4),rt("ngModel",r.password))},dependencies:[Cn,Yn,Qn,Pr,gr,Mi],encapsulation:2})};var bc=class n{constructor(e,t,r){this.auth=e;this.authService=t;this.router=r}canActivate=(e,t)=>T(this,null,function*(){let r=e.data.role,i=yield new Promise(a=>{Vs(this.auth,u=>a(u),()=>a(null))});return i?(yield this.authService.getUserRole(i.uid))===r?!0:(this.router.navigate(["/login"]),!1):(this.router.navigate(["/login"]),!1)});static \u0275fac=function(t){return new(t||n)(le(Ut),le(Gi),le(Mt))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})};var rL=[{path:"login",component:Hv},{path:"signup",children:[{path:"",component:zv},{path:"commuter",component:qv},{path:"admin",component:Wv}]},{path:"commuter/dashboard",component:uy,canActivate:[bc],data:{role:"commuter"}},{path:"driver/dashboard",component:ly,canActivate:[bc],data:{role:"driver"}},{path:"admin/dashboard",component:dy,canActivate:[bc],data:{role:"admin"}},{path:"admin/dashboard/add-driver",component:hy,canActivate:[bc],data:{role:"admin"}},{path:"",redirectTo:"login",pathMatch:"full"},{path:"**",redirectTo:"login"}];var uL="firebasestorage.googleapis.com",LG="storageBucket",FG=120*1e3,VG=600*1e3;var Ki=class n extends Vn{constructor(e,t,r=0){super(iD(e),`Firebase Storage: ${t} (${iD(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return iD(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Lo=(function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n})(Lo||{});function iD(n){return"storage/"+n}function UG(){let n="An unknown error occurred, please check the error payload for server response.";return new Ki(Lo.UNKNOWN,n)}function jG(){return new Ki(Lo.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function BG(){return new Ki(Lo.CANCELED,"User canceled the upload/download.")}function $G(n){return new Ki(Lo.INVALID_URL,"Invalid URL '"+n+"'.")}function HG(n){return new Ki(Lo.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function iL(n){return new Ki(Lo.INVALID_ARGUMENT,n)}function lL(){return new Ki(Lo.APP_DELETED,"The Firebase app was deleted.")}function zG(n){return new Ki(Lo.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var Oo=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw HG(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(ce){ce.path.charAt(ce.path.length-1)==="/"&&(ce.path_=ce.path_.slice(0,-1))}let a="(/(.*))?$",u=new RegExp("^gs://"+i+a,"i"),d={bucket:1,path:3};function f(ce){ce.path_=decodeURIComponent(ce.path)}let g="v[A-Za-z0-9_]+",y=t.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",b=new RegExp(`^https?://${y}/${g}/b/${i}/o${E}`,"i"),N={bucket:1,path:3},$=t===uL?"(?:storage.googleapis.com|storage.cloud.google.com)":t,F="([^?#]*)",q=new RegExp(`^https?://${$}/${i}/${F}`,"i"),se=[{regex:u,indices:d,postModify:o},{regex:b,indices:N,postModify:f},{regex:q,indices:{bucket:1,path:2},postModify:f}];for(let ce=0;ce<se.length;ce++){let Ke=se[ce],Ee=Ke.regex.exec(e);if(Ee){let x=Ee[Ke.indices.bucket],C=Ee[Ke.indices.path];C||(C=""),r=new n(x,C),Ke.postModify(r);break}}if(r==null)throw $G(e);return r}},oD=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function qG(n,e,t){let r=1,i=null,o=null,a=!1,u=0;function d(){return u===2}let f=!1;function g(...F){f||(f=!0,e.apply(null,F))}function y(F){i=setTimeout(()=>{i=null,n(b,d())},F)}function E(){o&&clearTimeout(o)}function b(F,...q){if(f){E();return}if(F){E(),g.call(null,F,...q);return}if(d()||a){E(),g.call(null,F,...q);return}r<64&&(r*=2);let se;u===1?(u=2,se=0):se=(r+Math.random())*1e3,y(se)}let N=!1;function $(F){N||(N=!0,E(),!f&&(i!==null?(F||(u=2),clearTimeout(i),y(0)):F||(u=1)))}return y(0),o=setTimeout(()=>{a=!0,$(!0)},t),$}function WG(n){n(!1)}function GG(n){return n!==void 0}function oL(n,e,t,r){if(r<e)throw iL(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw iL(`Invalid value for '${n}'. Expected ${t} or less.`)}function KG(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var sD=(function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n})(sD||{});function ZG(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}var aD=class{constructor(e,t,r,i,o,a,u,d,f,g,y,E=!0,b=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=u,this.errorCallback_=d,this.timeout_=f,this.progressCallback_=g,this.connectionFactory_=y,this.retry=E,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,$)=>{this.resolve_=N,this.reject_=$,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new kl(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let a=u=>{let d=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,f)};this.progressCallback_!==null&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(a),this.pendingConnection_=null;let u=o.getErrorCode()===sD.NO_ERROR,d=o.getStatus();if(!u||ZG(d,this.additionalRetryCodes_)&&this.retry){let g=o.getErrorCode()===sD.ABORT;r(!1,new kl(!1,null,g));return}let f=this.successCodes_.indexOf(d)!==-1;r(!0,new kl(f,o))})},t=(r,i)=>{let o=this.resolve_,a=this.reject_,u=i.connection;if(i.wasSuccessCode)try{let d=this.callback_(u,u.getResponse());GG(d)?o(d):o()}catch(d){a(d)}else if(u!==null){let d=UG();d.serverResponse=u.getErrorText(),this.errorCallback_?a(this.errorCallback_(u,d)):a(d)}else if(i.canceled){let d=this.appDelete_?lL():BG();a(d)}else{let d=jG();a(d)}};this.canceled_?t(!1,new kl(!1,null,!0)):this.backoffId_=qG(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&WG(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},kl=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function QG(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function YG(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function JG(n,e){e&&(n["X-Firebase-GMPID"]=e)}function XG(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function e8(n,e,t,r,i,o,a=!0,u=!1){let d=KG(n.urlParams),f=n.url+d,g=Object.assign({},n.headers);return JG(g,e),QG(g,t),YG(g,o),XG(g,r),new aD(f,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,a,u)}function t8(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function n8(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}var ume=256*1024;var cD=class n{constructor(e,t){this._service=e,t instanceof Oo?this._location=t:this._location=Oo.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new Oo(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return n8(this._location.path)}get storage(){return this._service}get parent(){let e=t8(this._location.path);if(e===null)return null;let t=new Oo(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw zG(e)}};function sL(n,e){let t=e?.[LG];return t==null?null:Oo.makeFromBucketSpec(t,n)}function r8(n,e,t,r={}){n.host=`${e}:${t}`;let i=Pi(e);i&&(nl(`https://${n.host}/b`),rl("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";let{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:u_(o,n.app.options.projectId))}var uD=class{constructor(e,t,r,i,o,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=a,this._bucket=null,this._host=uL,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=FG,this._maxUploadRetryTime=VG,this._requests=new Set,i!=null?this._bucket=Oo.makeFromBucketSpec(i,this._host):this._bucket=sL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Oo.makeFromBucketSpec(this._url,e):this._bucket=sL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){oL("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){oL("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return T(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return T(this,null,function*(){if(Dn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new cD(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new oD(lL());{let a=e8(e,this._appId,r,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){return T(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},aL="@firebase/storage",cL="0.13.14";var dL="storage";function hL(n=bo(),e){n=pt(n);let r=Rs(n,dL).getImmediate({identifier:e}),i=c_("storage");return i&&fL(r,...i),r}function fL(n,e,t,r={}){r8(n,e,t,r)}function i8(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new uD(t,r,i,e,Li)}function o8(){_r(new yn(dL,i8,"PUBLIC").setMultipleInstances(!0)),at(aL,cL,""),at(aL,cL,"esm2017")}o8();var Mf=class{constructor(e){return e}},pL="storage",lD=class{constructor(){return xs(pL)}};var dD=new J("angularfire2.storage-instances");function s8(n,e){let t=nc(pL,n,e);return t&&new Mf(t)}function a8(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Mf(r)}}var c8={provide:lD,deps:[[new on,dD]]},u8={provide:Mf,useFactory:s8,deps:[[new on,dD],Xr]};function mL(n,...e){return at("angularfire",Fi.full,"gcs"),Nn([u8,c8,{provide:dD,useFactory:a8(n),multi:!0,deps:[Ge,_t,Vi,To,[new on,ac],[new on,Ps],...e]}])}var gL=dt(hL,!0);var _L={production:!1,firebase:{apiKey:"AIzaSyAQuY-FE7naQBxAe0RXMRDb6sOJSTX2vTQ",authDomain:"fpotw-3328e.firebaseapp.com",projectId:"fpotw-3328e",storageBucket:"fpotw-3328e.appspot.com",messagingSenderId:"1070031116982",appId:"1:1070031116982:web:e532363d7c43e89a3be417"}};var vL={providers:[JI(rL),oN(()=>sN(_L.firebase)),lk(()=>dk()),X1(()=>eL()),mL(()=>gL())]};var fy=class n{constructor(e){this.auth=e;Vs(this.auth,t=>{console.log("AUTH STATE (app root):",t?t.uid:"none")})}static \u0275fac=function(t){return new(t||n)(ue(Ut))};static \u0275cmp=Lt({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){t&1&&vn(0,"router-outlet")},dependencies:[Th,Rh],encapsulation:2})};vI(fy,vL).catch(n=>console.error(n));
